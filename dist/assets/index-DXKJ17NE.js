var Kp=Object.defineProperty;var Qp=(f,a,r)=>a in f?Kp(f,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):f[a]=r;var le=(f,a,r)=>Qp(f,typeof a!="symbol"?a+"":a,r);(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();function Au(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function Zp(f){if(Object.prototype.hasOwnProperty.call(f,"__esModule"))return f;var a=f.default;if(typeof a=="function"){var r=function i(){return this instanceof i?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};r.prototype=a.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(f).forEach(function(i){var c=Object.getOwnPropertyDescriptor(f,i);Object.defineProperty(r,i,c.get?c:{enumerable:!0,get:function(){return f[i]}})}),r}var Lo={exports:{}},mn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function Jp(){if(M0)return mn;M0=1;var f=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(i,c,u){var m=null;if(u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),"key"in c){u={};for(var h in c)h!=="key"&&(u[h]=c[h])}else u=c;return c=u.ref,{$$typeof:f,type:i,key:m,ref:c!==void 0?c:null,props:u}}return mn.Fragment=a,mn.jsx=r,mn.jsxs=r,mn}var O0;function Wp(){return O0||(O0=1,Lo.exports=Jp()),Lo.exports}var n=Wp(),ko={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0;function eb(){if(I0)return ye;I0=1;var f=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function D(S){return S===null||typeof S!="object"?null:(S=w&&S[w]||S["@@iterator"],typeof S=="function"?S:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,E={};function A(S,T,P){this.props=S,this.context=T,this.refs=E,this.updater=P||b}A.prototype.isReactComponent={},A.prototype.setState=function(S,T){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,T,"setState")},A.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function X(){}X.prototype=A.prototype;function L(S,T,P){this.props=S,this.context=T,this.refs=E,this.updater=P||b}var J=L.prototype=new X;J.constructor=L,N(J,A.prototype),J.isPureReactComponent=!0;var B=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},ne=Object.prototype.hasOwnProperty;function he(S,T,P,F,Z,se){return P=se.ref,{$$typeof:f,type:S,key:T,ref:P!==void 0?P:null,props:se}}function ie(S,T){return he(S.type,T,void 0,void 0,void 0,S.props)}function ee(S){return typeof S=="object"&&S!==null&&S.$$typeof===f}function Ce(S){var T={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(P){return T[P]})}var W=/\/+/g;function ve(S,T){return typeof S=="object"&&S!==null&&S.key!=null?Ce(""+S.key):T.toString(36)}function te(){}function fe(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(te,te):(S.status="pending",S.then(function(T){S.status==="pending"&&(S.status="fulfilled",S.value=T)},function(T){S.status==="pending"&&(S.status="rejected",S.reason=T)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function I(S,T,P,F,Z){var se=typeof S;(se==="undefined"||se==="boolean")&&(S=null);var ae=!1;if(S===null)ae=!0;else switch(se){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(S.$$typeof){case f:case a:ae=!0;break;case y:return ae=S._init,I(ae(S._payload),T,P,F,Z)}}if(ae)return Z=Z(S),ae=F===""?"."+ve(S,0):F,B(Z)?(P="",ae!=null&&(P=ae.replace(W,"$&/")+"/"),I(Z,T,P,"",function(oe){return oe})):Z!=null&&(ee(Z)&&(Z=ie(Z,P+(Z.key==null||S&&S.key===Z.key?"":(""+Z.key).replace(W,"$&/")+"/")+ae)),T.push(Z)),1;ae=0;var Re=F===""?".":F+":";if(B(S))for(var xe=0;xe<S.length;xe++)F=S[xe],se=Re+ve(F,xe),ae+=I(F,T,P,se,Z);else if(xe=D(S),typeof xe=="function")for(S=xe.call(S),xe=0;!(F=S.next()).done;)F=F.value,se=Re+ve(F,xe++),ae+=I(F,T,P,se,Z);else if(se==="object"){if(typeof S.then=="function")return I(fe(S),T,P,F,Z);throw T=String(S),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return ae}function _(S,T,P){if(S==null)return S;var F=[],Z=0;return I(S,F,"","",function(se){return T.call(P,se,Z++)}),F}function j(S){if(S._status===-1){var T=S._result;T=T(),T.then(function(P){(S._status===0||S._status===-1)&&(S._status=1,S._result=P)},function(P){(S._status===0||S._status===-1)&&(S._status=2,S._result=P)}),S._status===-1&&(S._status=0,S._result=T)}if(S._status===1)return S._result.default;throw S._result}var z=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function M(){}return ye.Children={map:_,forEach:function(S,T,P){_(S,function(){T.apply(this,arguments)},P)},count:function(S){var T=0;return _(S,function(){T++}),T},toArray:function(S){return _(S,function(T){return T})||[]},only:function(S){if(!ee(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},ye.Component=A,ye.Fragment=r,ye.Profiler=c,ye.PureComponent=L,ye.StrictMode=i,ye.Suspense=x,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,ye.__COMPILER_RUNTIME={__proto__:null,c:function(S){return K.H.useMemoCache(S)}},ye.cache=function(S){return function(){return S.apply(null,arguments)}},ye.cloneElement=function(S,T,P){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var F=N({},S.props),Z=S.key,se=void 0;if(T!=null)for(ae in T.ref!==void 0&&(se=void 0),T.key!==void 0&&(Z=""+T.key),T)!ne.call(T,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&T.ref===void 0||(F[ae]=T[ae]);var ae=arguments.length-2;if(ae===1)F.children=P;else if(1<ae){for(var Re=Array(ae),xe=0;xe<ae;xe++)Re[xe]=arguments[xe+2];F.children=Re}return he(S.type,Z,void 0,void 0,se,F)},ye.createContext=function(S){return S={$$typeof:m,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:u,_context:S},S},ye.createElement=function(S,T,P){var F,Z={},se=null;if(T!=null)for(F in T.key!==void 0&&(se=""+T.key),T)ne.call(T,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(Z[F]=T[F]);var ae=arguments.length-2;if(ae===1)Z.children=P;else if(1<ae){for(var Re=Array(ae),xe=0;xe<ae;xe++)Re[xe]=arguments[xe+2];Z.children=Re}if(S&&S.defaultProps)for(F in ae=S.defaultProps,ae)Z[F]===void 0&&(Z[F]=ae[F]);return he(S,se,void 0,void 0,null,Z)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(S){return{$$typeof:h,render:S}},ye.isValidElement=ee,ye.lazy=function(S){return{$$typeof:y,_payload:{_status:-1,_result:S},_init:j}},ye.memo=function(S,T){return{$$typeof:g,type:S,compare:T===void 0?null:T}},ye.startTransition=function(S){var T=K.T,P={};K.T=P;try{var F=S(),Z=K.S;Z!==null&&Z(P,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(M,z)}catch(se){z(se)}finally{K.T=T}},ye.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},ye.use=function(S){return K.H.use(S)},ye.useActionState=function(S,T,P){return K.H.useActionState(S,T,P)},ye.useCallback=function(S,T){return K.H.useCallback(S,T)},ye.useContext=function(S){return K.H.useContext(S)},ye.useDebugValue=function(){},ye.useDeferredValue=function(S,T){return K.H.useDeferredValue(S,T)},ye.useEffect=function(S,T,P){var F=K.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(S,T)},ye.useId=function(){return K.H.useId()},ye.useImperativeHandle=function(S,T,P){return K.H.useImperativeHandle(S,T,P)},ye.useInsertionEffect=function(S,T){return K.H.useInsertionEffect(S,T)},ye.useLayoutEffect=function(S,T){return K.H.useLayoutEffect(S,T)},ye.useMemo=function(S,T){return K.H.useMemo(S,T)},ye.useOptimistic=function(S,T){return K.H.useOptimistic(S,T)},ye.useReducer=function(S,T,P){return K.H.useReducer(S,T,P)},ye.useRef=function(S){return K.H.useRef(S)},ye.useState=function(S){return K.H.useState(S)},ye.useSyncExternalStore=function(S,T,P){return K.H.useSyncExternalStore(S,T,P)},ye.useTransition=function(){return K.H.useTransition()},ye.version="19.1.0",ye}var U0;function Cu(){return U0||(U0=1,ko.exports=eb()),ko.exports}var G=Cu();const zh=Au(G);var Vo={exports:{}},hn={},$o={exports:{}},Bo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function tb(){return L0||(L0=1,function(f){function a(_,j){var z=_.length;_.push(j);e:for(;0<z;){var M=z-1>>>1,S=_[M];if(0<c(S,j))_[M]=j,_[z]=S,z=M;else break e}}function r(_){return _.length===0?null:_[0]}function i(_){if(_.length===0)return null;var j=_[0],z=_.pop();if(z!==j){_[0]=z;e:for(var M=0,S=_.length,T=S>>>1;M<T;){var P=2*(M+1)-1,F=_[P],Z=P+1,se=_[Z];if(0>c(F,z))Z<S&&0>c(se,F)?(_[M]=se,_[Z]=z,M=Z):(_[M]=F,_[P]=z,M=P);else if(Z<S&&0>c(se,z))_[M]=se,_[Z]=z,M=Z;else break e}}return j}function c(_,j){var z=_.sortIndex-j.sortIndex;return z!==0?z:_.id-j.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;f.unstable_now=function(){return u.now()}}else{var m=Date,h=m.now();f.unstable_now=function(){return m.now()-h}}var x=[],g=[],y=1,w=null,D=3,b=!1,N=!1,E=!1,A=!1,X=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function B(_){for(var j=r(g);j!==null;){if(j.callback===null)i(g);else if(j.startTime<=_)i(g),j.sortIndex=j.expirationTime,a(x,j);else break;j=r(g)}}function K(_){if(E=!1,B(_),!N)if(r(x)!==null)N=!0,ne||(ne=!0,ve());else{var j=r(g);j!==null&&I(K,j.startTime-_)}}var ne=!1,he=-1,ie=5,ee=-1;function Ce(){return A?!0:!(f.unstable_now()-ee<ie)}function W(){if(A=!1,ne){var _=f.unstable_now();ee=_;var j=!0;try{e:{N=!1,E&&(E=!1,L(he),he=-1),b=!0;var z=D;try{t:{for(B(_),w=r(x);w!==null&&!(w.expirationTime>_&&Ce());){var M=w.callback;if(typeof M=="function"){w.callback=null,D=w.priorityLevel;var S=M(w.expirationTime<=_);if(_=f.unstable_now(),typeof S=="function"){w.callback=S,B(_),j=!0;break t}w===r(x)&&i(x),B(_)}else i(x);w=r(x)}if(w!==null)j=!0;else{var T=r(g);T!==null&&I(K,T.startTime-_),j=!1}}break e}finally{w=null,D=z,b=!1}j=void 0}}finally{j?ve():ne=!1}}}var ve;if(typeof J=="function")ve=function(){J(W)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,fe=te.port2;te.port1.onmessage=W,ve=function(){fe.postMessage(null)}}else ve=function(){X(W,0)};function I(_,j){he=X(function(){_(f.unstable_now())},j)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(_){_.callback=null},f.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<_?Math.floor(1e3/_):5},f.unstable_getCurrentPriorityLevel=function(){return D},f.unstable_next=function(_){switch(D){case 1:case 2:case 3:var j=3;break;default:j=D}var z=D;D=j;try{return _()}finally{D=z}},f.unstable_requestPaint=function(){A=!0},f.unstable_runWithPriority=function(_,j){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var z=D;D=_;try{return j()}finally{D=z}},f.unstable_scheduleCallback=function(_,j,z){var M=f.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?M+z:M):z=M,_){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=z+S,_={id:y++,callback:j,priorityLevel:_,startTime:z,expirationTime:S,sortIndex:-1},z>M?(_.sortIndex=z,a(g,_),r(x)===null&&_===r(g)&&(E?(L(he),he=-1):E=!0,I(K,z-M))):(_.sortIndex=S,a(x,_),N||b||(N=!0,ne||(ne=!0,ve()))),_},f.unstable_shouldYield=Ce,f.unstable_wrapCallback=function(_){var j=D;return function(){var z=D;D=j;try{return _.apply(this,arguments)}finally{D=z}}}}(Bo)),Bo}var k0;function ab(){return k0||(k0=1,$o.exports=tb()),$o.exports}var Fo={exports:{}},ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function sb(){if(V0)return ft;V0=1;var f=Cu();function a(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(x,g,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:x,containerInfo:g,implementation:y}}var m=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ft.createPortal=function(x,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(x,g,null,y)},ft.flushSync=function(x){var g=m.T,y=i.p;try{if(m.T=null,i.p=2,x)return x()}finally{m.T=g,i.p=y,i.d.f()}},ft.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(x,g))},ft.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},ft.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var y=g.as,w=h(y,g.crossOrigin),D=typeof g.integrity=="string"?g.integrity:void 0,b=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:D,fetchPriority:b}):y==="script"&&i.d.X(x,{crossOrigin:w,integrity:D,fetchPriority:b,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ft.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);i.d.M(x,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(x)},ft.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,w=h(y,g.crossOrigin);i.d.L(x,y,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ft.preloadModule=function(x,g){if(typeof x=="string")if(g){var y=h(g.as,g.crossOrigin);i.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(x)},ft.requestFormReset=function(x){i.d.r(x)},ft.unstable_batchedUpdates=function(x,g){return x(g)},ft.useFormState=function(x,g,y){return m.H.useFormState(x,g,y)},ft.useFormStatus=function(){return m.H.useHostTransitionStatus()},ft.version="19.1.0",ft}var $0;function rb(){if($0)return Fo.exports;$0=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(a){console.error(a)}}return f(),Fo.exports=sb(),Fo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function nb(){if(B0)return hn;B0=1;var f=ab(),a=Cu(),r=rb();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(u(e)!==e)throw Error(i(188))}function x(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var s=e,l=t;;){var o=s.return;if(o===null)break;var d=o.alternate;if(d===null){if(l=o.return,l!==null){s=l;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===s)return h(o),e;if(d===l)return h(o),t;d=d.sibling}throw Error(i(188))}if(s.return!==l.return)s=o,l=d;else{for(var p=!1,v=o.child;v;){if(v===s){p=!0,s=o,l=d;break}if(v===l){p=!0,l=o,s=d;break}v=v.sibling}if(!p){for(v=d.child;v;){if(v===s){p=!0,s=d,l=o;break}if(v===l){p=!0,l=d,s=o;break}v=v.sibling}if(!p)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),J=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),Ce=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ve(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var te=Symbol.for("react.client.reference");function fe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case K:return"Suspense";case ne:return"SuspenseList";case ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case J:return(e.displayName||"Context")+".Provider";case L:return(e._context.displayName||"Context")+".Consumer";case B:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case he:return t=e.displayName||null,t!==null?t:fe(e.type)||"Memo";case ie:t=e._payload,e=e._init;try{return fe(e(t))}catch{}}return null}var I=Array.isArray,_=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},M=[],S=-1;function T(e){return{current:e}}function P(e){0>S||(e.current=M[S],M[S]=null,S--)}function F(e,t){S++,M[S]=e.current,e.current=t}var Z=T(null),se=T(null),ae=T(null),Re=T(null);function xe(e,t){switch(F(ae,t),F(se,e),F(Z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?i0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=i0(t),e=l0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(Z),F(Z,e)}function oe(){P(Z),P(se),P(ae)}function ge(e){e.memoizedState!==null&&F(Re,e);var t=Z.current,s=l0(t,e.type);t!==s&&(F(se,e),F(Z,s))}function _e(e){se.current===e&&(P(Z),P(se)),Re.current===e&&(P(Re),cn._currentValue=z)}var Ze=Object.prototype.hasOwnProperty,be=f.unstable_scheduleCallback,et=f.unstable_cancelCallback,Vu=f.unstable_shouldYield,hr=f.unstable_requestPaint,It=f.unstable_now,Cx=f.unstable_getCurrentPriorityLevel,$u=f.unstable_ImmediatePriority,Bu=f.unstable_UserBlockingPriority,kn=f.unstable_NormalPriority,Tx=f.unstable_LowPriority,Fu=f.unstable_IdlePriority,_x=f.log,Mx=f.unstable_setDisableYieldValue,xr=null,Nt=null;function Ea(e){if(typeof _x=="function"&&Mx(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(xr,e)}catch{}}var St=Math.clz32?Math.clz32:Ux,Ox=Math.log,Ix=Math.LN2;function Ux(e){return e>>>=0,e===0?32:31-(Ox(e)/Ix|0)|0}var Vn=256,$n=4194304;function Wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Bn(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var o=0,d=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var v=l&134217727;return v!==0?(l=v&~d,l!==0?o=Wa(l):(p&=v,p!==0?o=Wa(p):s||(s=v&~e,s!==0&&(o=Wa(s))))):(v=l&~d,v!==0?o=Wa(v):p!==0?o=Wa(p):s||(s=l&~e,s!==0&&(o=Wa(s)))),o===0?0:t!==0&&t!==o&&(t&d)===0&&(d=o&-o,s=t&-t,d>=s||d===32&&(s&4194048)!==0)?t:o}function gr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Lx(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pu(){var e=Vn;return Vn<<=1,(Vn&4194048)===0&&(Vn=256),e}function zu(){var e=$n;return $n<<=1,($n&62914560)===0&&($n=4194304),e}function jl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function pr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kx(e,t,s,l,o,d){var p=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var v=e.entanglements,R=e.expirationTimes,k=e.hiddenUpdates;for(s=p&~s;0<s;){var q=31-St(s),Y=1<<q;v[q]=0,R[q]=-1;var V=k[q];if(V!==null)for(k[q]=null,q=0;q<V.length;q++){var $=V[q];$!==null&&($.lane&=-536870913)}s&=~Y}l!==0&&qu(e,l,0),d!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=d&~(p&~t))}function qu(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-St(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194090}function Hu(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-St(s),o=1<<l;o&t|e[l]&t&&(e[l]|=t),s&=~o}}function El(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Dl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Yu(){var e=j.p;return e!==0?e:(e=window.event,e===void 0?32:D0(e.type))}function Vx(e,t){var s=j.p;try{return j.p=e,t()}finally{j.p=s}}var Da=Math.random().toString(36).slice(2),ut="__reactFiber$"+Da,gt="__reactProps$"+Da,vs="__reactContainer$"+Da,Rl="__reactEvents$"+Da,$x="__reactListeners$"+Da,Bx="__reactHandles$"+Da,Gu="__reactResources$"+Da,br="__reactMarker$"+Da;function Al(e){delete e[ut],delete e[gt],delete e[Rl],delete e[$x],delete e[Bx]}function Ns(e){var t=e[ut];if(t)return t;for(var s=e.parentNode;s;){if(t=s[vs]||s[ut]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=d0(e);e!==null;){if(s=e[ut])return s;e=d0(e)}return t}e=s,s=e.parentNode}return null}function Ss(e){if(e=e[ut]||e[vs]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function yr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function ws(e){var t=e[Gu];return t||(t=e[Gu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function tt(e){e[br]=!0}var Xu=new Set,Ku={};function es(e,t){js(e,t),js(e+"Capture",t)}function js(e,t){for(Ku[e]=t,e=0;e<t.length;e++)Xu.add(t[e])}var Fx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},Zu={};function Px(e){return Ze.call(Zu,e)?!0:Ze.call(Qu,e)?!1:Fx.test(e)?Zu[e]=!0:(Qu[e]=!0,!1)}function Fn(e,t,s){if(Px(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Pn(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function la(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}var Cl,Ju;function Es(e){if(Cl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Cl=t&&t[1]||"",Ju=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cl+e+Ju}var Tl=!1;function _l(e,t){if(!e||Tl)return"";Tl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch($){var V=$}Reflect.construct(e,[],Y)}else{try{Y.call()}catch($){V=$}e.call(Y.prototype)}}else{try{throw Error()}catch($){V=$}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch($){if($&&V&&typeof $.stack=="string")return[$.stack,V.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),p=d[0],v=d[1];if(p&&v){var R=p.split(`
`),k=v.split(`
`);for(o=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;if(l===R.length||o===k.length)for(l=R.length-1,o=k.length-1;1<=l&&0<=o&&R[l]!==k[o];)o--;for(;1<=l&&0<=o;l--,o--)if(R[l]!==k[o]){if(l!==1||o!==1)do if(l--,o--,0>o||R[l]!==k[o]){var q=`
`+R[l].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=l&&0<=o);break}}}finally{Tl=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Es(s):""}function zx(e){switch(e.tag){case 26:case 27:case 5:return Es(e.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 15:return _l(e.type,!1);case 11:return _l(e.type.render,!1);case 1:return _l(e.type,!0);case 31:return Es("Activity");default:return""}}function Wu(e){try{var t="";do t+=zx(e),e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ed(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qx(e){var t=ed(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,d=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(p){l=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(p){l=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zn(e){e._valueTracker||(e._valueTracker=qx(e))}function td(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=ed(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function qn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Hx=/[\n"\\]/g;function Lt(e){return e.replace(Hx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ml(e,t,s,l,o,d,p,v){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ut(t)):e.value!==""+Ut(t)&&(e.value=""+Ut(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Ol(e,p,Ut(t)):s!=null?Ol(e,p,Ut(s)):l!=null&&e.removeAttribute("value"),o==null&&d!=null&&(e.defaultChecked=!!d),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Ut(v):e.removeAttribute("name")}function ad(e,t,s,l,o,d,p,v){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||t!=null))return;s=s!=null?""+Ut(s):"",t=t!=null?""+Ut(t):s,v||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=v?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p)}function Ol(e,t,s){t==="number"&&qn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ds(e,t,s,l){if(e=e.options,t){t={};for(var o=0;o<s.length;o++)t["$"+s[o]]=!0;for(s=0;s<e.length;s++)o=t.hasOwnProperty("$"+e[s].value),e[s].selected!==o&&(e[s].selected=o),o&&l&&(e[s].defaultSelected=!0)}else{for(s=""+Ut(s),t=null,o=0;o<e.length;o++){if(e[o].value===s){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function sd(e,t,s){if(t!=null&&(t=""+Ut(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Ut(s):""}function rd(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(i(92));if(I(l)){if(1<l.length)throw Error(i(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=Ut(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function Rs(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Yx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nd(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||Yx.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function id(e,t,s){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&s[o]!==l&&nd(e,o,l)}else for(var d in t)t.hasOwnProperty(d)&&nd(e,d,t[d])}function Il(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hn(e){return Xx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ul=null;function Ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var As=null,Cs=null;function ld(e){var t=Ss(e);if(t&&(e=t.stateNode)){var s=e[gt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ml(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Lt(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var o=l[gt]||null;if(!o)throw Error(i(90));Ml(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&td(l)}break e;case"textarea":sd(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Ds(e,!!s.multiple,t,!1)}}}var kl=!1;function cd(e,t,s){if(kl)return e(t,s);kl=!0;try{var l=e(t);return l}finally{if(kl=!1,(As!==null||Cs!==null)&&(Ti(),As&&(t=As,e=Cs,Cs=As=null,ld(t),e)))for(t=0;t<e.length;t++)ld(e[t])}}function vr(e,t){var s=e.stateNode;if(s===null)return null;var l=s[gt]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,t,typeof s));return s}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vl=!1;if(ca)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Vl=!1}var Ra=null,$l=null,Yn=null;function od(){if(Yn)return Yn;var e,t=$l,s=t.length,l,o="value"in Ra?Ra.value:Ra.textContent,d=o.length;for(e=0;e<s&&t[e]===o[e];e++);var p=s-e;for(l=1;l<=p&&t[s-l]===o[d-l];l++);return Yn=o.slice(e,1<l?1-l:void 0)}function Gn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xn(){return!0}function ud(){return!1}function pt(e){function t(s,l,o,d,p){this._reactName=s,this._targetInst=o,this.type=l,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(s=e[v],this[v]=s?s(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Xn:ud,this.isPropagationStopped=ud,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),t}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kn=pt(ts),Sr=y({},ts,{view:0,detail:0}),Kx=pt(Sr),Bl,Fl,wr,Qn=y({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wr&&(wr&&e.type==="mousemove"?(Bl=e.screenX-wr.screenX,Fl=e.screenY-wr.screenY):Fl=Bl=0,wr=e),Bl)},movementY:function(e){return"movementY"in e?e.movementY:Fl}}),dd=pt(Qn),Qx=y({},Qn,{dataTransfer:0}),Zx=pt(Qx),Jx=y({},Sr,{relatedTarget:0}),Pl=pt(Jx),Wx=y({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),eg=pt(Wx),tg=y({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ag=pt(tg),sg=y({},ts,{data:0}),fd=pt(sg),rg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ng={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ig[e])?!!t[e]:!1}function zl(){return lg}var cg=y({},Sr,{key:function(e){if(e.key){var t=rg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ng[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(e){return e.type==="keypress"?Gn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),og=pt(cg),ug=y({},Qn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=pt(ug),dg=y({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),fg=pt(dg),mg=y({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),hg=pt(mg),xg=y({},Qn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gg=pt(xg),pg=y({},ts,{newState:0,oldState:0}),bg=pt(pg),yg=[9,13,27,32],ql=ca&&"CompositionEvent"in window,jr=null;ca&&"documentMode"in document&&(jr=document.documentMode);var vg=ca&&"TextEvent"in window&&!jr,hd=ca&&(!ql||jr&&8<jr&&11>=jr),xd=" ",gd=!1;function pd(e,t){switch(e){case"keyup":return yg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ts=!1;function Ng(e,t){switch(e){case"compositionend":return bd(t);case"keypress":return t.which!==32?null:(gd=!0,xd);case"textInput":return e=t.data,e===xd&&gd?null:e;default:return null}}function Sg(e,t){if(Ts)return e==="compositionend"||!ql&&pd(e,t)?(e=od(),Yn=$l=Ra=null,Ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hd&&t.locale!=="ko"?null:t.data;default:return null}}var wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wg[e.type]:t==="textarea"}function vd(e,t,s,l){As?Cs?Cs.push(l):Cs=[l]:As=l,t=Li(t,"onChange"),0<t.length&&(s=new Kn("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var Er=null,Dr=null;function jg(e){t0(e,0)}function Zn(e){var t=yr(e);if(td(t))return e}function Nd(e,t){if(e==="change")return t}var Sd=!1;if(ca){var Hl;if(ca){var Yl="oninput"in document;if(!Yl){var wd=document.createElement("div");wd.setAttribute("oninput","return;"),Yl=typeof wd.oninput=="function"}Hl=Yl}else Hl=!1;Sd=Hl&&(!document.documentMode||9<document.documentMode)}function jd(){Er&&(Er.detachEvent("onpropertychange",Ed),Dr=Er=null)}function Ed(e){if(e.propertyName==="value"&&Zn(Dr)){var t=[];vd(t,Dr,e,Ll(e)),cd(jg,t)}}function Eg(e,t,s){e==="focusin"?(jd(),Er=t,Dr=s,Er.attachEvent("onpropertychange",Ed)):e==="focusout"&&jd()}function Dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zn(Dr)}function Rg(e,t){if(e==="click")return Zn(t)}function Ag(e,t){if(e==="input"||e==="change")return Zn(t)}function Cg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:Cg;function Rr(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var o=s[l];if(!Ze.call(t,o)||!wt(e[o],t[o]))return!1}return!0}function Dd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rd(e,t){var s=Dd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Dd(s)}}function Ad(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ad(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=qn(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=qn(e.document)}return t}function Gl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Tg=ca&&"documentMode"in document&&11>=document.documentMode,_s=null,Xl=null,Ar=null,Kl=!1;function Td(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Kl||_s==null||_s!==qn(l)||(l=_s,"selectionStart"in l&&Gl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ar&&Rr(Ar,l)||(Ar=l,l=Li(Xl,"onSelect"),0<l.length&&(t=new Kn("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=_s)))}function as(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Ms={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionrun:as("Transition","TransitionRun"),transitionstart:as("Transition","TransitionStart"),transitioncancel:as("Transition","TransitionCancel"),transitionend:as("Transition","TransitionEnd")},Ql={},_d={};ca&&(_d=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function ss(e){if(Ql[e])return Ql[e];if(!Ms[e])return e;var t=Ms[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in _d)return Ql[e]=t[s];return e}var Md=ss("animationend"),Od=ss("animationiteration"),Id=ss("animationstart"),_g=ss("transitionrun"),Mg=ss("transitionstart"),Og=ss("transitioncancel"),Ud=ss("transitionend"),Ld=new Map,Zl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zl.push("scrollEnd");function Gt(e,t){Ld.set(e,t),es(t,[e])}var kd=new WeakMap;function kt(e,t){if(typeof e=="object"&&e!==null){var s=kd.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Wu(t)},kd.set(e,t),t)}return{value:e,source:t,stack:Wu(t)}}var Vt=[],Os=0,Jl=0;function Jn(){for(var e=Os,t=Jl=Os=0;t<e;){var s=Vt[t];Vt[t++]=null;var l=Vt[t];Vt[t++]=null;var o=Vt[t];Vt[t++]=null;var d=Vt[t];if(Vt[t++]=null,l!==null&&o!==null){var p=l.pending;p===null?o.next=o:(o.next=p.next,p.next=o),l.pending=o}d!==0&&Vd(s,o,d)}}function Wn(e,t,s,l){Vt[Os++]=e,Vt[Os++]=t,Vt[Os++]=s,Vt[Os++]=l,Jl|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Wl(e,t,s,l){return Wn(e,t,s,l),ei(e)}function Is(e,t){return Wn(e,null,null,t),ei(e)}function Vd(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var o=!1,d=e.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(o=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,o&&t!==null&&(o=31-St(s),e=d.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=s|536870912),d):null}function ei(e){if(50<Wr)throw Wr=0,no=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Us={};function Ig(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,s,l){return new Ig(e,t,s,l)}function ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oa(e,t){var s=e.alternate;return s===null?(s=jt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function $d(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ti(e,t,s,l,o,d){var p=0;if(l=e,typeof e=="function")ec(e)&&(p=1);else if(typeof e=="string")p=Lp(e,s,Z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ee:return e=jt(31,s,t,o),e.elementType=ee,e.lanes=d,e;case N:return rs(s.children,o,d,t);case E:p=8,o|=24;break;case A:return e=jt(12,s,t,o|2),e.elementType=A,e.lanes=d,e;case K:return e=jt(13,s,t,o),e.elementType=K,e.lanes=d,e;case ne:return e=jt(19,s,t,o),e.elementType=ne,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:case J:p=10;break e;case L:p=9;break e;case B:p=11;break e;case he:p=14;break e;case ie:p=16,l=null;break e}p=29,s=Error(i(130,e===null?"null":typeof e,"")),l=null}return t=jt(p,s,t,o),t.elementType=e,t.type=l,t.lanes=d,t}function rs(e,t,s,l){return e=jt(7,e,l,t),e.lanes=s,e}function tc(e,t,s){return e=jt(6,e,null,t),e.lanes=s,e}function ac(e,t,s){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ls=[],ks=0,ai=null,si=0,$t=[],Bt=0,ns=null,ua=1,da="";function is(e,t){Ls[ks++]=si,Ls[ks++]=ai,ai=e,si=t}function Bd(e,t,s){$t[Bt++]=ua,$t[Bt++]=da,$t[Bt++]=ns,ns=e;var l=ua;e=da;var o=32-St(l)-1;l&=~(1<<o),s+=1;var d=32-St(t)+o;if(30<d){var p=o-o%5;d=(l&(1<<p)-1).toString(32),l>>=p,o-=p,ua=1<<32-St(t)+o|s<<o|l,da=d+e}else ua=1<<d|s<<o|l,da=e}function sc(e){e.return!==null&&(is(e,1),Bd(e,1,0))}function rc(e){for(;e===ai;)ai=Ls[--ks],Ls[ks]=null,si=Ls[--ks],Ls[ks]=null;for(;e===ns;)ns=$t[--Bt],$t[Bt]=null,da=$t[--Bt],$t[Bt]=null,ua=$t[--Bt],$t[Bt]=null}var ht=null,qe=null,Me=!1,ls=null,ea=!1,nc=Error(i(519));function cs(e){var t=Error(i(418,""));throw _r(kt(t,e)),nc}function Fd(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[ut]=e,t[gt]=l,s){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(s=0;s<tn.length;s++)Ee(tn[s],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),ad(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),zn(t);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),rd(t,l.value,l.defaultValue,l.children),zn(t)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||n0(t.textContent,s)?(l.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),l.onScroll!=null&&Ee("scroll",t),l.onScrollEnd!=null&&Ee("scrollend",t),l.onClick!=null&&(t.onclick=ki),t=!0):t=!1,t||cs(e)}function Pd(e){for(ht=e.return;ht;)switch(ht.tag){case 5:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:ht=ht.return}}function Cr(e){if(e!==ht)return!1;if(!Me)return Pd(e),Me=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||So(e.type,e.memoizedProps)),s=!s),s&&qe&&cs(e),Pd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(t===0){qe=Kt(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++;e=e.nextSibling}qe=null}}else t===27?(t=qe,za(e.type)?(e=Do,Do=null,qe=e):qe=t):qe=ht?Kt(e.stateNode.nextSibling):null;return!0}function Tr(){qe=ht=null,Me=!1}function zd(){var e=ls;return e!==null&&(vt===null?vt=e:vt.push.apply(vt,e),ls=null),e}function _r(e){ls===null?ls=[e]:ls.push(e)}var ic=T(null),os=null,fa=null;function Aa(e,t,s){F(ic,t._currentValue),t._currentValue=s}function ma(e){e._currentValue=ic.current,P(ic)}function lc(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function cc(e,t,s,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){var p=o.child;d=d.firstContext;e:for(;d!==null;){var v=d;d=o;for(var R=0;R<t.length;R++)if(v.context===t[R]){d.lanes|=s,v=d.alternate,v!==null&&(v.lanes|=s),lc(d.return,s,e),l||(p=null);break e}d=v.next}}else if(o.tag===18){if(p=o.return,p===null)throw Error(i(341));p.lanes|=s,d=p.alternate,d!==null&&(d.lanes|=s),lc(p,s,e),p=null}else p=o.child;if(p!==null)p.return=o;else for(p=o;p!==null;){if(p===e){p=null;break}if(o=p.sibling,o!==null){o.return=p.return,p=o;break}p=p.return}o=p}}function Mr(e,t,s,l){e=null;for(var o=t,d=!1;o!==null;){if(!d){if((o.flags&524288)!==0)d=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var p=o.alternate;if(p===null)throw Error(i(387));if(p=p.memoizedProps,p!==null){var v=o.type;wt(o.pendingProps.value,p.value)||(e!==null?e.push(v):e=[v])}}else if(o===Re.current){if(p=o.alternate,p===null)throw Error(i(387));p.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(cn):e=[cn])}o=o.return}e!==null&&cc(t,e,s,l),t.flags|=262144}function ri(e){for(e=e.firstContext;e!==null;){if(!wt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function us(e){os=e,fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function dt(e){return qd(os,e)}function ni(e,t){return os===null&&us(e),qd(e,t)}function qd(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},fa===null){if(e===null)throw Error(i(308));fa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else fa=fa.next=t;return s}var Ug=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Lg=f.unstable_scheduleCallback,kg=f.unstable_NormalPriority,Je={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oc(){return{controller:new Ug,data:new Map,refCount:0}}function Or(e){e.refCount--,e.refCount===0&&Lg(kg,function(){e.controller.abort()})}var Ir=null,uc=0,Vs=0,$s=null;function Vg(e,t){if(Ir===null){var s=Ir=[];uc=0,Vs=mo(),$s={status:"pending",value:void 0,then:function(l){s.push(l)}}}return uc++,t.then(Hd,Hd),t}function Hd(){if(--uc===0&&Ir!==null){$s!==null&&($s.status="fulfilled");var e=Ir;Ir=null,Vs=0,$s=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function $g(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(o){s.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<s.length;o++)(0,s[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<s.length;o++)(0,s[o])(void 0)}),l}var Yd=_.S;_.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Vg(e,t),Yd!==null&&Yd(e,t)};var ds=T(null);function dc(){var e=ds.current;return e!==null?e:$e.pooledCache}function ii(e,t){t===null?F(ds,ds.current):F(ds,t.pool)}function Gd(){var e=dc();return e===null?null:{parent:Je._currentValue,pool:e}}var Ur=Error(i(460)),Xd=Error(i(474)),li=Error(i(542)),fc={then:function(){}};function Kd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ci(){}function Qd(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(ci,ci),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Jd(e),e;default:if(typeof t.status=="string")t.then(ci,ci);else{if(e=$e,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Jd(e),e}throw Lr=t,Ur}}var Lr=null;function Zd(){if(Lr===null)throw Error(i(459));var e=Lr;return Lr=null,e}function Jd(e){if(e===Ur||e===li)throw Error(i(483))}var Ca=!1;function mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _a(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=ei(e),Vd(e,null,s),t}return Wn(e,l,t,s),ei(e)}function kr(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Hu(e,s)}}function xc(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var o=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var p={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?o=d=p:d=d.next=p,s=s.next}while(s!==null);d===null?o=d=t:d=d.next=t}else o=d=t;s={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var gc=!1;function Vr(){if(gc){var e=$s;if(e!==null)throw e}}function $r(e,t,s,l){gc=!1;var o=e.updateQueue;Ca=!1;var d=o.firstBaseUpdate,p=o.lastBaseUpdate,v=o.shared.pending;if(v!==null){o.shared.pending=null;var R=v,k=R.next;R.next=null,p===null?d=k:p.next=k,p=R;var q=e.alternate;q!==null&&(q=q.updateQueue,v=q.lastBaseUpdate,v!==p&&(v===null?q.firstBaseUpdate=k:v.next=k,q.lastBaseUpdate=R))}if(d!==null){var Y=o.baseState;p=0,q=k=R=null,v=d;do{var V=v.lane&-536870913,$=V!==v.lane;if($?(Ae&V)===V:(l&V)===V){V!==0&&V===Vs&&(gc=!0),q!==null&&(q=q.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var me=e,ue=v;V=t;var ke=s;switch(ue.tag){case 1:if(me=ue.payload,typeof me=="function"){Y=me.call(ke,Y,V);break e}Y=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ue.payload,V=typeof me=="function"?me.call(ke,Y,V):me,V==null)break e;Y=y({},Y,V);break e;case 2:Ca=!0}}V=v.callback,V!==null&&(e.flags|=64,$&&(e.flags|=8192),$=o.callbacks,$===null?o.callbacks=[V]:$.push(V))}else $={lane:V,tag:v.tag,payload:v.payload,callback:v.callback,next:null},q===null?(k=q=$,R=Y):q=q.next=$,p|=V;if(v=v.next,v===null){if(v=o.shared.pending,v===null)break;$=v,v=$.next,$.next=null,o.lastBaseUpdate=$,o.shared.pending=null}}while(!0);q===null&&(R=Y),o.baseState=R,o.firstBaseUpdate=k,o.lastBaseUpdate=q,d===null&&(o.shared.lanes=0),$a|=p,e.lanes=p,e.memoizedState=Y}}function Wd(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function ef(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Wd(s[e],t)}var Bs=T(null),oi=T(0);function tf(e,t){e=va,F(oi,e),F(Bs,t),va=e|t.baseLanes}function pc(){F(oi,va),F(Bs,Bs.current)}function bc(){va=oi.current,P(Bs),P(oi)}var Ma=0,Ne=null,Ue=null,Xe=null,ui=!1,Fs=!1,fs=!1,di=0,Br=0,Ps=null,Bg=0;function Ye(){throw Error(i(321))}function yc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!wt(e[s],t[s]))return!1;return!0}function vc(e,t,s,l,o,d){return Ma=d,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?$f:Bf,fs=!1,d=s(l,o),fs=!1,Fs&&(d=sf(t,s,l,o)),af(e),d}function af(e){_.H=pi;var t=Ue!==null&&Ue.next!==null;if(Ma=0,Xe=Ue=Ne=null,ui=!1,Br=0,Ps=null,t)throw Error(i(300));e===null||at||(e=e.dependencies,e!==null&&ri(e)&&(at=!0))}function sf(e,t,s,l){Ne=e;var o=0;do{if(Fs&&(Ps=null),Br=0,Fs=!1,25<=o)throw Error(i(301));if(o+=1,Xe=Ue=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}_.H=Gg,d=t(s,l)}while(Fs);return d}function Fg(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?Fr(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(Ne.flags|=1024),t}function Nc(){var e=di!==0;return di=0,e}function Sc(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function wc(e){if(ui){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ui=!1}Ma=0,Xe=Ue=Ne=null,Fs=!1,Br=di=0,Ps=null}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Ne.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Ke(){if(Ue===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Xe===null?Ne.memoizedState:Xe.next;if(t!==null)Xe=t,Ue=e;else{if(e===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Xe===null?Ne.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fr(e){var t=Br;return Br+=1,Ps===null&&(Ps=[]),e=Qd(Ps,e,t),t=Ne,(Xe===null?t.memoizedState:Xe.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?$f:Bf),e}function fi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fr(e);if(e.$$typeof===J)return dt(e)}throw Error(i(438,String(e)))}function Ec(e){var t=null,s=Ne.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=jc(),Ne.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=Ce;return t.index++,s}function ha(e,t){return typeof t=="function"?t(e):t}function mi(e){var t=Ke();return Dc(t,Ue,e)}function Dc(e,t,s){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var o=e.baseQueue,d=l.pending;if(d!==null){if(o!==null){var p=o.next;o.next=d.next,d.next=p}t.baseQueue=o=d,l.pending=null}if(d=e.baseState,o===null)e.memoizedState=d;else{t=o.next;var v=p=null,R=null,k=t,q=!1;do{var Y=k.lane&-536870913;if(Y!==k.lane?(Ae&Y)===Y:(Ma&Y)===Y){var V=k.revertLane;if(V===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),Y===Vs&&(q=!0);else if((Ma&V)===V){k=k.next,V===Vs&&(q=!0);continue}else Y={lane:0,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},R===null?(v=R=Y,p=d):R=R.next=Y,Ne.lanes|=V,$a|=V;Y=k.action,fs&&s(d,Y),d=k.hasEagerState?k.eagerState:s(d,Y)}else V={lane:Y,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},R===null?(v=R=V,p=d):R=R.next=V,Ne.lanes|=Y,$a|=Y;k=k.next}while(k!==null&&k!==t);if(R===null?p=d:R.next=v,!wt(d,e.memoizedState)&&(at=!0,q&&(s=$s,s!==null)))throw s;e.memoizedState=d,e.baseState=p,e.baseQueue=R,l.lastRenderedState=d}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Rc(e){var t=Ke(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var l=s.dispatch,o=s.pending,d=t.memoizedState;if(o!==null){s.pending=null;var p=o=o.next;do d=e(d,p.action),p=p.next;while(p!==o);wt(d,t.memoizedState)||(at=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,l]}function rf(e,t,s){var l=Ne,o=Ke(),d=Me;if(d){if(s===void 0)throw Error(i(407));s=s()}else s=t();var p=!wt((Ue||o).memoizedState,s);p&&(o.memoizedState=s,at=!0),o=o.queue;var v=cf.bind(null,l,o,e);if(Pr(2048,8,v,[e]),o.getSnapshot!==t||p||Xe!==null&&Xe.memoizedState.tag&1){if(l.flags|=2048,zs(9,hi(),lf.bind(null,l,o,s,t),null),$e===null)throw Error(i(349));d||(Ma&124)!==0||nf(l,t,s)}return s}function nf(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ne.updateQueue,t===null?(t=jc(),Ne.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function lf(e,t,s,l){t.value=s,t.getSnapshot=l,of(t)&&uf(e)}function cf(e,t,s){return s(function(){of(t)&&uf(e)})}function of(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!wt(e,s)}catch{return!0}}function uf(e){var t=Is(e,2);t!==null&&Ct(t,e,2)}function Ac(e){var t=bt();if(typeof e=="function"){var s=e;if(e=s(),fs){Ea(!0);try{s()}finally{Ea(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e},t}function df(e,t,s,l){return e.baseState=s,Dc(e,Ue,typeof l=="function"?l:ha)}function Pg(e,t,s,l,o){if(gi(e))throw Error(i(485));if(e=t.action,e!==null){var d={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){d.listeners.push(p)}};_.T!==null?s(!0):d.isTransition=!1,l(d),s=t.pending,s===null?(d.next=t.pending=d,ff(t,d)):(d.next=s.next,t.pending=s.next=d)}}function ff(e,t){var s=t.action,l=t.payload,o=e.state;if(t.isTransition){var d=_.T,p={};_.T=p;try{var v=s(o,l),R=_.S;R!==null&&R(p,v),mf(e,t,v)}catch(k){Cc(e,t,k)}finally{_.T=d}}else try{d=s(o,l),mf(e,t,d)}catch(k){Cc(e,t,k)}}function mf(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){hf(e,t,l)},function(l){return Cc(e,t,l)}):hf(e,t,s)}function hf(e,t,s){t.status="fulfilled",t.value=s,xf(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,ff(e,s)))}function Cc(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,xf(t),t=t.next;while(t!==l)}e.action=null}function xf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function gf(e,t){return t}function pf(e,t){if(Me){var s=$e.formState;if(s!==null){e:{var l=Ne;if(Me){if(qe){t:{for(var o=qe,d=ea;o.nodeType!==8;){if(!d){o=null;break t}if(o=Kt(o.nextSibling),o===null){o=null;break t}}d=o.data,o=d==="F!"||d==="F"?o:null}if(o){qe=Kt(o.nextSibling),l=o.data==="F!";break e}}cs(l)}l=!1}l&&(t=s[0])}}return s=bt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:t},s.queue=l,s=Lf.bind(null,Ne,l),l.dispatch=s,l=Ac(!1),d=Ic.bind(null,Ne,!1,l.queue),l=bt(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,s=Pg.bind(null,Ne,o,d,s),o.dispatch=s,l.memoizedState=e,[t,s,!1]}function bf(e){var t=Ke();return yf(t,Ue,e)}function yf(e,t,s){if(t=Dc(e,t,gf)[0],e=mi(ha)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Fr(t)}catch(p){throw p===Ur?li:p}else l=t;t=Ke();var o=t.queue,d=o.dispatch;return s!==t.memoizedState&&(Ne.flags|=2048,zs(9,hi(),zg.bind(null,o,s),null)),[l,d,e]}function zg(e,t){e.action=t}function vf(e){var t=Ke(),s=Ue;if(s!==null)return yf(t,s,e);Ke(),t=t.memoizedState,s=Ke();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function zs(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=Ne.updateQueue,t===null&&(t=jc(),Ne.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function hi(){return{destroy:void 0,resource:void 0}}function Nf(){return Ke().memoizedState}function xi(e,t,s,l){var o=bt();l=l===void 0?null:l,Ne.flags|=e,o.memoizedState=zs(1|t,hi(),s,l)}function Pr(e,t,s,l){var o=Ke();l=l===void 0?null:l;var d=o.memoizedState.inst;Ue!==null&&l!==null&&yc(l,Ue.memoizedState.deps)?o.memoizedState=zs(t,d,s,l):(Ne.flags|=e,o.memoizedState=zs(1|t,d,s,l))}function Sf(e,t){xi(8390656,8,e,t)}function wf(e,t){Pr(2048,8,e,t)}function jf(e,t){return Pr(4,2,e,t)}function Ef(e,t){return Pr(4,4,e,t)}function Df(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rf(e,t,s){s=s!=null?s.concat([e]):null,Pr(4,4,Df.bind(null,t,e),s)}function Tc(){}function Af(e,t){var s=Ke();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&yc(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function Cf(e,t){var s=Ke();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&yc(t,l[1]))return l[0];if(l=e(),fs){Ea(!0);try{e()}finally{Ea(!1)}}return s.memoizedState=[l,t],l}function _c(e,t,s){return s===void 0||(Ma&1073741824)!==0?e.memoizedState=t:(e.memoizedState=s,e=Mm(),Ne.lanes|=e,$a|=e,s)}function Tf(e,t,s,l){return wt(s,t)?s:Bs.current!==null?(e=_c(e,s,l),wt(e,t)||(at=!0),e):(Ma&42)===0?(at=!0,e.memoizedState=s):(e=Mm(),Ne.lanes|=e,$a|=e,t)}function _f(e,t,s,l,o){var d=j.p;j.p=d!==0&&8>d?d:8;var p=_.T,v={};_.T=v,Ic(e,!1,t,s);try{var R=o(),k=_.S;if(k!==null&&k(v,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var q=$g(R,l);zr(e,t,q,At(e))}else zr(e,t,l,At(e))}catch(Y){zr(e,t,{then:function(){},status:"rejected",reason:Y},At())}finally{j.p=d,_.T=p}}function qg(){}function Mc(e,t,s,l){if(e.tag!==5)throw Error(i(476));var o=Mf(e).queue;_f(e,o,t,z,s===null?qg:function(){return Of(e),s(l)})}function Mf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:z},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Of(e){var t=Mf(e).next.queue;zr(e,t,{},At())}function Oc(){return dt(cn)}function If(){return Ke().memoizedState}function Uf(){return Ke().memoizedState}function Hg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=At();e=Ta(s);var l=_a(t,e,s);l!==null&&(Ct(l,t,s),kr(l,t,s)),t={cache:oc()},e.payload=t;return}t=t.return}}function Yg(e,t,s){var l=At();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},gi(e)?kf(t,s):(s=Wl(e,t,s,l),s!==null&&(Ct(s,e,l),Vf(s,t,l)))}function Lf(e,t,s){var l=At();zr(e,t,s,l)}function zr(e,t,s,l){var o={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(gi(e))kf(t,o);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,v=d(p,s);if(o.hasEagerState=!0,o.eagerState=v,wt(v,p))return Wn(e,t,o,0),$e===null&&Jn(),!1}catch{}finally{}if(s=Wl(e,t,o,l),s!==null)return Ct(s,e,l),Vf(s,t,l),!0}return!1}function Ic(e,t,s,l){if(l={lane:2,revertLane:mo(),action:l,hasEagerState:!1,eagerState:null,next:null},gi(e)){if(t)throw Error(i(479))}else t=Wl(e,s,l,2),t!==null&&Ct(t,e,2)}function gi(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function kf(e,t){Fs=ui=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Vf(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Hu(e,s)}}var pi={readContext:dt,use:fi,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye},$f={readContext:dt,use:fi,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:dt,useEffect:Sf,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,xi(4194308,4,Df.bind(null,t,e),s)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){xi(4,2,e,t)},useMemo:function(e,t){var s=bt();t=t===void 0?null:t;var l=e();if(fs){Ea(!0);try{e()}finally{Ea(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=bt();if(s!==void 0){var o=s(t);if(fs){Ea(!0);try{s(t)}finally{Ea(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=Yg.bind(null,Ne,e),[l.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ac(e);var t=e.queue,s=Lf.bind(null,Ne,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Tc,useDeferredValue:function(e,t){var s=bt();return _c(s,e,t)},useTransition:function(){var e=Ac(!1);return e=_f.bind(null,Ne,e.queue,!0,!1),bt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=Ne,o=bt();if(Me){if(s===void 0)throw Error(i(407));s=s()}else{if(s=t(),$e===null)throw Error(i(349));(Ae&124)!==0||nf(l,t,s)}o.memoizedState=s;var d={value:s,getSnapshot:t};return o.queue=d,Sf(cf.bind(null,l,d,e),[e]),l.flags|=2048,zs(9,hi(),lf.bind(null,l,d,s,t),null),s},useId:function(){var e=bt(),t=$e.identifierPrefix;if(Me){var s=da,l=ua;s=(l&~(1<<32-St(l)-1)).toString(32)+s,t="«"+t+"R"+s,s=di++,0<s&&(t+="H"+s.toString(32)),t+="»"}else s=Bg++,t="«"+t+"r"+s.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Oc,useFormState:pf,useActionState:pf,useOptimistic:function(e){var t=bt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Ic.bind(null,Ne,!0,s),s.dispatch=t,[e,t]},useMemoCache:Ec,useCacheRefresh:function(){return bt().memoizedState=Hg.bind(null,Ne)}},Bf={readContext:dt,use:fi,useCallback:Af,useContext:dt,useEffect:wf,useImperativeHandle:Rf,useInsertionEffect:jf,useLayoutEffect:Ef,useMemo:Cf,useReducer:mi,useRef:Nf,useState:function(){return mi(ha)},useDebugValue:Tc,useDeferredValue:function(e,t){var s=Ke();return Tf(s,Ue.memoizedState,e,t)},useTransition:function(){var e=mi(ha)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:Fr(e),t]},useSyncExternalStore:rf,useId:If,useHostTransitionStatus:Oc,useFormState:bf,useActionState:bf,useOptimistic:function(e,t){var s=Ke();return df(s,Ue,e,t)},useMemoCache:Ec,useCacheRefresh:Uf},Gg={readContext:dt,use:fi,useCallback:Af,useContext:dt,useEffect:wf,useImperativeHandle:Rf,useInsertionEffect:jf,useLayoutEffect:Ef,useMemo:Cf,useReducer:Rc,useRef:Nf,useState:function(){return Rc(ha)},useDebugValue:Tc,useDeferredValue:function(e,t){var s=Ke();return Ue===null?_c(s,e,t):Tf(s,Ue.memoizedState,e,t)},useTransition:function(){var e=Rc(ha)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:Fr(e),t]},useSyncExternalStore:rf,useId:If,useHostTransitionStatus:Oc,useFormState:vf,useActionState:vf,useOptimistic:function(e,t){var s=Ke();return Ue!==null?df(s,Ue,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Ec,useCacheRefresh:Uf},qs=null,qr=0;function bi(e){var t=qr;return qr+=1,qs===null&&(qs=[]),Qd(qs,e,t)}function Hr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yi(e,t){throw t.$$typeof===w?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ff(e){var t=e._init;return t(e._payload)}function Pf(e){function t(O,C){if(e){var U=O.deletions;U===null?(O.deletions=[C],O.flags|=16):U.push(C)}}function s(O,C){if(!e)return null;for(;C!==null;)t(O,C),C=C.sibling;return null}function l(O){for(var C=new Map;O!==null;)O.key!==null?C.set(O.key,O):C.set(O.index,O),O=O.sibling;return C}function o(O,C){return O=oa(O,C),O.index=0,O.sibling=null,O}function d(O,C,U){return O.index=U,e?(U=O.alternate,U!==null?(U=U.index,U<C?(O.flags|=67108866,C):U):(O.flags|=67108866,C)):(O.flags|=1048576,C)}function p(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function v(O,C,U,H){return C===null||C.tag!==6?(C=tc(U,O.mode,H),C.return=O,C):(C=o(C,U),C.return=O,C)}function R(O,C,U,H){var re=U.type;return re===N?q(O,C,U.props.children,H,U.key):C!==null&&(C.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ie&&Ff(re)===C.type)?(C=o(C,U.props),Hr(C,U),C.return=O,C):(C=ti(U.type,U.key,U.props,null,O.mode,H),Hr(C,U),C.return=O,C)}function k(O,C,U,H){return C===null||C.tag!==4||C.stateNode.containerInfo!==U.containerInfo||C.stateNode.implementation!==U.implementation?(C=ac(U,O.mode,H),C.return=O,C):(C=o(C,U.children||[]),C.return=O,C)}function q(O,C,U,H,re){return C===null||C.tag!==7?(C=rs(U,O.mode,H,re),C.return=O,C):(C=o(C,U),C.return=O,C)}function Y(O,C,U){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=tc(""+C,O.mode,U),C.return=O,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case D:return U=ti(C.type,C.key,C.props,null,O.mode,U),Hr(U,C),U.return=O,U;case b:return C=ac(C,O.mode,U),C.return=O,C;case ie:var H=C._init;return C=H(C._payload),Y(O,C,U)}if(I(C)||ve(C))return C=rs(C,O.mode,U,null),C.return=O,C;if(typeof C.then=="function")return Y(O,bi(C),U);if(C.$$typeof===J)return Y(O,ni(O,C),U);yi(O,C)}return null}function V(O,C,U,H){var re=C!==null?C.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return re!==null?null:v(O,C,""+U,H);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return U.key===re?R(O,C,U,H):null;case b:return U.key===re?k(O,C,U,H):null;case ie:return re=U._init,U=re(U._payload),V(O,C,U,H)}if(I(U)||ve(U))return re!==null?null:q(O,C,U,H,null);if(typeof U.then=="function")return V(O,C,bi(U),H);if(U.$$typeof===J)return V(O,C,ni(O,U),H);yi(O,U)}return null}function $(O,C,U,H,re){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return O=O.get(U)||null,v(C,O,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case D:return O=O.get(H.key===null?U:H.key)||null,R(C,O,H,re);case b:return O=O.get(H.key===null?U:H.key)||null,k(C,O,H,re);case ie:var we=H._init;return H=we(H._payload),$(O,C,U,H,re)}if(I(H)||ve(H))return O=O.get(U)||null,q(C,O,H,re,null);if(typeof H.then=="function")return $(O,C,U,bi(H),re);if(H.$$typeof===J)return $(O,C,U,ni(C,H),re);yi(C,H)}return null}function me(O,C,U,H){for(var re=null,we=null,ce=C,de=C=0,rt=null;ce!==null&&de<U.length;de++){ce.index>de?(rt=ce,ce=null):rt=ce.sibling;var Te=V(O,ce,U[de],H);if(Te===null){ce===null&&(ce=rt);break}e&&ce&&Te.alternate===null&&t(O,ce),C=d(Te,C,de),we===null?re=Te:we.sibling=Te,we=Te,ce=rt}if(de===U.length)return s(O,ce),Me&&is(O,de),re;if(ce===null){for(;de<U.length;de++)ce=Y(O,U[de],H),ce!==null&&(C=d(ce,C,de),we===null?re=ce:we.sibling=ce,we=ce);return Me&&is(O,de),re}for(ce=l(ce);de<U.length;de++)rt=$(ce,O,de,U[de],H),rt!==null&&(e&&rt.alternate!==null&&ce.delete(rt.key===null?de:rt.key),C=d(rt,C,de),we===null?re=rt:we.sibling=rt,we=rt);return e&&ce.forEach(function(Xa){return t(O,Xa)}),Me&&is(O,de),re}function ue(O,C,U,H){if(U==null)throw Error(i(151));for(var re=null,we=null,ce=C,de=C=0,rt=null,Te=U.next();ce!==null&&!Te.done;de++,Te=U.next()){ce.index>de?(rt=ce,ce=null):rt=ce.sibling;var Xa=V(O,ce,Te.value,H);if(Xa===null){ce===null&&(ce=rt);break}e&&ce&&Xa.alternate===null&&t(O,ce),C=d(Xa,C,de),we===null?re=Xa:we.sibling=Xa,we=Xa,ce=rt}if(Te.done)return s(O,ce),Me&&is(O,de),re;if(ce===null){for(;!Te.done;de++,Te=U.next())Te=Y(O,Te.value,H),Te!==null&&(C=d(Te,C,de),we===null?re=Te:we.sibling=Te,we=Te);return Me&&is(O,de),re}for(ce=l(ce);!Te.done;de++,Te=U.next())Te=$(ce,O,de,Te.value,H),Te!==null&&(e&&Te.alternate!==null&&ce.delete(Te.key===null?de:Te.key),C=d(Te,C,de),we===null?re=Te:we.sibling=Te,we=Te);return e&&ce.forEach(function(Xp){return t(O,Xp)}),Me&&is(O,de),re}function ke(O,C,U,H){if(typeof U=="object"&&U!==null&&U.type===N&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case D:e:{for(var re=U.key;C!==null;){if(C.key===re){if(re=U.type,re===N){if(C.tag===7){s(O,C.sibling),H=o(C,U.props.children),H.return=O,O=H;break e}}else if(C.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ie&&Ff(re)===C.type){s(O,C.sibling),H=o(C,U.props),Hr(H,U),H.return=O,O=H;break e}s(O,C);break}else t(O,C);C=C.sibling}U.type===N?(H=rs(U.props.children,O.mode,H,U.key),H.return=O,O=H):(H=ti(U.type,U.key,U.props,null,O.mode,H),Hr(H,U),H.return=O,O=H)}return p(O);case b:e:{for(re=U.key;C!==null;){if(C.key===re)if(C.tag===4&&C.stateNode.containerInfo===U.containerInfo&&C.stateNode.implementation===U.implementation){s(O,C.sibling),H=o(C,U.children||[]),H.return=O,O=H;break e}else{s(O,C);break}else t(O,C);C=C.sibling}H=ac(U,O.mode,H),H.return=O,O=H}return p(O);case ie:return re=U._init,U=re(U._payload),ke(O,C,U,H)}if(I(U))return me(O,C,U,H);if(ve(U)){if(re=ve(U),typeof re!="function")throw Error(i(150));return U=re.call(U),ue(O,C,U,H)}if(typeof U.then=="function")return ke(O,C,bi(U),H);if(U.$$typeof===J)return ke(O,C,ni(O,U),H);yi(O,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,C!==null&&C.tag===6?(s(O,C.sibling),H=o(C,U),H.return=O,O=H):(s(O,C),H=tc(U,O.mode,H),H.return=O,O=H),p(O)):s(O,C)}return function(O,C,U,H){try{qr=0;var re=ke(O,C,U,H);return qs=null,re}catch(ce){if(ce===Ur||ce===li)throw ce;var we=jt(29,ce,null,O.mode);return we.lanes=H,we.return=O,we}finally{}}}var Hs=Pf(!0),zf=Pf(!1),Ft=T(null),ta=null;function Oa(e){var t=e.alternate;F(We,We.current&1),F(Ft,e),ta===null&&(t===null||Bs.current!==null||t.memoizedState!==null)&&(ta=e)}function qf(e){if(e.tag===22){if(F(We,We.current),F(Ft,e),ta===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ta=e)}}else Ia()}function Ia(){F(We,We.current),F(Ft,Ft.current)}function xa(e){P(Ft),ta===e&&(ta=null),P(We)}var We=T(0);function vi(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Eo(s)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Uc(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:y({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Lc={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=At(),o=Ta(l);o.payload=t,s!=null&&(o.callback=s),t=_a(e,o,l),t!==null&&(Ct(t,e,l),kr(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=At(),o=Ta(l);o.tag=1,o.payload=t,s!=null&&(o.callback=s),t=_a(e,o,l),t!==null&&(Ct(t,e,l),kr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=At(),l=Ta(s);l.tag=2,t!=null&&(l.callback=t),t=_a(e,l,s),t!==null&&(Ct(t,e,s),kr(t,e,s))}};function Hf(e,t,s,l,o,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,p):t.prototype&&t.prototype.isPureReactComponent?!Rr(s,l)||!Rr(o,d):!0}function Yf(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&Lc.enqueueReplaceState(t,t.state,null)}function ms(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=y({},s));for(var o in e)s[o]===void 0&&(s[o]=e[o])}return s}var Ni=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Gf(e){Ni(e)}function Xf(e){console.error(e)}function Kf(e){Ni(e)}function Si(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Qf(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function kc(e,t,s){return s=Ta(s),s.tag=3,s.payload={element:null},s.callback=function(){Si(e,t)},s}function Zf(e){return e=Ta(e),e.tag=3,e}function Jf(e,t,s,l){var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var d=l.value;e.payload=function(){return o(d)},e.callback=function(){Qf(t,s,l)}}var p=s.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Qf(t,s,l),typeof o!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function Xg(e,t,s,l,o){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Mr(t,s,o,!0),s=Ft.current,s!==null){switch(s.tag){case 13:return ta===null?lo():s.alternate===null&&He===0&&(He=3),s.flags&=-257,s.flags|=65536,s.lanes=o,l===fc?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),oo(e,l,o)),!1;case 22:return s.flags|=65536,l===fc?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),oo(e,l,o)),!1}throw Error(i(435,s.tag))}return oo(e,l,o),lo(),!1}if(Me)return t=Ft.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==nc&&(e=Error(i(422),{cause:l}),_r(kt(e,s)))):(l!==nc&&(t=Error(i(423),{cause:l}),_r(kt(t,s))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=kt(l,s),o=kc(e.stateNode,l,o),xc(e,o),He!==4&&(He=2)),!1;var d=Error(i(520),{cause:l});if(d=kt(d,s),Jr===null?Jr=[d]:Jr.push(d),He!==4&&(He=2),t===null)return!0;l=kt(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=o&-o,s.lanes|=e,e=kc(s.stateNode,l,e),xc(s,e),!1;case 1:if(t=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ba===null||!Ba.has(d))))return s.flags|=65536,o&=-o,s.lanes|=o,o=Zf(o),Jf(o,e,s,l),xc(s,o),!1}s=s.return}while(s!==null);return!1}var Wf=Error(i(461)),at=!1;function it(e,t,s,l){t.child=e===null?zf(t,null,s,l):Hs(t,e.child,s,l)}function em(e,t,s,l,o){s=s.render;var d=t.ref;if("ref"in l){var p={};for(var v in l)v!=="ref"&&(p[v]=l[v])}else p=l;return us(t),l=vc(e,t,s,p,d,o),v=Nc(),e!==null&&!at?(Sc(e,t,o),ga(e,t,o)):(Me&&v&&sc(t),t.flags|=1,it(e,t,l,o),t.child)}function tm(e,t,s,l,o){if(e===null){var d=s.type;return typeof d=="function"&&!ec(d)&&d.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=d,am(e,t,d,l,o)):(e=ti(s.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Hc(e,o)){var p=d.memoizedProps;if(s=s.compare,s=s!==null?s:Rr,s(p,l)&&e.ref===t.ref)return ga(e,t,o)}return t.flags|=1,e=oa(d,l),e.ref=t.ref,e.return=t,t.child=e}function am(e,t,s,l,o){if(e!==null){var d=e.memoizedProps;if(Rr(d,l)&&e.ref===t.ref)if(at=!1,t.pendingProps=l=d,Hc(e,o))(e.flags&131072)!==0&&(at=!0);else return t.lanes=e.lanes,ga(e,t,o)}return Vc(e,t,s,l,o)}function sm(e,t,s){var l=t.pendingProps,o=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=d!==null?d.baseLanes|s:s,e!==null){for(o=t.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;t.childLanes=d&~l}else t.childLanes=0,t.child=null;return rm(e,t,l,s)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ii(t,d!==null?d.cachePool:null),d!==null?tf(t,d):pc(),qf(t);else return t.lanes=t.childLanes=536870912,rm(e,t,d!==null?d.baseLanes|s:s,s)}else d!==null?(ii(t,d.cachePool),tf(t,d),Ia(),t.memoizedState=null):(e!==null&&ii(t,null),pc(),Ia());return it(e,t,o,s),t.child}function rm(e,t,s,l){var o=dc();return o=o===null?null:{parent:Je._currentValue,pool:o},t.memoizedState={baseLanes:s,cachePool:o},e!==null&&ii(t,null),pc(),qf(t),e!==null&&Mr(e,t,l,!0),null}function wi(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Vc(e,t,s,l,o){return us(t),s=vc(e,t,s,l,void 0,o),l=Nc(),e!==null&&!at?(Sc(e,t,o),ga(e,t,o)):(Me&&l&&sc(t),t.flags|=1,it(e,t,s,o),t.child)}function nm(e,t,s,l,o,d){return us(t),t.updateQueue=null,s=sf(t,l,s,o),af(e),l=Nc(),e!==null&&!at?(Sc(e,t,d),ga(e,t,d)):(Me&&l&&sc(t),t.flags|=1,it(e,t,s,d),t.child)}function im(e,t,s,l,o){if(us(t),t.stateNode===null){var d=Us,p=s.contextType;typeof p=="object"&&p!==null&&(d=dt(p)),d=new s(l,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Lc,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=l,d.state=t.memoizedState,d.refs={},mc(t),p=s.contextType,d.context=typeof p=="object"&&p!==null?dt(p):Us,d.state=t.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Uc(t,s,p,l),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(p=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),p!==d.state&&Lc.enqueueReplaceState(d,d.state,null),$r(t,l,d,o),Vr(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){d=t.stateNode;var v=t.memoizedProps,R=ms(s,v);d.props=R;var k=d.context,q=s.contextType;p=Us,typeof q=="object"&&q!==null&&(p=dt(q));var Y=s.getDerivedStateFromProps;q=typeof Y=="function"||typeof d.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v||k!==p)&&Yf(t,d,l,p),Ca=!1;var V=t.memoizedState;d.state=V,$r(t,l,d,o),Vr(),k=t.memoizedState,v||V!==k||Ca?(typeof Y=="function"&&(Uc(t,s,Y,l),k=t.memoizedState),(R=Ca||Hf(t,s,R,l,V,k,p))?(q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=k),d.props=l,d.state=k,d.context=p,l=R):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{d=t.stateNode,hc(e,t),p=t.memoizedProps,q=ms(s,p),d.props=q,Y=t.pendingProps,V=d.context,k=s.contextType,R=Us,typeof k=="object"&&k!==null&&(R=dt(k)),v=s.getDerivedStateFromProps,(k=typeof v=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==Y||V!==R)&&Yf(t,d,l,R),Ca=!1,V=t.memoizedState,d.state=V,$r(t,l,d,o),Vr();var $=t.memoizedState;p!==Y||V!==$||Ca||e!==null&&e.dependencies!==null&&ri(e.dependencies)?(typeof v=="function"&&(Uc(t,s,v,l),$=t.memoizedState),(q=Ca||Hf(t,s,q,l,V,$,R)||e!==null&&e.dependencies!==null&&ri(e.dependencies))?(k||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,R)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=$),d.props=l,d.state=$,d.context=R,l=q):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),l=!1)}return d=l,wi(e,t),l=(t.flags&128)!==0,d||l?(d=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&l?(t.child=Hs(t,e.child,null,o),t.child=Hs(t,null,s,o)):it(e,t,s,o),t.memoizedState=d.state,e=t.child):e=ga(e,t,o),e}function lm(e,t,s,l){return Tr(),t.flags|=256,it(e,t,s,l),t.child}var $c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bc(e){return{baseLanes:e,cachePool:Gd()}}function Fc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Pt),e}function cm(e,t,s){var l=t.pendingProps,o=!1,d=(t.flags&128)!==0,p;if((p=d)||(p=e!==null&&e.memoizedState===null?!1:(We.current&2)!==0),p&&(o=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(o?Oa(t):Ia(),Me){var v=qe,R;if(R=v){e:{for(R=v,v=ea;R.nodeType!==8;){if(!v){v=null;break e}if(R=Kt(R.nextSibling),R===null){v=null;break e}}v=R}v!==null?(t.memoizedState={dehydrated:v,treeContext:ns!==null?{id:ua,overflow:da}:null,retryLane:536870912,hydrationErrors:null},R=jt(18,null,null,0),R.stateNode=v,R.return=t,t.child=R,ht=t,qe=null,R=!0):R=!1}R||cs(t)}if(v=t.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return Eo(v)?t.lanes=32:t.lanes=536870912,null;xa(t)}return v=l.children,l=l.fallback,o?(Ia(),o=t.mode,v=ji({mode:"hidden",children:v},o),l=rs(l,o,s,null),v.return=t,l.return=t,v.sibling=l,t.child=v,o=t.child,o.memoizedState=Bc(s),o.childLanes=Fc(e,p,s),t.memoizedState=$c,l):(Oa(t),Pc(t,v))}if(R=e.memoizedState,R!==null&&(v=R.dehydrated,v!==null)){if(d)t.flags&256?(Oa(t),t.flags&=-257,t=zc(e,t,s)):t.memoizedState!==null?(Ia(),t.child=e.child,t.flags|=128,t=null):(Ia(),o=l.fallback,v=t.mode,l=ji({mode:"visible",children:l.children},v),o=rs(o,v,s,null),o.flags|=2,l.return=t,o.return=t,l.sibling=o,t.child=l,Hs(t,e.child,null,s),l=t.child,l.memoizedState=Bc(s),l.childLanes=Fc(e,p,s),t.memoizedState=$c,t=o);else if(Oa(t),Eo(v)){if(p=v.nextSibling&&v.nextSibling.dataset,p)var k=p.dgst;p=k,l=Error(i(419)),l.stack="",l.digest=p,_r({value:l,source:null,stack:null}),t=zc(e,t,s)}else if(at||Mr(e,t,s,!1),p=(s&e.childLanes)!==0,at||p){if(p=$e,p!==null&&(l=s&-s,l=(l&42)!==0?1:El(l),l=(l&(p.suspendedLanes|s))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,Is(e,l),Ct(p,e,l),Wf;v.data==="$?"||lo(),t=zc(e,t,s)}else v.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,qe=Kt(v.nextSibling),ht=t,Me=!0,ls=null,ea=!1,e!==null&&($t[Bt++]=ua,$t[Bt++]=da,$t[Bt++]=ns,ua=e.id,da=e.overflow,ns=t),t=Pc(t,l.children),t.flags|=4096);return t}return o?(Ia(),o=l.fallback,v=t.mode,R=e.child,k=R.sibling,l=oa(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,k!==null?o=oa(k,o):(o=rs(o,v,s,null),o.flags|=2),o.return=t,l.return=t,l.sibling=o,t.child=l,l=o,o=t.child,v=e.child.memoizedState,v===null?v=Bc(s):(R=v.cachePool,R!==null?(k=Je._currentValue,R=R.parent!==k?{parent:k,pool:k}:R):R=Gd(),v={baseLanes:v.baseLanes|s,cachePool:R}),o.memoizedState=v,o.childLanes=Fc(e,p,s),t.memoizedState=$c,l):(Oa(t),s=e.child,e=s.sibling,s=oa(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=s,t.memoizedState=null,s)}function Pc(e,t){return t=ji({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ji(e,t){return e=jt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function zc(e,t,s){return Hs(t,e.child,null,s),e=Pc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function om(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),lc(e.return,t,s)}function qc(e,t,s,l,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:o}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=o)}function um(e,t,s){var l=t.pendingProps,o=l.revealOrder,d=l.tail;if(it(e,t,l.children,s),l=We.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&om(e,s,t);else if(e.tag===19)om(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(F(We,l),o){case"forwards":for(s=t.child,o=null;s!==null;)e=s.alternate,e!==null&&vi(e)===null&&(o=s),s=s.sibling;s=o,s===null?(o=t.child,t.child=null):(o=s.sibling,s.sibling=null),qc(t,!1,o,s,d);break;case"backwards":for(s=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&vi(e)===null){t.child=o;break}e=o.sibling,o.sibling=s,s=o,o=e}qc(t,!0,s,null,d);break;case"together":qc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ga(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),$a|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Mr(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,s=oa(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=oa(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Hc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ri(e)))}function Kg(e,t,s){switch(t.tag){case 3:xe(t,t.stateNode.containerInfo),Aa(t,Je,e.memoizedState.cache),Tr();break;case 27:case 5:ge(t);break;case 4:xe(t,t.stateNode.containerInfo);break;case 10:Aa(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Oa(t),t.flags|=128,null):(s&t.child.childLanes)!==0?cm(e,t,s):(Oa(t),e=ga(e,t,s),e!==null?e.sibling:null);Oa(t);break;case 19:var o=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Mr(e,t,s,!1),l=(s&t.childLanes)!==0),o){if(l)return um(e,t,s);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),F(We,We.current),l)break;return null;case 22:case 23:return t.lanes=0,sm(e,t,s);case 24:Aa(t,Je,e.memoizedState.cache)}return ga(e,t,s)}function dm(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)at=!0;else{if(!Hc(e,s)&&(t.flags&128)===0)return at=!1,Kg(e,t,s);at=(e.flags&131072)!==0}else at=!1,Me&&(t.flags&1048576)!==0&&Bd(t,si,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,o=l._init;if(l=o(l._payload),t.type=l,typeof l=="function")ec(l)?(e=ms(l,e),t.tag=1,t=im(null,t,l,e,s)):(t.tag=0,t=Vc(null,t,l,e,s));else{if(l!=null){if(o=l.$$typeof,o===B){t.tag=11,t=em(null,t,l,e,s);break e}else if(o===he){t.tag=14,t=tm(null,t,l,e,s);break e}}throw t=fe(l)||l,Error(i(306,t,""))}}return t;case 0:return Vc(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,o=ms(l,t.pendingProps),im(e,t,l,o,s);case 3:e:{if(xe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));l=t.pendingProps;var d=t.memoizedState;o=d.element,hc(e,t),$r(t,l,null,s);var p=t.memoizedState;if(l=p.cache,Aa(t,Je,l),l!==d.cache&&cc(t,[Je],s,!0),Vr(),l=p.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=lm(e,t,l,s);break e}else if(l!==o){o=kt(Error(i(424)),t),_r(o),t=lm(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qe=Kt(e.firstChild),ht=t,Me=!0,ls=null,ea=!0,s=zf(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Tr(),l===o){t=ga(e,t,s);break e}it(e,t,l,s)}t=t.child}return t;case 26:return wi(e,t),e===null?(s=x0(t.type,null,t.pendingProps,null))?t.memoizedState=s:Me||(s=t.type,e=t.pendingProps,l=Vi(ae.current).createElement(s),l[ut]=t,l[gt]=e,ct(l,s,e),tt(l),t.stateNode=l):t.memoizedState=x0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ge(t),e===null&&Me&&(l=t.stateNode=f0(t.type,t.pendingProps,ae.current),ht=t,ea=!0,o=qe,za(t.type)?(Do=o,qe=Kt(l.firstChild)):qe=o),it(e,t,t.pendingProps.children,s),wi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((o=l=qe)&&(l=wp(l,t.type,t.pendingProps,ea),l!==null?(t.stateNode=l,ht=t,qe=Kt(l.firstChild),ea=!1,o=!0):o=!1),o||cs(t)),ge(t),o=t.type,d=t.pendingProps,p=e!==null?e.memoizedProps:null,l=d.children,So(o,d)?l=null:p!==null&&So(o,p)&&(t.flags|=32),t.memoizedState!==null&&(o=vc(e,t,Fg,null,null,s),cn._currentValue=o),wi(e,t),it(e,t,l,s),t.child;case 6:return e===null&&Me&&((e=s=qe)&&(s=jp(s,t.pendingProps,ea),s!==null?(t.stateNode=s,ht=t,qe=null,e=!0):e=!1),e||cs(t)),null;case 13:return cm(e,t,s);case 4:return xe(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Hs(t,null,l,s):it(e,t,l,s),t.child;case 11:return em(e,t,t.type,t.pendingProps,s);case 7:return it(e,t,t.pendingProps,s),t.child;case 8:return it(e,t,t.pendingProps.children,s),t.child;case 12:return it(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,Aa(t,t.type,l.value),it(e,t,l.children,s),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,us(t),o=dt(o),l=l(o),t.flags|=1,it(e,t,l,s),t.child;case 14:return tm(e,t,t.type,t.pendingProps,s);case 15:return am(e,t,t.type,t.pendingProps,s);case 19:return um(e,t,s);case 31:return l=t.pendingProps,s=t.mode,l={mode:l.mode,children:l.children},e===null?(s=ji(l,s),s.ref=t.ref,t.child=s,s.return=t,t=s):(s=oa(e.child,l),s.ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return sm(e,t,s);case 24:return us(t),l=dt(Je),e===null?(o=dc(),o===null&&(o=$e,d=oc(),o.pooledCache=d,d.refCount++,d!==null&&(o.pooledCacheLanes|=s),o=d),t.memoizedState={parent:l,cache:o},mc(t),Aa(t,Je,o)):((e.lanes&s)!==0&&(hc(e,t),$r(t,null,null,s),Vr()),o=e.memoizedState,d=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Aa(t,Je,l)):(l=d.cache,Aa(t,Je,l),l!==o.cache&&cc(t,[Je],s,!0))),it(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function pa(e){e.flags|=4}function fm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!v0(t)){if(t=Ft.current,t!==null&&((Ae&4194048)===Ae?ta!==null:(Ae&62914560)!==Ae&&(Ae&536870912)===0||t!==ta))throw Lr=fc,Xd;e.flags|=8192}}function Ei(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?zu():536870912,e.lanes|=t,Ks|=t)}function Yr(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Pe(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var o=e.child;o!==null;)s|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)s|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function Qg(e,t,s){var l=t.pendingProps;switch(rc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(t),null;case 1:return Pe(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ma(Je),oe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Cr(t)?pa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,zd())),Pe(t),null;case 26:return s=t.memoizedState,e===null?(pa(t),s!==null?(Pe(t),fm(t,s)):(Pe(t),t.flags&=-16777217)):s?s!==e.memoizedState?(pa(t),Pe(t),fm(t,s)):(Pe(t),t.flags&=-16777217):(e.memoizedProps!==l&&pa(t),Pe(t),t.flags&=-16777217),null;case 27:_e(t),s=ae.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Pe(t),null}e=Z.current,Cr(t)?Fd(t):(e=f0(o,l,s),t.stateNode=e,pa(t))}return Pe(t),null;case 5:if(_e(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Pe(t),null}if(e=Z.current,Cr(t))Fd(t);else{switch(o=Vi(ae.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?o.createElement("select",{is:l.is}):o.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?o.createElement(s,{is:l.is}):o.createElement(s)}}e[ut]=t,e[gt]=l;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(ct(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&pa(t)}}return Pe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(e=ae.current,Cr(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,o=ht,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[ut]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||n0(e.nodeValue,s)),e||cs(t)}else e=Vi(e).createTextNode(l),e[ut]=t,t.stateNode=e}return Pe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Cr(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(i(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[ut]=t}else Tr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Pe(t),o=!1}else o=zd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(xa(t),t):(xa(t),null)}if(xa(t),(t.flags&128)!==0)return t.lanes=s,t;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==o&&(l.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),Ei(t,t.updateQueue),Pe(t),null;case 4:return oe(),e===null&&po(t.stateNode.containerInfo),Pe(t),null;case 10:return ma(t.type),Pe(t),null;case 19:if(P(We),o=t.memoizedState,o===null)return Pe(t),null;if(l=(t.flags&128)!==0,d=o.rendering,d===null)if(l)Yr(o,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=vi(e),d!==null){for(t.flags|=128,Yr(o,!1),e=d.updateQueue,t.updateQueue=e,Ei(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)$d(s,e),s=s.sibling;return F(We,We.current&1|2),t.child}e=e.sibling}o.tail!==null&&It()>Ai&&(t.flags|=128,l=!0,Yr(o,!1),t.lanes=4194304)}else{if(!l)if(e=vi(d),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Ei(t,e),Yr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Me)return Pe(t),null}else 2*It()-o.renderingStartTime>Ai&&s!==536870912&&(t.flags|=128,l=!0,Yr(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(e=o.last,e!==null?e.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=It(),t.sibling=null,e=We.current,F(We,l?e&1|2:e&1),t):(Pe(t),null);case 22:case 23:return xa(t),bc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(Pe(t),t.subtreeFlags&6&&(t.flags|=8192)):Pe(t),s=t.updateQueue,s!==null&&Ei(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&P(ds),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ma(Je),Pe(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Zg(e,t){switch(rc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ma(Je),oe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return _e(t),null;case 13:if(xa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Tr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return P(We),null;case 4:return oe(),null;case 10:return ma(t.type),null;case 22:case 23:return xa(t),bc(),e!==null&&P(ds),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ma(Je),null;case 25:return null;default:return null}}function mm(e,t){switch(rc(t),t.tag){case 3:ma(Je),oe();break;case 26:case 27:case 5:_e(t);break;case 4:oe();break;case 13:xa(t);break;case 19:P(We);break;case 10:ma(t.type);break;case 22:case 23:xa(t),bc(),e!==null&&P(ds);break;case 24:ma(Je)}}function Gr(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var o=l.next;s=o;do{if((s.tag&e)===e){l=void 0;var d=s.create,p=s.inst;l=d(),p.destroy=l}s=s.next}while(s!==o)}}catch(v){Ve(t,t.return,v)}}function Ua(e,t,s){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var d=o.next;l=d;do{if((l.tag&e)===e){var p=l.inst,v=p.destroy;if(v!==void 0){p.destroy=void 0,o=t;var R=s,k=v;try{k()}catch(q){Ve(o,R,q)}}}l=l.next}while(l!==d)}}catch(q){Ve(t,t.return,q)}}function hm(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{ef(t,s)}catch(l){Ve(e,e.return,l)}}}function xm(e,t,s){s.props=ms(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Ve(e,t,l)}}function Xr(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(o){Ve(e,t,o)}}function aa(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(o){Ve(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(o){Ve(e,t,o)}else s.current=null}function gm(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(o){Ve(e,e.return,o)}}function Yc(e,t,s){try{var l=e.stateNode;bp(l,e.type,s,t),l[gt]=t}catch(o){Ve(e,e.return,o)}}function pm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&za(e.type)||e.tag===4}function Gc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ki));else if(l!==4&&(l===27&&za(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Xc(e,t,s),e=e.sibling;e!==null;)Xc(e,t,s),e=e.sibling}function Di(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&za(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Di(e,t,s),e=e.sibling;e!==null;)Di(e,t,s),e=e.sibling}function bm(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ct(t,l,s),t[ut]=e,t[gt]=s}catch(d){Ve(e,e.return,d)}}var ba=!1,Ge=!1,Kc=!1,ym=typeof WeakSet=="function"?WeakSet:Set,st=null;function Jg(e,t){if(e=e.containerInfo,vo=qi,e=Cd(e),Gl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var o=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var p=0,v=-1,R=-1,k=0,q=0,Y=e,V=null;t:for(;;){for(var $;Y!==s||o!==0&&Y.nodeType!==3||(v=p+o),Y!==d||l!==0&&Y.nodeType!==3||(R=p+l),Y.nodeType===3&&(p+=Y.nodeValue.length),($=Y.firstChild)!==null;)V=Y,Y=$;for(;;){if(Y===e)break t;if(V===s&&++k===o&&(v=p),V===d&&++q===l&&(R=p),($=Y.nextSibling)!==null)break;Y=V,V=Y.parentNode}Y=$}s=v===-1||R===-1?null:{start:v,end:R}}else s=null}s=s||{start:0,end:0}}else s=null;for(No={focusedElem:e,selectionRange:s},qi=!1,st=t;st!==null;)if(t=st,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,st=e;else for(;st!==null;){switch(t=st,d=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=t,o=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var me=ms(s.type,o,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(me,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(ue){Ve(s,s.return,ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)jo(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,st=e;break}st=t.return}}function vm(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:La(e,s),l&4&&Gr(5,s);break;case 1:if(La(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(p){Ve(s,s.return,p)}else{var o=ms(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Ve(s,s.return,p)}}l&64&&hm(s),l&512&&Xr(s,s.return);break;case 3:if(La(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{ef(e,t)}catch(p){Ve(s,s.return,p)}}break;case 27:t===null&&l&4&&bm(s);case 26:case 5:La(e,s),t===null&&l&4&&gm(s),l&512&&Xr(s,s.return);break;case 12:La(e,s);break;case 13:La(e,s),l&4&&wm(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=lp.bind(null,s),Ep(e,s))));break;case 22:if(l=s.memoizedState!==null||ba,!l){t=t!==null&&t.memoizedState!==null||Ge,o=ba;var d=Ge;ba=l,(Ge=t)&&!d?ka(e,s,(s.subtreeFlags&8772)!==0):La(e,s),ba=o,Ge=d}break;case 30:break;default:La(e,s)}}function Nm(e){var t=e.alternate;t!==null&&(e.alternate=null,Nm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Al(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Be=null,yt=!1;function ya(e,t,s){for(s=s.child;s!==null;)Sm(e,t,s),s=s.sibling}function Sm(e,t,s){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(xr,s)}catch{}switch(s.tag){case 26:Ge||aa(s,t),ya(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ge||aa(s,t);var l=Be,o=yt;za(s.type)&&(Be=s.stateNode,yt=!1),ya(e,t,s),sn(s.stateNode),Be=l,yt=o;break;case 5:Ge||aa(s,t);case 6:if(l=Be,o=yt,Be=null,ya(e,t,s),Be=l,yt=o,Be!==null)if(yt)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(s.stateNode)}catch(d){Ve(s,t,d)}else try{Be.removeChild(s.stateNode)}catch(d){Ve(s,t,d)}break;case 18:Be!==null&&(yt?(e=Be,u0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),fn(e)):u0(Be,s.stateNode));break;case 4:l=Be,o=yt,Be=s.stateNode.containerInfo,yt=!0,ya(e,t,s),Be=l,yt=o;break;case 0:case 11:case 14:case 15:Ge||Ua(2,s,t),Ge||Ua(4,s,t),ya(e,t,s);break;case 1:Ge||(aa(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&xm(s,t,l)),ya(e,t,s);break;case 21:ya(e,t,s);break;case 22:Ge=(l=Ge)||s.memoizedState!==null,ya(e,t,s),Ge=l;break;default:ya(e,t,s)}}function wm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fn(e)}catch(s){Ve(t,t.return,s)}}function Wg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ym),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ym),t;default:throw Error(i(435,e.tag))}}function Qc(e,t){var s=Wg(e);t.forEach(function(l){var o=cp.bind(null,e,l);s.has(l)||(s.add(l),l.then(o,o))})}function Et(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var o=s[l],d=e,p=t,v=p;e:for(;v!==null;){switch(v.tag){case 27:if(za(v.type)){Be=v.stateNode,yt=!1;break e}break;case 5:Be=v.stateNode,yt=!1;break e;case 3:case 4:Be=v.stateNode.containerInfo,yt=!0;break e}v=v.return}if(Be===null)throw Error(i(160));Sm(d,p,o),Be=null,yt=!1,d=o.alternate,d!==null&&(d.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)jm(t,e),t=t.sibling}var Xt=null;function jm(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Et(t,e),Dt(e),l&4&&(Ua(3,e,e.return),Gr(3,e),Ua(5,e,e.return));break;case 1:Et(t,e),Dt(e),l&512&&(Ge||s===null||aa(s,s.return)),l&64&&ba&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var o=Xt;if(Et(t,e),Dt(e),l&512&&(Ge||s===null||aa(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":d=o.getElementsByTagName("title")[0],(!d||d[br]||d[ut]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=o.createElement(l),o.head.insertBefore(d,o.querySelector("head > title"))),ct(d,l,s),d[ut]=e,tt(d),l=d;break e;case"link":var p=b0("link","href",o).get(l+(s.href||""));if(p){for(var v=0;v<p.length;v++)if(d=p[v],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){p.splice(v,1);break t}}d=o.createElement(l),ct(d,l,s),o.head.appendChild(d);break;case"meta":if(p=b0("meta","content",o).get(l+(s.content||""))){for(v=0;v<p.length;v++)if(d=p[v],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){p.splice(v,1);break t}}d=o.createElement(l),ct(d,l,s),o.head.appendChild(d);break;default:throw Error(i(468,l))}d[ut]=e,tt(d),l=d}e.stateNode=l}else y0(o,e.type,e.stateNode);else e.stateNode=p0(o,l,e.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?y0(o,e.type,e.stateNode):p0(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Yc(e,e.memoizedProps,s.memoizedProps)}break;case 27:Et(t,e),Dt(e),l&512&&(Ge||s===null||aa(s,s.return)),s!==null&&l&4&&Yc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Et(t,e),Dt(e),l&512&&(Ge||s===null||aa(s,s.return)),e.flags&32){o=e.stateNode;try{Rs(o,"")}catch($){Ve(e,e.return,$)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,Yc(e,o,s!==null?s.memoizedProps:o)),l&1024&&(Kc=!0);break;case 6:if(Et(t,e),Dt(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch($){Ve(e,e.return,$)}}break;case 3:if(Fi=null,o=Xt,Xt=$i(t.containerInfo),Et(t,e),Xt=o,Dt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{fn(t.containerInfo)}catch($){Ve(e,e.return,$)}Kc&&(Kc=!1,Em(e));break;case 4:l=Xt,Xt=$i(e.stateNode.containerInfo),Et(t,e),Dt(e),Xt=l;break;case 12:Et(t,e),Dt(e);break;case 13:Et(t,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ao=It()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Qc(e,l)));break;case 22:o=e.memoizedState!==null;var R=s!==null&&s.memoizedState!==null,k=ba,q=Ge;if(ba=k||o,Ge=q||R,Et(t,e),Ge=q,ba=k,Dt(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(s===null||R||ba||Ge||hs(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){R=s=t;try{if(d=R.stateNode,o)p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{v=R.stateNode;var Y=R.memoizedProps.style,V=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;v.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch($){Ve(R,R.return,$)}}}else if(t.tag===6){if(s===null){R=t;try{R.stateNode.nodeValue=o?"":R.memoizedProps}catch($){Ve(R,R.return,$)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Qc(e,s))));break;case 19:Et(t,e),Dt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Qc(e,l)));break;case 30:break;case 21:break;default:Et(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(pm(l)){s=l;break}l=l.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var o=s.stateNode,d=Gc(e);Di(e,d,o);break;case 5:var p=s.stateNode;s.flags&32&&(Rs(p,""),s.flags&=-33);var v=Gc(e);Di(e,v,p);break;case 3:case 4:var R=s.stateNode.containerInfo,k=Gc(e);Xc(e,k,R);break;default:throw Error(i(161))}}catch(q){Ve(e,e.return,q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Em(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Em(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function La(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vm(e,t.alternate,t),t=t.sibling}function hs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ua(4,t,t.return),hs(t);break;case 1:aa(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&xm(t,t.return,s),hs(t);break;case 27:sn(t.stateNode);case 26:case 5:aa(t,t.return),hs(t);break;case 22:t.memoizedState===null&&hs(t);break;case 30:hs(t);break;default:hs(t)}e=e.sibling}}function ka(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,d=t,p=d.flags;switch(d.tag){case 0:case 11:case 15:ka(o,d,s),Gr(4,d);break;case 1:if(ka(o,d,s),l=d,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(k){Ve(l,l.return,k)}if(l=d,o=l.updateQueue,o!==null){var v=l.stateNode;try{var R=o.shared.hiddenCallbacks;if(R!==null)for(o.shared.hiddenCallbacks=null,o=0;o<R.length;o++)Wd(R[o],v)}catch(k){Ve(l,l.return,k)}}s&&p&64&&hm(d),Xr(d,d.return);break;case 27:bm(d);case 26:case 5:ka(o,d,s),s&&l===null&&p&4&&gm(d),Xr(d,d.return);break;case 12:ka(o,d,s);break;case 13:ka(o,d,s),s&&p&4&&wm(o,d);break;case 22:d.memoizedState===null&&ka(o,d,s),Xr(d,d.return);break;case 30:break;default:ka(o,d,s)}t=t.sibling}}function Zc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Or(s))}function Jc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Or(e))}function sa(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Dm(e,t,s,l),t=t.sibling}function Dm(e,t,s,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:sa(e,t,s,l),o&2048&&Gr(9,t);break;case 1:sa(e,t,s,l);break;case 3:sa(e,t,s,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Or(e)));break;case 12:if(o&2048){sa(e,t,s,l),e=t.stateNode;try{var d=t.memoizedProps,p=d.id,v=d.onPostCommit;typeof v=="function"&&v(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Ve(t,t.return,R)}}else sa(e,t,s,l);break;case 13:sa(e,t,s,l);break;case 23:break;case 22:d=t.stateNode,p=t.alternate,t.memoizedState!==null?d._visibility&2?sa(e,t,s,l):Kr(e,t):d._visibility&2?sa(e,t,s,l):(d._visibility|=2,Ys(e,t,s,l,(t.subtreeFlags&10256)!==0)),o&2048&&Zc(p,t);break;case 24:sa(e,t,s,l),o&2048&&Jc(t.alternate,t);break;default:sa(e,t,s,l)}}function Ys(e,t,s,l,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var d=e,p=t,v=s,R=l,k=p.flags;switch(p.tag){case 0:case 11:case 15:Ys(d,p,v,R,o),Gr(8,p);break;case 23:break;case 22:var q=p.stateNode;p.memoizedState!==null?q._visibility&2?Ys(d,p,v,R,o):Kr(d,p):(q._visibility|=2,Ys(d,p,v,R,o)),o&&k&2048&&Zc(p.alternate,p);break;case 24:Ys(d,p,v,R,o),o&&k&2048&&Jc(p.alternate,p);break;default:Ys(d,p,v,R,o)}t=t.sibling}}function Kr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,o=l.flags;switch(l.tag){case 22:Kr(s,l),o&2048&&Zc(l.alternate,l);break;case 24:Kr(s,l),o&2048&&Jc(l.alternate,l);break;default:Kr(s,l)}t=t.sibling}}var Qr=8192;function Gs(e){if(e.subtreeFlags&Qr)for(e=e.child;e!==null;)Rm(e),e=e.sibling}function Rm(e){switch(e.tag){case 26:Gs(e),e.flags&Qr&&e.memoizedState!==null&&Vp(Xt,e.memoizedState,e.memoizedProps);break;case 5:Gs(e);break;case 3:case 4:var t=Xt;Xt=$i(e.stateNode.containerInfo),Gs(e),Xt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Qr,Qr=16777216,Gs(e),Qr=t):Gs(e));break;default:Gs(e)}}function Am(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];st=l,Tm(l,e)}Am(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cm(e),e=e.sibling}function Cm(e){switch(e.tag){case 0:case 11:case 15:Zr(e),e.flags&2048&&Ua(9,e,e.return);break;case 3:Zr(e);break;case 12:Zr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ri(e)):Zr(e);break;default:Zr(e)}}function Ri(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];st=l,Tm(l,e)}Am(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ua(8,t,t.return),Ri(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Ri(t));break;default:Ri(t)}e=e.sibling}}function Tm(e,t){for(;st!==null;){var s=st;switch(s.tag){case 0:case 11:case 15:Ua(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Or(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,st=l;else e:for(s=e;st!==null;){l=st;var o=l.sibling,d=l.return;if(Nm(l),l===s){st=null;break e}if(o!==null){o.return=d,st=o;break e}st=d}}}var ep={getCacheForType:function(e){var t=dt(Je),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s}},tp=typeof WeakMap=="function"?WeakMap:Map,Oe=0,$e=null,je=null,Ae=0,Ie=0,Rt=null,Va=!1,Xs=!1,Wc=!1,va=0,He=0,$a=0,xs=0,eo=0,Pt=0,Ks=0,Jr=null,vt=null,to=!1,ao=0,Ai=1/0,Ci=null,Ba=null,lt=0,Fa=null,Qs=null,Zs=0,so=0,ro=null,_m=null,Wr=0,no=null;function At(){if((Oe&2)!==0&&Ae!==0)return Ae&-Ae;if(_.T!==null){var e=Vs;return e!==0?e:mo()}return Yu()}function Mm(){Pt===0&&(Pt=(Ae&536870912)===0||Me?Pu():536870912);var e=Ft.current;return e!==null&&(e.flags|=32),Pt}function Ct(e,t,s){(e===$e&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&(Js(e,0),Pa(e,Ae,Pt,!1)),pr(e,s),((Oe&2)===0||e!==$e)&&(e===$e&&((Oe&2)===0&&(xs|=s),He===4&&Pa(e,Ae,Pt,!1)),ra(e))}function Om(e,t,s){if((Oe&6)!==0)throw Error(i(327));var l=!s&&(t&124)===0&&(t&e.expiredLanes)===0||gr(e,t),o=l?rp(e,t):co(e,t,!0),d=l;do{if(o===0){Xs&&!l&&Pa(e,t,0,!1);break}else{if(s=e.current.alternate,d&&!ap(s)){o=co(e,t,!1),d=!1;continue}if(o===2){if(d=t,e.errorRecoveryDisabledLanes&d)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var v=e;o=Jr;var R=v.current.memoizedState.isDehydrated;if(R&&(Js(v,p).flags|=256),p=co(v,p,!1),p!==2){if(Wc&&!R){v.errorRecoveryDisabledLanes|=d,xs|=d,o=4;break e}d=vt,vt=o,d!==null&&(vt===null?vt=d:vt.push.apply(vt,d))}o=p}if(d=!1,o!==2)continue}}if(o===1){Js(e,0),Pa(e,t,0,!0);break}e:{switch(l=e,d=o,d){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Pa(l,t,Pt,!Va);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(o=ao+300-It(),10<o)){if(Pa(l,t,Pt,!Va),Bn(l,0,!0)!==0)break e;l.timeoutHandle=c0(Im.bind(null,l,s,vt,Ci,to,t,Pt,xs,Ks,Va,d,2,-0,0),o);break e}Im(l,s,vt,Ci,to,t,Pt,xs,Ks,Va,d,0,-0,0)}}break}while(!0);ra(e)}function Im(e,t,s,l,o,d,p,v,R,k,q,Y,V,$){if(e.timeoutHandle=-1,Y=t.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(ln={stylesheets:null,count:0,unsuspend:kp},Rm(t),Y=$p(),Y!==null)){e.cancelPendingCommit=Y(Fm.bind(null,e,t,d,s,l,o,p,v,R,q,1,V,$)),Pa(e,d,p,!k);return}Fm(e,t,d,s,l,o,p,v,R)}function ap(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var o=s[l],d=o.getSnapshot;o=o.value;try{if(!wt(d(),o))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pa(e,t,s,l){t&=~eo,t&=~xs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var d=31-St(o),p=1<<d;l[d]=-1,o&=~p}s!==0&&qu(e,s,t)}function Ti(){return(Oe&6)===0?(en(0),!1):!0}function io(){if(je!==null){if(Ie===0)var e=je.return;else e=je,fa=os=null,wc(e),qs=null,qr=0,e=je;for(;e!==null;)mm(e.alternate,e),e=e.return;je=null}}function Js(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,vp(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),io(),$e=e,je=s=oa(e.current,null),Ae=t,Ie=0,Rt=null,Va=!1,Xs=gr(e,t),Wc=!1,Ks=Pt=eo=xs=$a=He=0,vt=Jr=null,to=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-St(l),d=1<<o;t|=e[o],l&=~d}return va=t,Jn(),s}function Um(e,t){Ne=null,_.H=pi,t===Ur||t===li?(t=Zd(),Ie=3):t===Xd?(t=Zd(),Ie=4):Ie=t===Wf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rt=t,je===null&&(He=1,Si(e,kt(t,e.current)))}function Lm(){var e=_.H;return _.H=pi,e===null?pi:e}function km(){var e=_.A;return _.A=ep,e}function lo(){He=4,Va||(Ae&4194048)!==Ae&&Ft.current!==null||(Xs=!0),($a&134217727)===0&&(xs&134217727)===0||$e===null||Pa($e,Ae,Pt,!1)}function co(e,t,s){var l=Oe;Oe|=2;var o=Lm(),d=km();($e!==e||Ae!==t)&&(Ci=null,Js(e,t)),t=!1;var p=He;e:do try{if(Ie!==0&&je!==null){var v=je,R=Rt;switch(Ie){case 8:io(),p=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(t=!0);var k=Ie;if(Ie=0,Rt=null,Ws(e,v,R,k),s&&Xs){p=0;break e}break;default:k=Ie,Ie=0,Rt=null,Ws(e,v,R,k)}}sp(),p=He;break}catch(q){Um(e,q)}while(!0);return t&&e.shellSuspendCounter++,fa=os=null,Oe=l,_.H=o,_.A=d,je===null&&($e=null,Ae=0,Jn()),p}function sp(){for(;je!==null;)Vm(je)}function rp(e,t){var s=Oe;Oe|=2;var l=Lm(),o=km();$e!==e||Ae!==t?(Ci=null,Ai=It()+500,Js(e,t)):Xs=gr(e,t);e:do try{if(Ie!==0&&je!==null){t=je;var d=Rt;t:switch(Ie){case 1:Ie=0,Rt=null,Ws(e,t,d,1);break;case 2:case 9:if(Kd(d)){Ie=0,Rt=null,$m(t);break}t=function(){Ie!==2&&Ie!==9||$e!==e||(Ie=7),ra(e)},d.then(t,t);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Kd(d)?(Ie=0,Rt=null,$m(t)):(Ie=0,Rt=null,Ws(e,t,d,7));break;case 5:var p=null;switch(je.tag){case 26:p=je.memoizedState;case 5:case 27:var v=je;if(!p||v0(p)){Ie=0,Rt=null;var R=v.sibling;if(R!==null)je=R;else{var k=v.return;k!==null?(je=k,_i(k)):je=null}break t}}Ie=0,Rt=null,Ws(e,t,d,5);break;case 6:Ie=0,Rt=null,Ws(e,t,d,6);break;case 8:io(),He=6;break e;default:throw Error(i(462))}}np();break}catch(q){Um(e,q)}while(!0);return fa=os=null,_.H=l,_.A=o,Oe=s,je!==null?0:($e=null,Ae=0,Jn(),He)}function np(){for(;je!==null&&!Vu();)Vm(je)}function Vm(e){var t=dm(e.alternate,e,va);e.memoizedProps=e.pendingProps,t===null?_i(e):je=t}function $m(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=nm(s,t,t.pendingProps,t.type,void 0,Ae);break;case 11:t=nm(s,t,t.pendingProps,t.type.render,t.ref,Ae);break;case 5:wc(t);default:mm(s,t),t=je=$d(t,va),t=dm(s,t,va)}e.memoizedProps=e.pendingProps,t===null?_i(e):je=t}function Ws(e,t,s,l){fa=os=null,wc(t),qs=null,qr=0;var o=t.return;try{if(Xg(e,o,t,s,Ae)){He=1,Si(e,kt(s,e.current)),je=null;return}}catch(d){if(o!==null)throw je=o,d;He=1,Si(e,kt(s,e.current)),je=null;return}t.flags&32768?(Me||l===1?e=!0:Xs||(Ae&536870912)!==0?e=!1:(Va=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ft.current,l!==null&&l.tag===13&&(l.flags|=16384))),Bm(t,e)):_i(t)}function _i(e){var t=e;do{if((t.flags&32768)!==0){Bm(t,Va);return}e=t.return;var s=Qg(t.alternate,t,va);if(s!==null){je=s;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);He===0&&(He=5)}function Bm(e,t){do{var s=Zg(e.alternate,e);if(s!==null){s.flags&=32767,je=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=s}while(e!==null);He=6,je=null}function Fm(e,t,s,l,o,d,p,v,R){e.cancelPendingCommit=null;do Mi();while(lt!==0);if((Oe&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(d=t.lanes|t.childLanes,d|=Jl,kx(e,s,d,p,v,R),e===$e&&(je=$e=null,Ae=0),Qs=t,Fa=e,Zs=s,so=d,ro=o,_m=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,op(kn,function(){return Ym(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,o=j.p,j.p=2,p=Oe,Oe|=4;try{Jg(e,t,s)}finally{Oe=p,j.p=o,_.T=l}}lt=1,Pm(),zm(),qm()}}function Pm(){if(lt===1){lt=0;var e=Fa,t=Qs,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=_.T,_.T=null;var l=j.p;j.p=2;var o=Oe;Oe|=4;try{jm(t,e);var d=No,p=Cd(e.containerInfo),v=d.focusedElem,R=d.selectionRange;if(p!==v&&v&&v.ownerDocument&&Ad(v.ownerDocument.documentElement,v)){if(R!==null&&Gl(v)){var k=R.start,q=R.end;if(q===void 0&&(q=k),"selectionStart"in v)v.selectionStart=k,v.selectionEnd=Math.min(q,v.value.length);else{var Y=v.ownerDocument||document,V=Y&&Y.defaultView||window;if(V.getSelection){var $=V.getSelection(),me=v.textContent.length,ue=Math.min(R.start,me),ke=R.end===void 0?ue:Math.min(R.end,me);!$.extend&&ue>ke&&(p=ke,ke=ue,ue=p);var O=Rd(v,ue),C=Rd(v,ke);if(O&&C&&($.rangeCount!==1||$.anchorNode!==O.node||$.anchorOffset!==O.offset||$.focusNode!==C.node||$.focusOffset!==C.offset)){var U=Y.createRange();U.setStart(O.node,O.offset),$.removeAllRanges(),ue>ke?($.addRange(U),$.extend(C.node,C.offset)):(U.setEnd(C.node,C.offset),$.addRange(U))}}}}for(Y=[],$=v;$=$.parentNode;)$.nodeType===1&&Y.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Y.length;v++){var H=Y[v];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}qi=!!vo,No=vo=null}finally{Oe=o,j.p=l,_.T=s}}e.current=t,lt=2}}function zm(){if(lt===2){lt=0;var e=Fa,t=Qs,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=_.T,_.T=null;var l=j.p;j.p=2;var o=Oe;Oe|=4;try{vm(e,t.alternate,t)}finally{Oe=o,j.p=l,_.T=s}}lt=3}}function qm(){if(lt===4||lt===3){lt=0,hr();var e=Fa,t=Qs,s=Zs,l=_m;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?lt=5:(lt=0,Qs=Fa=null,Hm(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Ba=null),Dl(s),t=t.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(xr,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=_.T,o=j.p,j.p=2,_.T=null;try{for(var d=e.onRecoverableError,p=0;p<l.length;p++){var v=l[p];d(v.value,{componentStack:v.stack})}}finally{_.T=t,j.p=o}}(Zs&3)!==0&&Mi(),ra(e),o=e.pendingLanes,(s&4194090)!==0&&(o&42)!==0?e===no?Wr++:(Wr=0,no=e):Wr=0,en(0)}}function Hm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Or(t)))}function Mi(e){return Pm(),zm(),qm(),Ym()}function Ym(){if(lt!==5)return!1;var e=Fa,t=so;so=0;var s=Dl(Zs),l=_.T,o=j.p;try{j.p=32>s?32:s,_.T=null,s=ro,ro=null;var d=Fa,p=Zs;if(lt=0,Qs=Fa=null,Zs=0,(Oe&6)!==0)throw Error(i(331));var v=Oe;if(Oe|=4,Cm(d.current),Dm(d,d.current,p,s),Oe=v,en(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(xr,d)}catch{}return!0}finally{j.p=o,_.T=l,Hm(e,t)}}function Gm(e,t,s){t=kt(s,t),t=kc(e.stateNode,t,2),e=_a(e,t,2),e!==null&&(pr(e,2),ra(e))}function Ve(e,t,s){if(e.tag===3)Gm(e,e,s);else for(;t!==null;){if(t.tag===3){Gm(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ba===null||!Ba.has(l))){e=kt(s,e),s=Zf(2),l=_a(t,s,2),l!==null&&(Jf(s,l,t,e),pr(l,2),ra(l));break}}t=t.return}}function oo(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new tp;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(s)||(Wc=!0,o.add(s),e=ip.bind(null,e,t,s),t.then(e,e))}function ip(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,$e===e&&(Ae&s)===s&&(He===4||He===3&&(Ae&62914560)===Ae&&300>It()-ao?(Oe&2)===0&&Js(e,0):eo|=s,Ks===Ae&&(Ks=0)),ra(e)}function Xm(e,t){t===0&&(t=zu()),e=Is(e,t),e!==null&&(pr(e,t),ra(e))}function lp(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Xm(e,s)}function cp(e,t){var s=0;switch(e.tag){case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(s=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(t),Xm(e,s)}function op(e,t){return be(e,t)}var Oi=null,er=null,uo=!1,Ii=!1,fo=!1,gs=0;function ra(e){e!==er&&e.next===null&&(er===null?Oi=er=e:er=er.next=e),Ii=!0,uo||(uo=!0,dp())}function en(e,t){if(!fo&&Ii){fo=!0;do for(var s=!1,l=Oi;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var d=0;else{var p=l.suspendedLanes,v=l.pingedLanes;d=(1<<31-St(42|e)+1)-1,d&=o&~(p&~v),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,Jm(l,d))}else d=Ae,d=Bn(l,l===$e?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||gr(l,d)||(s=!0,Jm(l,d));l=l.next}while(s);fo=!1}}function up(){Km()}function Km(){Ii=uo=!1;var e=0;gs!==0&&(yp()&&(e=gs),gs=0);for(var t=It(),s=null,l=Oi;l!==null;){var o=l.next,d=Qm(l,t);d===0?(l.next=null,s===null?Oi=o:s.next=o,o===null&&(er=s)):(s=l,(e!==0||(d&3)!==0)&&(Ii=!0)),l=o}en(e)}function Qm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var p=31-St(d),v=1<<p,R=o[p];R===-1?((v&s)===0||(v&l)!==0)&&(o[p]=Lx(v,t)):R<=t&&(e.expiredLanes|=v),d&=~v}if(t=$e,s=Ae,s=Bn(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&et(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||gr(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&et(l),Dl(s)){case 2:case 8:s=Bu;break;case 32:s=kn;break;case 268435456:s=Fu;break;default:s=kn}return l=Zm.bind(null,e),s=be(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&et(l),e.callbackPriority=2,e.callbackNode=null,2}function Zm(e,t){if(lt!==0&&lt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Mi()&&e.callbackNode!==s)return null;var l=Ae;return l=Bn(e,e===$e?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Om(e,l,t),Qm(e,It()),e.callbackNode!=null&&e.callbackNode===s?Zm.bind(null,e):null)}function Jm(e,t){if(Mi())return null;Om(e,t,!0)}function dp(){Np(function(){(Oe&6)!==0?be($u,up):Km()})}function mo(){return gs===0&&(gs=Pu()),gs}function Wm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Hn(""+e)}function e0(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function fp(e,t,s,l,o){if(t==="submit"&&s&&s.stateNode===o){var d=Wm((o[gt]||null).action),p=l.submitter;p&&(t=(t=p[gt]||null)?Wm(t.formAction):p.getAttribute("formAction"),t!==null&&(d=t,p=null));var v=new Kn("action","action",null,l,o);e.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(gs!==0){var R=p?e0(o,p):new FormData(o);Mc(s,{pending:!0,data:R,method:o.method,action:d},null,R)}}else typeof d=="function"&&(v.preventDefault(),R=p?e0(o,p):new FormData(o),Mc(s,{pending:!0,data:R,method:o.method,action:d},d,R))},currentTarget:o}]})}}for(var ho=0;ho<Zl.length;ho++){var xo=Zl[ho],mp=xo.toLowerCase(),hp=xo[0].toUpperCase()+xo.slice(1);Gt(mp,"on"+hp)}Gt(Md,"onAnimationEnd"),Gt(Od,"onAnimationIteration"),Gt(Id,"onAnimationStart"),Gt("dblclick","onDoubleClick"),Gt("focusin","onFocus"),Gt("focusout","onBlur"),Gt(_g,"onTransitionRun"),Gt(Mg,"onTransitionStart"),Gt(Og,"onTransitionCancel"),Gt(Ud,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tn));function t0(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],o=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var p=l.length-1;0<=p;p--){var v=l[p],R=v.instance,k=v.currentTarget;if(v=v.listener,R!==d&&o.isPropagationStopped())break e;d=v,o.currentTarget=k;try{d(o)}catch(q){Ni(q)}o.currentTarget=null,d=R}else for(p=0;p<l.length;p++){if(v=l[p],R=v.instance,k=v.currentTarget,v=v.listener,R!==d&&o.isPropagationStopped())break e;d=v,o.currentTarget=k;try{d(o)}catch(q){Ni(q)}o.currentTarget=null,d=R}}}}function Ee(e,t){var s=t[Rl];s===void 0&&(s=t[Rl]=new Set);var l=e+"__bubble";s.has(l)||(a0(t,e,2,!1),s.add(l))}function go(e,t,s){var l=0;t&&(l|=4),a0(s,e,l,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function po(e){if(!e[Ui]){e[Ui]=!0,Xu.forEach(function(s){s!=="selectionchange"&&(xp.has(s)||go(s,!1,e),go(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ui]||(t[Ui]=!0,go("selectionchange",!1,t))}}function a0(e,t,s,l){switch(D0(t)){case 2:var o=Pp;break;case 8:o=zp;break;default:o=_o}s=o.bind(null,t,s,e),o=void 0,!Vl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,s,{capture:!0,passive:o}):e.addEventListener(t,s,!0):o!==void 0?e.addEventListener(t,s,{passive:o}):e.addEventListener(t,s,!1)}function bo(e,t,s,l,o){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var v=l.stateNode.containerInfo;if(v===o)break;if(p===4)for(p=l.return;p!==null;){var R=p.tag;if((R===3||R===4)&&p.stateNode.containerInfo===o)return;p=p.return}for(;v!==null;){if(p=Ns(v),p===null)return;if(R=p.tag,R===5||R===6||R===26||R===27){l=d=p;continue e}v=v.parentNode}}l=l.return}cd(function(){var k=d,q=Ll(s),Y=[];e:{var V=Ld.get(e);if(V!==void 0){var $=Kn,me=e;switch(e){case"keypress":if(Gn(s)===0)break e;case"keydown":case"keyup":$=og;break;case"focusin":me="focus",$=Pl;break;case"focusout":me="blur",$=Pl;break;case"beforeblur":case"afterblur":$=Pl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Zx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=fg;break;case Md:case Od:case Id:$=eg;break;case Ud:$=hg;break;case"scroll":case"scrollend":$=Kx;break;case"wheel":$=gg;break;case"copy":case"cut":case"paste":$=ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=md;break;case"toggle":case"beforetoggle":$=bg}var ue=(t&4)!==0,ke=!ue&&(e==="scroll"||e==="scrollend"),O=ue?V!==null?V+"Capture":null:V;ue=[];for(var C=k,U;C!==null;){var H=C;if(U=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||U===null||O===null||(H=vr(C,O),H!=null&&ue.push(an(C,H,U))),ke)break;C=C.return}0<ue.length&&(V=new $(V,me,null,s,q),Y.push({event:V,listeners:ue}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",V&&s!==Ul&&(me=s.relatedTarget||s.fromElement)&&(Ns(me)||me[vs]))break e;if(($||V)&&(V=q.window===q?q:(V=q.ownerDocument)?V.defaultView||V.parentWindow:window,$?(me=s.relatedTarget||s.toElement,$=k,me=me?Ns(me):null,me!==null&&(ke=u(me),ue=me.tag,me!==ke||ue!==5&&ue!==27&&ue!==6)&&(me=null)):($=null,me=k),$!==me)){if(ue=dd,H="onMouseLeave",O="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(ue=md,H="onPointerLeave",O="onPointerEnter",C="pointer"),ke=$==null?V:yr($),U=me==null?V:yr(me),V=new ue(H,C+"leave",$,s,q),V.target=ke,V.relatedTarget=U,H=null,Ns(q)===k&&(ue=new ue(O,C+"enter",me,s,q),ue.target=U,ue.relatedTarget=ke,H=ue),ke=H,$&&me)t:{for(ue=$,O=me,C=0,U=ue;U;U=tr(U))C++;for(U=0,H=O;H;H=tr(H))U++;for(;0<C-U;)ue=tr(ue),C--;for(;0<U-C;)O=tr(O),U--;for(;C--;){if(ue===O||O!==null&&ue===O.alternate)break t;ue=tr(ue),O=tr(O)}ue=null}else ue=null;$!==null&&s0(Y,V,$,ue,!1),me!==null&&ke!==null&&s0(Y,ke,me,ue,!0)}}e:{if(V=k?yr(k):window,$=V.nodeName&&V.nodeName.toLowerCase(),$==="select"||$==="input"&&V.type==="file")var re=Nd;else if(yd(V))if(Sd)re=Ag;else{re=Dg;var we=Eg}else $=V.nodeName,!$||$.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?k&&Il(k.elementType)&&(re=Nd):re=Rg;if(re&&(re=re(e,k))){vd(Y,re,s,q);break e}we&&we(e,V,k),e==="focusout"&&k&&V.type==="number"&&k.memoizedProps.value!=null&&Ol(V,"number",V.value)}switch(we=k?yr(k):window,e){case"focusin":(yd(we)||we.contentEditable==="true")&&(_s=we,Xl=k,Ar=null);break;case"focusout":Ar=Xl=_s=null;break;case"mousedown":Kl=!0;break;case"contextmenu":case"mouseup":case"dragend":Kl=!1,Td(Y,s,q);break;case"selectionchange":if(Tg)break;case"keydown":case"keyup":Td(Y,s,q)}var ce;if(ql)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Ts?pd(e,s)&&(de="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(de="onCompositionStart");de&&(hd&&s.locale!=="ko"&&(Ts||de!=="onCompositionStart"?de==="onCompositionEnd"&&Ts&&(ce=od()):(Ra=q,$l="value"in Ra?Ra.value:Ra.textContent,Ts=!0)),we=Li(k,de),0<we.length&&(de=new fd(de,e,null,s,q),Y.push({event:de,listeners:we}),ce?de.data=ce:(ce=bd(s),ce!==null&&(de.data=ce)))),(ce=vg?Ng(e,s):Sg(e,s))&&(de=Li(k,"onBeforeInput"),0<de.length&&(we=new fd("onBeforeInput","beforeinput",null,s,q),Y.push({event:we,listeners:de}),we.data=ce)),fp(Y,e,k,s,q)}t0(Y,t)})}function an(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Li(e,t){for(var s=t+"Capture",l=[];e!==null;){var o=e,d=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||d===null||(o=vr(e,s),o!=null&&l.unshift(an(e,o,d)),o=vr(e,t),o!=null&&l.push(an(e,o,d))),e.tag===3)return l;e=e.return}return[]}function tr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function s0(e,t,s,l,o){for(var d=t._reactName,p=[];s!==null&&s!==l;){var v=s,R=v.alternate,k=v.stateNode;if(v=v.tag,R!==null&&R===l)break;v!==5&&v!==26&&v!==27||k===null||(R=k,o?(k=vr(s,d),k!=null&&p.unshift(an(s,k,R))):o||(k=vr(s,d),k!=null&&p.push(an(s,k,R)))),s=s.return}p.length!==0&&e.push({event:t,listeners:p})}var gp=/\r\n?/g,pp=/\u0000|\uFFFD/g;function r0(e){return(typeof e=="string"?e:""+e).replace(gp,`
`).replace(pp,"")}function n0(e,t){return t=r0(t),r0(e)===t}function ki(){}function Le(e,t,s,l,o,d){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Rs(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Rs(e,""+l);break;case"className":Pn(e,"class",l);break;case"tabIndex":Pn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Pn(e,s,l);break;case"style":id(e,l,d);break;case"data":if(t!=="object"){Pn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Hn(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(t!=="input"&&Le(e,t,"name",o.name,o,null),Le(e,t,"formEncType",o.formEncType,o,null),Le(e,t,"formMethod",o.formMethod,o,null),Le(e,t,"formTarget",o.formTarget,o,null)):(Le(e,t,"encType",o.encType,o,null),Le(e,t,"method",o.method,o,null),Le(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Hn(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=ki);break;case"onScroll":l!=null&&Ee("scroll",e);break;case"onScrollEnd":l!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Hn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),Fn(e,"popover",l);break;case"xlinkActuate":la(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":la(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":la(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":la(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":la(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":la(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":la(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":la(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":la(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Fn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Gx.get(s)||s,Fn(e,s,l))}}function yo(e,t,s,l,o,d){switch(s){case"style":id(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Rs(e,l):(typeof l=="number"||typeof l=="bigint")&&Rs(e,""+l);break;case"onScroll":l!=null&&Ee("scroll",e);break;case"onScrollEnd":l!=null&&Ee("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ku.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(o=s.endsWith("Capture"),t=s.slice(2,o?s.length-7:void 0),d=e[gt]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(t,d,o),typeof l=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,o);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Fn(e,s,l)}}}function ct(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var l=!1,o=!1,d;for(d in s)if(s.hasOwnProperty(d)){var p=s[d];if(p!=null)switch(d){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Le(e,t,d,p,s,null)}}o&&Le(e,t,"srcSet",s.srcSet,s,null),l&&Le(e,t,"src",s.src,s,null);return;case"input":Ee("invalid",e);var v=d=p=o=null,R=null,k=null;for(l in s)if(s.hasOwnProperty(l)){var q=s[l];if(q!=null)switch(l){case"name":o=q;break;case"type":p=q;break;case"checked":R=q;break;case"defaultChecked":k=q;break;case"value":d=q;break;case"defaultValue":v=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,t));break;default:Le(e,t,l,q,s,null)}}ad(e,d,v,R,k,p,o,!1),zn(e);return;case"select":Ee("invalid",e),l=p=d=null;for(o in s)if(s.hasOwnProperty(o)&&(v=s[o],v!=null))switch(o){case"value":d=v;break;case"defaultValue":p=v;break;case"multiple":l=v;default:Le(e,t,o,v,s,null)}t=d,s=p,e.multiple=!!l,t!=null?Ds(e,!!l,t,!1):s!=null&&Ds(e,!!l,s,!0);return;case"textarea":Ee("invalid",e),d=o=l=null;for(p in s)if(s.hasOwnProperty(p)&&(v=s[p],v!=null))switch(p){case"value":l=v;break;case"defaultValue":o=v;break;case"children":d=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:Le(e,t,p,v,s,null)}rd(e,l,o,d),zn(e);return;case"option":for(R in s)if(s.hasOwnProperty(R)&&(l=s[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Le(e,t,R,l,s,null)}return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(l=0;l<tn.length;l++)Ee(tn[l],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in s)if(s.hasOwnProperty(k)&&(l=s[k],l!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Le(e,t,k,l,s,null)}return;default:if(Il(t)){for(q in s)s.hasOwnProperty(q)&&(l=s[q],l!==void 0&&yo(e,t,q,l,s,void 0));return}}for(v in s)s.hasOwnProperty(v)&&(l=s[v],l!=null&&Le(e,t,v,l,s,null))}function bp(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,d=null,p=null,v=null,R=null,k=null,q=null;for($ in s){var Y=s[$];if(s.hasOwnProperty($)&&Y!=null)switch($){case"checked":break;case"value":break;case"defaultValue":R=Y;default:l.hasOwnProperty($)||Le(e,t,$,null,l,Y)}}for(var V in l){var $=l[V];if(Y=s[V],l.hasOwnProperty(V)&&($!=null||Y!=null))switch(V){case"type":d=$;break;case"name":o=$;break;case"checked":k=$;break;case"defaultChecked":q=$;break;case"value":p=$;break;case"defaultValue":v=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,t));break;default:$!==Y&&Le(e,t,V,$,l,Y)}}Ml(e,p,v,R,k,q,d,o);return;case"select":$=p=v=V=null;for(d in s)if(R=s[d],s.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":$=R;default:l.hasOwnProperty(d)||Le(e,t,d,null,l,R)}for(o in l)if(d=l[o],R=s[o],l.hasOwnProperty(o)&&(d!=null||R!=null))switch(o){case"value":V=d;break;case"defaultValue":v=d;break;case"multiple":p=d;default:d!==R&&Le(e,t,o,d,l,R)}t=v,s=p,l=$,V!=null?Ds(e,!!s,V,!1):!!l!=!!s&&(t!=null?Ds(e,!!s,t,!0):Ds(e,!!s,s?[]:"",!1));return;case"textarea":$=V=null;for(v in s)if(o=s[v],s.hasOwnProperty(v)&&o!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Le(e,t,v,null,l,o)}for(p in l)if(o=l[p],d=s[p],l.hasOwnProperty(p)&&(o!=null||d!=null))switch(p){case"value":V=o;break;case"defaultValue":$=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==d&&Le(e,t,p,o,l,d)}sd(e,V,$);return;case"option":for(var me in s)if(V=s[me],s.hasOwnProperty(me)&&V!=null&&!l.hasOwnProperty(me))switch(me){case"selected":e.selected=!1;break;default:Le(e,t,me,null,l,V)}for(R in l)if(V=l[R],$=s[R],l.hasOwnProperty(R)&&V!==$&&(V!=null||$!=null))switch(R){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:Le(e,t,R,V,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in s)V=s[ue],s.hasOwnProperty(ue)&&V!=null&&!l.hasOwnProperty(ue)&&Le(e,t,ue,null,l,V);for(k in l)if(V=l[k],$=s[k],l.hasOwnProperty(k)&&V!==$&&(V!=null||$!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,t));break;default:Le(e,t,k,V,l,$)}return;default:if(Il(t)){for(var ke in s)V=s[ke],s.hasOwnProperty(ke)&&V!==void 0&&!l.hasOwnProperty(ke)&&yo(e,t,ke,void 0,l,V);for(q in l)V=l[q],$=s[q],!l.hasOwnProperty(q)||V===$||V===void 0&&$===void 0||yo(e,t,q,V,l,$);return}}for(var O in s)V=s[O],s.hasOwnProperty(O)&&V!=null&&!l.hasOwnProperty(O)&&Le(e,t,O,null,l,V);for(Y in l)V=l[Y],$=s[Y],!l.hasOwnProperty(Y)||V===$||V==null&&$==null||Le(e,t,Y,V,l,$)}var vo=null,No=null;function Vi(e){return e.nodeType===9?e:e.ownerDocument}function i0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function So(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wo=null;function yp(){var e=window.event;return e&&e.type==="popstate"?e===wo?!1:(wo=e,!0):(wo=null,!1)}var c0=typeof setTimeout=="function"?setTimeout:void 0,vp=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,Np=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(e){return o0.resolve(null).then(e).catch(Sp)}:c0;function Sp(e){setTimeout(function(){throw e})}function za(e){return e==="head"}function u0(e,t){var s=t,l=0,o=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(0<l&&8>l){s=l;var p=e.ownerDocument;if(s&1&&sn(p.documentElement),s&2&&sn(p.body),s&4)for(s=p.head,sn(s),p=s.firstChild;p;){var v=p.nextSibling,R=p.nodeName;p[br]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&p.rel.toLowerCase()==="stylesheet"||s.removeChild(p),p=v}}if(o===0){e.removeChild(d),fn(t);return}o--}else s==="$"||s==="$?"||s==="$!"?o++:l=s.charCodeAt(0)-48;else l=0;s=d}while(s);fn(t)}function jo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":jo(s),Al(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function wp(e,t,s,l){for(;e.nodeType===1;){var o=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[br])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Kt(e.nextSibling),e===null)break}return null}function jp(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Kt(e.nextSibling),e===null))return null;return e}function Eo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ep(e,t){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Do=null;function d0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}function f0(e,t,s){switch(t=Vi(s),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function sn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Al(e)}var zt=new Map,m0=new Set;function $i(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Na=j.d;j.d={f:Dp,r:Rp,D:Ap,C:Cp,L:Tp,m:_p,X:Op,S:Mp,M:Ip};function Dp(){var e=Na.f(),t=Ti();return e||t}function Rp(e){var t=Ss(e);t!==null&&t.tag===5&&t.type==="form"?Of(t):Na.r(e)}var ar=typeof document>"u"?null:document;function h0(e,t,s){var l=ar;if(l&&typeof t=="string"&&t){var o=Lt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof s=="string"&&(o+='[crossorigin="'+s+'"]'),m0.has(o)||(m0.add(o),e={rel:e,crossOrigin:s,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),ct(t,"link",e),tt(t),l.head.appendChild(t)))}}function Ap(e){Na.D(e),h0("dns-prefetch",e,null)}function Cp(e,t){Na.C(e,t),h0("preconnect",e,t)}function Tp(e,t,s){Na.L(e,t,s);var l=ar;if(l&&e&&t){var o='link[rel="preload"][as="'+Lt(t)+'"]';t==="image"&&s&&s.imageSrcSet?(o+='[imagesrcset="'+Lt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(o+='[imagesizes="'+Lt(s.imageSizes)+'"]')):o+='[href="'+Lt(e)+'"]';var d=o;switch(t){case"style":d=sr(e);break;case"script":d=rr(e)}zt.has(d)||(e=y({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),zt.set(d,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(rn(d))||t==="script"&&l.querySelector(nn(d))||(t=l.createElement("link"),ct(t,"link",e),tt(t),l.head.appendChild(t)))}}function _p(e,t){Na.m(e,t);var s=ar;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Lt(l)+'"][href="'+Lt(e)+'"]',d=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=rr(e)}if(!zt.has(d)&&(e=y({rel:"modulepreload",href:e},t),zt.set(d,e),s.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(nn(d)))return}l=s.createElement("link"),ct(l,"link",e),tt(l),s.head.appendChild(l)}}}function Mp(e,t,s){Na.S(e,t,s);var l=ar;if(l&&e){var o=ws(l).hoistableStyles,d=sr(e);t=t||"default";var p=o.get(d);if(!p){var v={loading:0,preload:null};if(p=l.querySelector(rn(d)))v.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},s),(s=zt.get(d))&&Ro(e,s);var R=p=l.createElement("link");tt(R),ct(R,"link",e),R._p=new Promise(function(k,q){R.onload=k,R.onerror=q}),R.addEventListener("load",function(){v.loading|=1}),R.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Bi(p,t,l)}p={type:"stylesheet",instance:p,count:1,state:v},o.set(d,p)}}}function Op(e,t){Na.X(e,t);var s=ar;if(s&&e){var l=ws(s).hoistableScripts,o=rr(e),d=l.get(o);d||(d=s.querySelector(nn(o)),d||(e=y({src:e,async:!0},t),(t=zt.get(o))&&Ao(e,t),d=s.createElement("script"),tt(d),ct(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(o,d))}}function Ip(e,t){Na.M(e,t);var s=ar;if(s&&e){var l=ws(s).hoistableScripts,o=rr(e),d=l.get(o);d||(d=s.querySelector(nn(o)),d||(e=y({src:e,async:!0,type:"module"},t),(t=zt.get(o))&&Ao(e,t),d=s.createElement("script"),tt(d),ct(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(o,d))}}function x0(e,t,s,l){var o=(o=ae.current)?$i(o):null;if(!o)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=sr(s.href),s=ws(o).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=sr(s.href);var d=ws(o).hoistableStyles,p=d.get(e);if(p||(o=o.ownerDocument||o,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,p),(d=o.querySelector(rn(e)))&&!d._p&&(p.instance=d,p.state.loading=5),zt.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},zt.set(e,s),d||Up(o,e,s,p.state))),t&&l===null)throw Error(i(528,""));return p}if(t&&l!==null)throw Error(i(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=rr(s),s=ws(o).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function sr(e){return'href="'+Lt(e)+'"'}function rn(e){return'link[rel="stylesheet"]['+e+"]"}function g0(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Up(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ct(t,"link",s),tt(t),e.head.appendChild(t))}function rr(e){return'[src="'+Lt(e)+'"]'}function nn(e){return"script[async]"+e}function p0(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Lt(s.href)+'"]');if(l)return t.instance=l,tt(l),l;var o=y({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),tt(l),ct(l,"style",o),Bi(l,s.precedence,e),t.instance=l;case"stylesheet":o=sr(s.href);var d=e.querySelector(rn(o));if(d)return t.state.loading|=4,t.instance=d,tt(d),d;l=g0(s),(o=zt.get(o))&&Ro(l,o),d=(e.ownerDocument||e).createElement("link"),tt(d);var p=d;return p._p=new Promise(function(v,R){p.onload=v,p.onerror=R}),ct(d,"link",l),t.state.loading|=4,Bi(d,s.precedence,e),t.instance=d;case"script":return d=rr(s.src),(o=e.querySelector(nn(d)))?(t.instance=o,tt(o),o):(l=s,(o=zt.get(d))&&(l=y({},s),Ao(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),tt(o),ct(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Bi(l,s.precedence,e));return t.instance}function Bi(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,d=o,p=0;p<l.length;p++){var v=l[p];if(v.dataset.precedence===t)d=v;else if(d!==o)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Ro(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ao(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Fi=null;function b0(e,t,s){if(Fi===null){var l=new Map,o=Fi=new Map;o.set(s,l)}else o=Fi,l=o.get(s),l||(l=new Map,o.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),o=0;o<s.length;o++){var d=s[o];if(!(d[br]||d[ut]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var p=d.getAttribute(t)||"";p=e+p;var v=l.get(p);v?v.push(d):l.set(p,[d])}}return l}function y0(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function Lp(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function v0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ln=null;function kp(){}function Vp(e,t,s){if(ln===null)throw Error(i(475));var l=ln;if(t.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var o=sr(s.href),d=e.querySelector(rn(o));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Pi.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=d,tt(d);return}d=e.ownerDocument||e,s=g0(s),(o=zt.get(o))&&Ro(s,o),d=d.createElement("link"),tt(d);var p=d;p._p=new Promise(function(v,R){p.onload=v,p.onerror=R}),ct(d,"link",s),t.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=Pi.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function $p(){if(ln===null)throw Error(i(475));var e=ln;return e.stylesheets&&e.count===0&&Co(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&Co(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Pi(){if(this.count--,this.count===0){if(this.stylesheets)Co(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var zi=null;function Co(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,zi=new Map,t.forEach(Bp,e),zi=null,Pi.call(e))}function Bp(e,t){if(!(t.state.loading&4)){var s=zi.get(e);if(s)var l=s.get(null);else{s=new Map,zi.set(e,s);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<o.length;d++){var p=o[d];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(s.set(p.dataset.precedence,p),l=p)}l&&s.set(null,l)}o=t.instance,p=o.getAttribute("data-precedence"),d=s.get(p)||l,d===l&&s.set(null,o),s.set(p,o),this.count++,l=Pi.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),d?d.parentNode.insertBefore(o,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var cn={$$typeof:J,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Fp(e,t,s,l,o,d,p,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.hiddenUpdates=jl(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=d,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function N0(e,t,s,l,o,d,p,v,R,k,q,Y){return e=new Fp(e,t,s,p,v,R,k,Y),t=1,d===!0&&(t|=24),d=jt(3,null,null,t),e.current=d,d.stateNode=e,t=oc(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:t},mc(d),e}function S0(e){return e?(e=Us,e):Us}function w0(e,t,s,l,o,d){o=S0(o),l.context===null?l.context=o:l.pendingContext=o,l=Ta(t),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=_a(e,l,t),s!==null&&(Ct(s,e,t),kr(s,e,t))}function j0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function To(e,t){j0(e,t),(e=e.alternate)&&j0(e,t)}function E0(e){if(e.tag===13){var t=Is(e,67108864);t!==null&&Ct(t,e,67108864),To(e,67108864)}}var qi=!0;function Pp(e,t,s,l){var o=_.T;_.T=null;var d=j.p;try{j.p=2,_o(e,t,s,l)}finally{j.p=d,_.T=o}}function zp(e,t,s,l){var o=_.T;_.T=null;var d=j.p;try{j.p=8,_o(e,t,s,l)}finally{j.p=d,_.T=o}}function _o(e,t,s,l){if(qi){var o=Mo(l);if(o===null)bo(e,t,l,Hi,s),R0(e,l);else if(Hp(o,e,t,s,l))l.stopPropagation();else if(R0(e,l),t&4&&-1<qp.indexOf(e)){for(;o!==null;){var d=Ss(o);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var p=Wa(d.pendingLanes);if(p!==0){var v=d;for(v.pendingLanes|=2,v.entangledLanes|=2;p;){var R=1<<31-St(p);v.entanglements[1]|=R,p&=~R}ra(d),(Oe&6)===0&&(Ai=It()+500,en(0))}}break;case 13:v=Is(d,2),v!==null&&Ct(v,d,2),Ti(),To(d,2)}if(d=Mo(l),d===null&&bo(e,t,l,Hi,s),d===o)break;o=d}o!==null&&l.stopPropagation()}else bo(e,t,l,null,s)}}function Mo(e){return e=Ll(e),Oo(e)}var Hi=null;function Oo(e){if(Hi=null,e=Ns(e),e!==null){var t=u(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Hi=e,null}function D0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cx()){case $u:return 2;case Bu:return 8;case kn:case Tx:return 32;case Fu:return 268435456;default:return 32}default:return 32}}var Io=!1,qa=null,Ha=null,Ya=null,on=new Map,un=new Map,Ga=[],qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R0(e,t){switch(e){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":on.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":un.delete(t.pointerId)}}function dn(e,t,s,l,o,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[o]},t!==null&&(t=Ss(t),t!==null&&E0(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Hp(e,t,s,l,o){switch(t){case"focusin":return qa=dn(qa,e,t,s,l,o),!0;case"dragenter":return Ha=dn(Ha,e,t,s,l,o),!0;case"mouseover":return Ya=dn(Ya,e,t,s,l,o),!0;case"pointerover":var d=o.pointerId;return on.set(d,dn(on.get(d)||null,e,t,s,l,o)),!0;case"gotpointercapture":return d=o.pointerId,un.set(d,dn(un.get(d)||null,e,t,s,l,o)),!0}return!1}function A0(e){var t=Ns(e.target);if(t!==null){var s=u(t);if(s!==null){if(t=s.tag,t===13){if(t=m(s),t!==null){e.blockedOn=t,Vx(e.priority,function(){if(s.tag===13){var l=At();l=El(l);var o=Is(s,l);o!==null&&Ct(o,s,l),To(s,l)}});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Mo(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Ul=l,s.target.dispatchEvent(l),Ul=null}else return t=Ss(s),t!==null&&E0(t),e.blockedOn=s,!1;t.shift()}return!0}function C0(e,t,s){Yi(e)&&s.delete(t)}function Yp(){Io=!1,qa!==null&&Yi(qa)&&(qa=null),Ha!==null&&Yi(Ha)&&(Ha=null),Ya!==null&&Yi(Ya)&&(Ya=null),on.forEach(C0),un.forEach(C0)}function Gi(e,t){e.blockedOn===t&&(e.blockedOn=null,Io||(Io=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,Yp)))}var Xi=null;function T0(e){Xi!==e&&(Xi=e,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){Xi===e&&(Xi=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(Oo(l||s)===null)continue;break}var d=Ss(s);d!==null&&(e.splice(t,3),t-=3,Mc(d,{pending:!0,data:o,method:s.method,action:l},l,o))}}))}function fn(e){function t(R){return Gi(R,e)}qa!==null&&Gi(qa,e),Ha!==null&&Gi(Ha,e),Ya!==null&&Gi(Ya,e),on.forEach(t),un.forEach(t);for(var s=0;s<Ga.length;s++){var l=Ga[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ga.length&&(s=Ga[0],s.blockedOn===null);)A0(s),s.blockedOn===null&&Ga.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var o=s[l],d=s[l+1],p=o[gt]||null;if(typeof d=="function")p||T0(s);else if(p){var v=null;if(d&&d.hasAttribute("formAction")){if(o=d,p=d[gt]||null)v=p.formAction;else if(Oo(o)!==null)continue}else v=p.action;typeof v=="function"?s[l+1]=v:(s.splice(l,3),l-=3),T0(s)}}}function Uo(e){this._internalRoot=e}Ki.prototype.render=Uo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var s=t.current,l=At();w0(s,l,e,t,null,null)},Ki.prototype.unmount=Uo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;w0(e.current,2,null,e,null,null),Ti(),t[vs]=null}};function Ki(e){this._internalRoot=e}Ki.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ga.length&&t!==0&&t<Ga[s].priority;s++);Ga.splice(s,0,e),s===0&&A0(e)}};var _0=a.version;if(_0!=="19.1.0")throw Error(i(527,_0,"19.1.0"));j.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=x(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Gp={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qi.isDisabled&&Qi.supportsFiber)try{xr=Qi.inject(Gp),Nt=Qi}catch{}}return hn.createRoot=function(e,t){if(!c(e))throw Error(i(299));var s=!1,l="",o=Gf,d=Xf,p=Kf,v=null;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(v=t.unstable_transitionCallbacks)),t=N0(e,1,!1,null,null,s,l,o,d,p,v,null),e[vs]=t.current,po(e),new Uo(t)},hn.hydrateRoot=function(e,t,s){if(!c(e))throw Error(i(299));var l=!1,o="",d=Gf,p=Xf,v=Kf,R=null,k=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(R=s.unstable_transitionCallbacks),s.formState!==void 0&&(k=s.formState)),t=N0(e,1,!0,t,s??null,l,o,d,p,v,R,k),t.context=S0(null),s=t.current,l=At(),l=El(l),o=Ta(l),o.callback=null,_a(s,o,l),s=l,t.current.lanes=s,pr(t,s),ra(t),e[vs]=t.current,po(e),new Ki(t)},hn.version="19.1.0",hn}var F0;function ib(){if(F0)return Vo.exports;F0=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(a){console.error(a)}}return f(),Vo.exports=nb(),Vo.exports}var lb=ib();const cb=Au(lb);class ob{parseTruckNumber(a){const r=this.parseFromLicensePlate(a.licensePlate);if(r.confidence==="high")return r;if(a.dotNumber){const c=this.parseFromDOTNumber(a.dotNumber);if(c.confidence==="high")return c}const i=this.parseFromVIN(a.vin);if(i.confidence==="medium")return i;if(a.registrationNumber){const c=this.parseFromRegistrationNumber(a.registrationNumber);if(c.confidence==="medium")return c}return this.generateFromVIN(a.vin)}parseFromLicensePlate(a){const r=a.toUpperCase().replace(/[^A-Z0-9]/g,"");let i=r.match(/(?:TRK|TRUCK)(\d+)/);return i?{truckNumber:`Truck #${parseInt(i[1]).toString().padStart(3,"0")}`,confidence:"high",source:"license_plate",originalValue:a,needsReview:!1}:(i=r.match(/(?:FLEET|FLT)(\d+)/),i?{truckNumber:`Truck #${parseInt(i[1]).toString().padStart(3,"0")}`,confidence:"high",source:"license_plate",originalValue:a,needsReview:!1}:(i=r.match(/(?:UNIT|U)(\d+)/),i?{truckNumber:`Truck #${parseInt(i[1]).toString().padStart(3,"0")}`,confidence:"high",source:"license_plate",originalValue:a,needsReview:!1}:(i=r.match(/([A-Z]+)(\d{2,3})$/),i&&parseInt(i[2])<=999?{truckNumber:`Truck #${parseInt(i[2]).toString().padStart(3,"0")}`,confidence:"medium",source:"license_plate",originalValue:a,needsReview:!0}:(i=r.match(/^(\d{2,3})([A-Z]+)/),i&&parseInt(i[1])<=999?{truckNumber:`Truck #${parseInt(i[1]).toString().padStart(3,"0")}`,confidence:"medium",source:"license_plate",originalValue:a,needsReview:!0}:{truckNumber:"",confidence:"low",source:"license_plate",originalValue:a,needsReview:!0}))))}parseFromDOTNumber(a){const i=a.replace(/[^0-9]/g,"").slice(-3),c=parseInt(i);return c>=1&&c<=999?{truckNumber:`Truck #${c.toString().padStart(3,"0")}`,confidence:"medium",source:"dot_number",originalValue:a,needsReview:!0}:{truckNumber:"",confidence:"low",source:"dot_number",originalValue:a,needsReview:!0}}parseFromVIN(a){const r=a.match(/(\d{2,3})/g);if(r)for(const i of r){const c=parseInt(i);if(c>=1&&c<=999)return{truckNumber:`Truck #${c.toString().padStart(3,"0")}`,confidence:"low",source:"vin_pattern",originalValue:a,needsReview:!0}}return{truckNumber:"",confidence:"low",source:"vin_pattern",originalValue:a,needsReview:!0}}parseFromRegistrationNumber(a){const i=a.toUpperCase().replace(/[^A-Z0-9]/g,"").match(/(\d{2,3})/);if(i){const c=parseInt(i[1]);if(c>=1&&c<=999)return{truckNumber:`Truck #${c.toString().padStart(3,"0")}`,confidence:"medium",source:"document_text",originalValue:a,needsReview:!0}}return{truckNumber:"",confidence:"low",source:"document_text",originalValue:a,needsReview:!0}}generateFromVIN(a){const r=a.slice(-3),i=parseInt(r.replace(/[^0-9]/g,""));return i>0?{truckNumber:`Unit ${i.toString().padStart(3,"0")}`,confidence:"low",source:"generated",originalValue:a,needsReview:!0}:{truckNumber:`Vehicle ${a.slice(-4)}`,confidence:"low",source:"generated",originalValue:a,needsReview:!0}}parseFromDocumentText(a){const r=[],i=a.toUpperCase(),c=i.match(/LICENSE\s+PLATE:\s*([A-Z0-9]+)/);if(c){const m=this.parseFromLicensePlate(c[1]);m.confidence!=="low"&&r.push({...m,source:"document_license_plate"})}return[/(?:TRUCK|VEHICLE|UNIT)\s*#?(\d{1,3})/g,/(?:FLEET)\s*#?(\d{1,3})/g,/(?:ID|IDENTIFIER)\s*#?(\d{1,3})/g,/(?:NUMBER|NO\.?)\s*(\d{1,3})/g,/TRK(\d{1,3})/g].forEach(m=>{let h;for(;(h=m.exec(i))!==null;){const x=parseInt(h[1]);x>=1&&x<=999&&r.push({truckNumber:`Truck #${x.toString().padStart(3,"0")}`,confidence:"medium",source:"document_text",originalValue:h[0],needsReview:!1})}}),r}validateTruckNumber(a){const r=a.trim(),i=[{regex:/^(?:truck|unit|vehicle)\s*#?(\d{1,3})$/i,format:"Truck #"},{regex:/^#?(\d{1,3})$/,format:"Truck #"},{regex:/^t(\d{1,3})$/i,format:"Truck #"}];for(const c of i){const u=r.match(c.regex);if(u){const m=parseInt(u[1]);if(m>=1&&m<=999)return{isValid:!0,cleaned:`${c.format}${m.toString().padStart(3,"0")}`}}}return{isValid:!1,cleaned:r,suggestion:'Format: "Truck #001" or just "47" for Truck #047'}}getDisplayNumber(a){const r=a.match(/(\d+)/);return r?`#${r[1]}`:a}findDuplicates(a){const r=new Map;return a.forEach(i=>{const c=r.get(i.truckNumber)||[];c.push(i.vin),r.set(i.truckNumber,c)}),Array.from(r.entries()).filter(([i,c])=>c.length>1).map(([i,c])=>({truckNumber:i,vins:c}))}}const vu=new ob;class ub{constructor(){le(this,"errors",[]);le(this,"notifications",[]);le(this,"listeners",[]);le(this,"notificationListeners",[])}handleOCRError(a,r,i){const c={id:this.generateId(),type:"ocr",severity:"medium",message:`OCR processing failed for ${r}: ${a instanceof Error?a.message:String(a)}`,userMessage:`Unable to read text from ${r}. The file may be corrupted, low quality, or contain handwritten text.`,details:{fileName:r,originalError:a},timestamp:new Date,resolved:!1,actions:i?[{label:"Retry",type:"retry",handler:i},{label:"Skip File",type:"dismiss",handler:()=>this.resolveError(c.id)}]:void 0};return this.addError(c),this.addNotification({id:this.generateId(),message:`Failed to process ${r}. Using fallback data.`,type:"warning",duration:5e3}),c}handleValidationError(a,r,i){const c={id:this.generateId(),type:"validation",severity:"medium",message:`Validation failed for ${a}: ${JSON.stringify(r)}`,userMessage:`Invalid ${a}: ${i.join(", ")}`,details:{field:a,value:r,requirements:i},timestamp:new Date,resolved:!1};return this.addError(c),c}handleStorageError(a,r,i){const c={id:this.generateId(),type:"storage",severity:"high",message:`Storage operation failed: ${a} - ${r instanceof Error?r.message:String(r)}`,userMessage:"Unable to save data. Your browser storage may be full or disabled.",details:{operation:a,originalError:r},timestamp:new Date,resolved:!1,actions:[{label:"Clear Old Data",type:"retry",handler:()=>{this.clearOldData(),i==null||i()}},{label:"Export Data",type:"redirect",handler:()=>this.exportDataForRecovery()}]};return this.addError(c),this.addNotification({id:this.generateId(),message:"Storage error: Unable to save changes",type:"error",actions:c.actions}),c}handleCriticalError(a,r){const i={id:this.generateId(),type:"system",severity:"critical",message:`Critical error in ${r}: ${a instanceof Error?a.message:String(a)}`,userMessage:"A critical error occurred. Please refresh the page or contact support.",details:{context:r,originalError:a,stack:a instanceof Error?a.stack:void 0},timestamp:new Date,resolved:!1,actions:[{label:"Refresh Page",type:"refresh",handler:()=>window.location.reload()}]};return this.addError(i),this.addNotification({id:this.generateId(),message:"Critical error occurred - please refresh the page",type:"error",actions:i.actions}),console.error("Critical Error:",i),i}handleUserError(a,r){const i={id:this.generateId(),type:"user",severity:"low",message:a,userMessage:r||a,timestamp:new Date,resolved:!1};return this.addError(i),this.addNotification({id:this.generateId(),message:i.userMessage,type:"info",duration:3e3}),i}showSuccess(a,r=3e3){this.addNotification({id:this.generateId(),message:a,type:"success",duration:r})}showInfo(a,r){this.addNotification({id:this.generateId(),message:a,type:"info",duration:r})}addError(a){this.errors.unshift(a),this.errors.length>50&&(this.errors=this.errors.slice(0,50)),this.notifyListeners()}addNotification(a){this.notifications.unshift(a),a.duration&&setTimeout(()=>{this.dismissNotification(a.id)},a.duration),this.notifyNotificationListeners()}resolveError(a){const r=this.errors.find(i=>i.id===a);r&&(r.resolved=!0,this.notifyListeners())}dismissNotification(a){this.notifications=this.notifications.filter(r=>r.id!==a),this.notifyNotificationListeners()}getErrors(){return[...this.errors]}getNotifications(){return[...this.notifications]}getUnresolvedErrors(){return this.errors.filter(a=>!a.resolved)}subscribe(a){return this.listeners.push(a),()=>{this.listeners=this.listeners.filter(r=>r!==a)}}subscribeToNotifications(a){return this.notificationListeners.push(a),()=>{this.notificationListeners=this.notificationListeners.filter(r=>r!==a)}}clearAll(){this.errors=[],this.notifications=[],this.notifyListeners(),this.notifyNotificationListeners()}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}notifyListeners(){this.listeners.forEach(a=>a(this.errors))}notifyNotificationListeners(){this.notificationListeners.forEach(a=>a(this.notifications))}clearOldData(){try{Object.keys(localStorage).filter(i=>i.startsWith("truckbo_")&&!i.includes("drivers_data")&&!i.includes("fleet_data")).forEach(i=>localStorage.removeItem(i)),this.showSuccess("Cleared old data to free up storage space")}catch(a){console.error("Failed to clear old data:",a)}}exportDataForRecovery(){try{const a={drivers:JSON.parse(localStorage.getItem("truckbo_drivers_data")||"[]"),fleet:JSON.parse(localStorage.getItem("truckbo_fleet_data")||"[]"),timestamp:new Date().toISOString()},r=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),c=document.createElement("a");c.href=i,c.download=`truckbo-backup-${new Date().toISOString().split("T")[0]}.json`,c.click(),URL.revokeObjectURL(i),this.showSuccess("Data exported successfully")}catch(a){console.error("Failed to export data:",a),this.handleCriticalError(a,"data export")}}}const De=new ub,qh={},db=Object.freeze(Object.defineProperty({__proto__:null,default:qh},Symbol.toStringTag,{value:"Module"}));function fb(f){try{return crypto.getRandomValues(new Uint8Array(f))}catch{}try{return qh.randomBytes(f)}catch{}throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative")}function mb(f,a){if(f=f||Hh,typeof f!="number")throw Error("Illegal arguments: "+typeof f+", "+typeof a);f<4?f=4:f>31&&(f=31);var r=[];return r.push("$2b$"),f<10&&r.push("0"),r.push(f.toString()),r.push("$"),r.push(Su(fb(Tn),Tn)),r.join("")}function hb(f,a,r){if(typeof a=="function"&&(r=a,a=void 0),typeof f=="function"&&(r=f,f=void 0),typeof f>"u")f=Hh;else if(typeof f!="number")throw Error("illegal arguments: "+typeof f);function i(c){Zt(function(){try{c(null,mb(f))}catch(u){c(u)}})}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);i(r)}else return new Promise(function(c,u){i(function(m,h){if(m){u(m);return}c(h)})})}function Nu(f,a,r,i){function c(u){typeof f=="string"&&typeof a=="number"?hb(a,function(m,h){Y0(f,h,u,i)}):typeof f=="string"&&typeof a=="string"?Y0(f,a,u,i):Zt(u.bind(this,Error("Illegal arguments: "+typeof f+", "+typeof a)))}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);c(r)}else return new Promise(function(u,m){c(function(h,x){if(h){m(h);return}u(x)})})}function xb(f,a){for(var r=f.length^a.length,i=0;i<f.length;++i)r|=f.charCodeAt(i)^a.charCodeAt(i);return r===0}function gb(f,a,r,i){function c(u){if(typeof f!="string"||typeof a!="string"){Zt(u.bind(this,Error("Illegal arguments: "+typeof f+", "+typeof a)));return}if(a.length!==60){Zt(u.bind(this,null,!1));return}Nu(f,a.substring(0,29),function(m,h){m?u(m):u(null,xb(h,a))},i)}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);c(r)}else return new Promise(function(u,m){c(function(h,x){if(h){m(h);return}u(x)})})}var Zt=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function pb(f){for(var a=0,r=0,i=0;i<f.length;++i)r=f.charCodeAt(i),r<128?a+=1:r<2048?a+=2:(r&64512)===55296&&(f.charCodeAt(i+1)&64512)===56320?(++i,a+=4):a+=3;return a}function bb(f){for(var a=0,r,i,c=new Array(pb(f)),u=0,m=f.length;u<m;++u)r=f.charCodeAt(u),r<128?c[a++]=r:r<2048?(c[a++]=r>>6|192,c[a++]=r&63|128):(r&64512)===55296&&((i=f.charCodeAt(u+1))&64512)===56320?(r=65536+((r&1023)<<10)+(i&1023),++u,c[a++]=r>>18|240,c[a++]=r>>12&63|128,c[a++]=r>>6&63|128,c[a++]=r&63|128):(c[a++]=r>>12|224,c[a++]=r>>6&63|128,c[a++]=r&63|128);return c}var nr="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Ka=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Su(f,a){var r=0,i=[],c,u;if(a<=0||a>f.length)throw Error("Illegal len: "+a);for(;r<a;){if(c=f[r++]&255,i.push(nr[c>>2&63]),c=(c&3)<<4,r>=a){i.push(nr[c&63]);break}if(u=f[r++]&255,c|=u>>4&15,i.push(nr[c&63]),c=(u&15)<<2,r>=a){i.push(nr[c&63]);break}u=f[r++]&255,c|=u>>6&3,i.push(nr[c&63]),i.push(nr[u&63])}return i.join("")}function yb(f,a){for(var r=0,i=f.length,c=0,u=[],m,h,x,g,y,w;r<i-1&&c<a&&(w=f.charCodeAt(r++),m=w<Ka.length?Ka[w]:-1,w=f.charCodeAt(r++),h=w<Ka.length?Ka[w]:-1,!(m==-1||h==-1||(y=m<<2>>>0,y|=(h&48)>>4,u.push(String.fromCharCode(y)),++c>=a||r>=i)||(w=f.charCodeAt(r++),x=w<Ka.length?Ka[w]:-1,x==-1)||(y=(h&15)<<4>>>0,y|=(x&60)>>2,u.push(String.fromCharCode(y)),++c>=a||r>=i)));)w=f.charCodeAt(r++),g=w<Ka.length?Ka[w]:-1,y=(x&3)<<6>>>0,y|=g,u.push(String.fromCharCode(y)),++c;var D=[];for(r=0;r<c;r++)D.push(u[r].charCodeAt(0));return D}var Tn=16,Hh=10,vb=16,Nb=100,P0=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],z0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Yh=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function _n(f,a,r,i){var c,u=f[a],m=f[a+1];return u^=r[0],c=i[u>>>24],c+=i[256|u>>16&255],c^=i[512|u>>8&255],c+=i[768|u&255],m^=c^r[1],c=i[m>>>24],c+=i[256|m>>16&255],c^=i[512|m>>8&255],c+=i[768|m&255],u^=c^r[2],c=i[u>>>24],c+=i[256|u>>16&255],c^=i[512|u>>8&255],c+=i[768|u&255],m^=c^r[3],c=i[m>>>24],c+=i[256|m>>16&255],c^=i[512|m>>8&255],c+=i[768|m&255],u^=c^r[4],c=i[u>>>24],c+=i[256|u>>16&255],c^=i[512|u>>8&255],c+=i[768|u&255],m^=c^r[5],c=i[m>>>24],c+=i[256|m>>16&255],c^=i[512|m>>8&255],c+=i[768|m&255],u^=c^r[6],c=i[u>>>24],c+=i[256|u>>16&255],c^=i[512|u>>8&255],c+=i[768|u&255],m^=c^r[7],c=i[m>>>24],c+=i[256|m>>16&255],c^=i[512|m>>8&255],c+=i[768|m&255],u^=c^r[8],c=i[u>>>24],c+=i[256|u>>16&255],c^=i[512|u>>8&255],c+=i[768|u&255],m^=c^r[9],c=i[m>>>24],c+=i[256|m>>16&255],c^=i[512|m>>8&255],c+=i[768|m&255],u^=c^r[10],c=i[u>>>24],c+=i[256|u>>16&255],c^=i[512|u>>8&255],c+=i[768|u&255],m^=c^r[11],c=i[m>>>24],c+=i[256|m>>16&255],c^=i[512|m>>8&255],c+=i[768|m&255],u^=c^r[12],c=i[u>>>24],c+=i[256|u>>16&255],c^=i[512|u>>8&255],c+=i[768|u&255],m^=c^r[13],c=i[m>>>24],c+=i[256|m>>16&255],c^=i[512|m>>8&255],c+=i[768|m&255],u^=c^r[14],c=i[u>>>24],c+=i[256|u>>16&255],c^=i[512|u>>8&255],c+=i[768|u&255],m^=c^r[15],c=i[m>>>24],c+=i[256|m>>16&255],c^=i[512|m>>8&255],c+=i[768|m&255],u^=c^r[16],f[a]=m^r[vb+1],f[a+1]=u,f}function cr(f,a){for(var r=0,i=0;r<4;++r)i=i<<8|f[a]&255,a=(a+1)%f.length;return{key:i,offp:a}}function q0(f,a,r){for(var i=0,c=[0,0],u=a.length,m=r.length,h,x=0;x<u;x++)h=cr(f,i),i=h.offp,a[x]=a[x]^h.key;for(x=0;x<u;x+=2)c=_n(c,0,a,r),a[x]=c[0],a[x+1]=c[1];for(x=0;x<m;x+=2)c=_n(c,0,a,r),r[x]=c[0],r[x+1]=c[1]}function Sb(f,a,r,i){for(var c=0,u=[0,0],m=r.length,h=i.length,x,g=0;g<m;g++)x=cr(a,c),c=x.offp,r[g]=r[g]^x.key;for(c=0,g=0;g<m;g+=2)x=cr(f,c),c=x.offp,u[0]^=x.key,x=cr(f,c),c=x.offp,u[1]^=x.key,u=_n(u,0,r,i),r[g]=u[0],r[g+1]=u[1];for(g=0;g<h;g+=2)x=cr(f,c),c=x.offp,u[0]^=x.key,x=cr(f,c),c=x.offp,u[1]^=x.key,u=_n(u,0,r,i),i[g]=u[0],i[g+1]=u[1]}function H0(f,a,r,i,c){var u=Yh.slice(),m=u.length,h;if(r<4||r>31)if(h=Error("Illegal number of rounds (4-31): "+r),i){Zt(i.bind(this,h));return}else throw h;if(a.length!==Tn)if(h=Error("Illegal salt length: "+a.length+" != "+Tn),i){Zt(i.bind(this,h));return}else throw h;r=1<<r>>>0;var x,g,y=0,w;typeof Int32Array=="function"?(x=new Int32Array(P0),g=new Int32Array(z0)):(x=P0.slice(),g=z0.slice()),Sb(a,f,x,g);function D(){if(c&&c(y/r),y<r)for(var N=Date.now();y<r&&(y=y+1,q0(f,x,g),q0(a,x,g),!(Date.now()-N>Nb)););else{for(y=0;y<64;y++)for(w=0;w<m>>1;w++)_n(u,w<<1,x,g);var E=[];for(y=0;y<m;y++)E.push((u[y]>>24&255)>>>0),E.push((u[y]>>16&255)>>>0),E.push((u[y]>>8&255)>>>0),E.push((u[y]&255)>>>0);if(i){i(null,E);return}else return E}i&&Zt(D)}if(typeof i<"u")D();else for(var b;;)if(typeof(b=D())<"u")return b||[]}function Y0(f,a,r,i){var c;if(typeof f!="string"||typeof a!="string")if(c=Error("Invalid string / salt: Not a string"),r){Zt(r.bind(this,c));return}else throw c;var u,m;if(a.charAt(0)!=="$"||a.charAt(1)!=="2")if(c=Error("Invalid salt version: "+a.substring(0,2)),r){Zt(r.bind(this,c));return}else throw c;if(a.charAt(2)==="$")u="\0",m=3;else{if(u=a.charAt(2),u!=="a"&&u!=="b"&&u!=="y"||a.charAt(3)!=="$")if(c=Error("Invalid salt revision: "+a.substring(2,4)),r){Zt(r.bind(this,c));return}else throw c;m=4}if(a.charAt(m+2)>"$")if(c=Error("Missing salt rounds"),r){Zt(r.bind(this,c));return}else throw c;var h=parseInt(a.substring(m,m+1),10)*10,x=parseInt(a.substring(m+1,m+2),10),g=h+x,y=a.substring(m+3,m+25);f+=u>="a"?"\0":"";var w=bb(f),D=yb(y,Tn);function b(N){var E=[];return E.push("$2"),u>="a"&&E.push(u),E.push("$"),g<10&&E.push("0"),E.push(g.toString()),E.push("$"),E.push(Su(D,D.length)),E.push(Su(N,Yh.length*4-1)),E.join("")}if(typeof r>"u")return b(H0(w,D,g));H0(w,D,g,function(N,E){N?r(N,null):r(null,b(E))},i)}class wb{constructor(){le(this,"SESSION_KEY","truckbo_session");le(this,"COMPANIES_KEY","truckbo_companies");le(this,"USERS_KEY","truckbo_users");le(this,"LOGIN_ATTEMPTS_KEY","truckbo_login_attempts");le(this,"MAX_LOGIN_ATTEMPTS",5);le(this,"LOCKOUT_DURATION",900*1e3);le(this,"SALT_ROUNDS",12);le(this,"currentSession",null);le(this,"sessionListeners",[]);this.loadSession()}async initializeDemo(){const a=[{id:"company_demo1",name:"Sunbelt Trucking LLC",dotNumber:"12345678",mcNumber:"MC-987654",address:{street:"123 Industrial Blvd",city:"Dallas",state:"TX",zipCode:"75201"},contactEmail:"admin@sunbelttrucking.com",contactPhone:"214-555-0123",subscription:{plan:"professional",status:"active",expiresAt:"2025-12-31T23:59:59Z",maxVehicles:50,maxDrivers:100,maxUsers:10},settings:{allowDriverSelfService:!0,requireTwoFactor:!1,documentRetentionDays:2555,autoRenewalAlerts:!0},createdAt:new Date().toISOString(),isActive:!0},{id:"company_demo2",name:"Lone Star Logistics",dotNumber:"87654321",mcNumber:"MC-123456",address:{street:"456 Commerce Way",city:"Houston",state:"TX",zipCode:"77001"},contactEmail:"admin@lonestarlogistics.com",contactPhone:"713-555-0456",subscription:{plan:"basic",status:"active",expiresAt:"2025-06-30T23:59:59Z",maxVehicles:10,maxDrivers:20,maxUsers:3},settings:{allowDriverSelfService:!1,requireTwoFactor:!0,documentRetentionDays:1825,autoRenewalAlerts:!0},createdAt:new Date().toISOString(),isActive:!0}],i=await Nu("TruckBo2025!",this.SALT_ROUNDS),c=[{id:"user_admin1",email:"admin@sunbelttrucking.com",firstName:"Sarah",lastName:"Johnson",role:"admin",companyId:"company_demo1",companyName:"Sunbelt Trucking LLC",permissions:this.getAllPermissions(),lastLogin:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString(),passwordHash:i,failedLoginAttempts:0},{id:"user_manager1",email:"manager@sunbelttrucking.com",firstName:"Mike",lastName:"Rodriguez",role:"manager",companyId:"company_demo1",companyName:"Sunbelt Trucking LLC",permissions:this.getManagerPermissions(),lastLogin:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString(),passwordHash:i,failedLoginAttempts:0},{id:"user_admin2",email:"admin@lonestarlogistics.com",firstName:"Jennifer",lastName:"Davis",role:"admin",companyId:"company_demo2",companyName:"Lone Star Logistics",permissions:this.getAllPermissions(),lastLogin:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString(),passwordHash:i,failedLoginAttempts:0}];localStorage.setItem(this.COMPANIES_KEY,JSON.stringify(a)),localStorage.setItem(this.USERS_KEY,JSON.stringify(c)),console.log("🏗️ Demo authentication data initialized with secure passwords"),console.log("🔐 Demo password for all accounts: TruckBo2025!")}async login(a){try{if(await this.checkRateLimit(a.email))throw new Error("Too many failed login attempts. Account temporarily locked.");const i=this.getUsers(),c=this.getCompanies(),u=i.find(g=>g.email.toLowerCase()===a.email.toLowerCase()&&g.isActive);if(!u)throw await this.recordFailedAttempt(a.email),new Error("Invalid email or password");if(u.lockedUntil&&new Date<new Date(u.lockedUntil))throw new Error("Account is temporarily locked. Please try again later.");if(!await gb(a.password,u.passwordHash))throw await this.recordFailedAttempt(a.email),u.failedLoginAttempts+=1,u.failedLoginAttempts>=this.MAX_LOGIN_ATTEMPTS&&(u.lockedUntil=new Date(Date.now()+this.LOCKOUT_DURATION).toISOString()),this.saveUsers(i),new Error("Invalid email or password");u.failedLoginAttempts=0,u.lockedUntil=void 0,await this.clearFailedAttempts(a.email);const h=c.find(g=>g.id===u.companyId);if(!h||!h.isActive)throw new Error("Company account is not active");if(h.subscription.status!=="active")throw new Error("Company subscription is not active. Please contact support.");u.lastLogin=new Date().toISOString(),this.saveUsers(i);const x={user:u,company:h,token:await this.generateSecureToken(),expiresAt:new Date(Date.now()+7200*1e3).toISOString(),refreshToken:await this.generateSecureToken()};return this.currentSession=x,this.saveSession(x),this.notifySessionListeners(),De.showSuccess(`Welcome back, ${u.firstName}!`),console.log(`🔐 User logged in: ${u.email} (${h.name})`),x}catch(r){throw De.handleUserError(r instanceof Error?r.message:"Login failed","Please check your credentials and try again"),r}}async registerCompany(a){try{const r=this.validatePasswordStrength(a.adminUser.password);if(!r.isValid)throw new Error(r.message);const i=this.getCompanies(),c=this.getUsers();if(i.find(b=>b.contactEmail.toLowerCase()===a.contactEmail.toLowerCase()||b.name.toLowerCase()===a.companyName.toLowerCase()))throw new Error("A company with this name or email already exists");if(c.find(b=>b.email.toLowerCase()===a.adminUser.email.toLowerCase()))throw new Error("A user with this email already exists");const h=await Nu(a.adminUser.password,this.SALT_ROUNDS),x=`company_${Date.now()}`,g={id:x,name:a.companyName,dotNumber:a.dotNumber,mcNumber:a.mcNumber,address:a.address,contactEmail:a.contactEmail,contactPhone:a.contactPhone,subscription:{plan:a.subscription.plan,status:"active",expiresAt:new Date(Date.now()+720*60*60*1e3).toISOString(),maxVehicles:this.getSubscriptionLimits(a.subscription.plan).maxVehicles,maxDrivers:this.getSubscriptionLimits(a.subscription.plan).maxDrivers,maxUsers:this.getSubscriptionLimits(a.subscription.plan).maxUsers},settings:{allowDriverSelfService:a.subscription.plan!=="basic",requireTwoFactor:a.subscription.plan==="enterprise",documentRetentionDays:2555,autoRenewalAlerts:!0},createdAt:new Date().toISOString(),isActive:!0},w={id:`user_${Date.now()}`,email:a.adminUser.email,firstName:a.adminUser.firstName,lastName:a.adminUser.lastName,role:"admin",companyId:x,companyName:a.companyName,permissions:this.getAllPermissions(),lastLogin:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString(),passwordHash:h,failedLoginAttempts:0};i.push(g),c.push(w),this.saveCompanies(i),this.saveUsers(c);const D={user:w,company:g,token:await this.generateSecureToken(),expiresAt:new Date(Date.now()+7200*1e3).toISOString(),refreshToken:await this.generateSecureToken()};return this.currentSession=D,this.saveSession(D),this.notifySessionListeners(),De.showSuccess(`Welcome to TruckBo Pro, ${w.firstName}! Your company has been registered.`),console.log(`🏢 New company registered: ${g.name}`),D}catch(r){throw De.handleUserError(r instanceof Error?r.message:"Registration failed","Please check your information and try again"),r}}logout(){this.currentSession&&(console.log(`🔐 User logged out: ${this.currentSession.user.email}`),De.showInfo(`Goodbye, ${this.currentSession.user.firstName}!`)),this.currentSession=null,localStorage.removeItem(this.SESSION_KEY),this.notifySessionListeners()}getCurrentSession(){return this.currentSession}getCurrentUser(){var a;return((a=this.currentSession)==null?void 0:a.user)||null}getCurrentCompany(){var a;return((a=this.currentSession)==null?void 0:a.company)||null}isAuthenticated(){if(!this.currentSession)return!1;const a=new Date,r=new Date(this.currentSession.expiresAt);return a>=r?(this.logout(),!1):!0}hasPermission(a,r){return this.currentSession?this.currentSession.user.permissions.some(c=>c.resource===a&&c.actions.includes(r)):!1}isAdmin(){var a;return((a=this.currentSession)==null?void 0:a.user.role)==="admin"}canManageUsers(){return this.hasPermission("users","create")&&this.hasPermission("users","update")}subscribeToSession(a){return this.sessionListeners.push(a),()=>{this.sessionListeners=this.sessionListeners.filter(r=>r!==a)}}getCompanyScopedKey(a){var i;const r=(i=this.getCurrentCompany())==null?void 0:i.id;if(!r)throw new Error("No authenticated company found");return`${a}_${r}`}getSubscriptionLimits(a){const r={basic:{maxVehicles:10,maxDrivers:20,maxUsers:3},professional:{maxVehicles:50,maxDrivers:100,maxUsers:10},enterprise:{maxVehicles:500,maxDrivers:1e3,maxUsers:50}};return r[a]||r.basic}getAllPermissions(){return[{resource:"vehicles",actions:["create","read","update","delete","export"]},{resource:"drivers",actions:["create","read","update","delete","export"]},{resource:"documents",actions:["create","read","update","delete","export"]},{resource:"reports",actions:["create","read","export"]},{resource:"users",actions:["create","read","update","delete"]},{resource:"settings",actions:["read","update"]}]}getManagerPermissions(){return[{resource:"vehicles",actions:["create","read","update","export"]},{resource:"drivers",actions:["create","read","update","export"]},{resource:"documents",actions:["create","read","update","export"]},{resource:"reports",actions:["create","read","export"]},{resource:"users",actions:["read"]},{resource:"settings",actions:["read"]}]}async generateSecureToken(){const a=new Uint8Array(32);return crypto.getRandomValues(a),Array.from(a,r=>r.toString(16).padStart(2,"0")).join("")}validatePasswordStrength(a){const i=/[A-Z]/.test(a),c=/[a-z]/.test(a),u=/\d/.test(a),m=/[!@#$%^&*(),.?":{}|<>]/.test(a);return a.length<12?{isValid:!1,message:"Password must be at least 12 characters long"}:i?c?u?m?{isValid:!0,message:"Password is strong"}:{isValid:!1,message:"Password must contain at least one special character"}:{isValid:!1,message:"Password must contain at least one number"}:{isValid:!1,message:"Password must contain at least one lowercase letter"}:{isValid:!1,message:"Password must contain at least one uppercase letter"}}async checkRateLimit(a){const i=this.getLoginAttempts().find(c=>c.email.toLowerCase()===a.toLowerCase());return i?!!(i.lockedUntil&&new Date<new Date(i.lockedUntil)):!1}async recordFailedAttempt(a){const r=this.getLoginAttempts(),i=r.findIndex(c=>c.email.toLowerCase()===a.toLowerCase());i>=0?(r[i].attempts+=1,r[i].lastAttempt=new Date().toISOString(),r[i].attempts>=this.MAX_LOGIN_ATTEMPTS&&(r[i].lockedUntil=new Date(Date.now()+this.LOCKOUT_DURATION).toISOString())):r.push({email:a.toLowerCase(),attempts:1,lastAttempt:new Date().toISOString()}),this.saveLoginAttempts(r)}async clearFailedAttempts(a){const i=this.getLoginAttempts().filter(c=>c.email.toLowerCase()!==a.toLowerCase());this.saveLoginAttempts(i)}getLoginAttempts(){try{const a=localStorage.getItem(this.LOGIN_ATTEMPTS_KEY);return a?JSON.parse(a):[]}catch(a){return console.error("Error loading login attempts:",a),[]}}saveLoginAttempts(a){localStorage.setItem(this.LOGIN_ATTEMPTS_KEY,JSON.stringify(a))}loadSession(){try{const a=localStorage.getItem(this.SESSION_KEY);if(a){const r=JSON.parse(a),i=new Date,c=new Date(r.expiresAt);i<c?(this.currentSession=r,console.log(`🔐 Session restored for: ${r.user.email}`)):(localStorage.removeItem(this.SESSION_KEY),console.log("🔐 Session expired, removed from storage"))}}catch(a){console.error("Error loading session:",a),localStorage.removeItem(this.SESSION_KEY)}}saveSession(a){localStorage.setItem(this.SESSION_KEY,JSON.stringify(a))}notifySessionListeners(){this.sessionListeners.forEach(a=>a(this.currentSession))}getCompanies(){try{const a=localStorage.getItem(this.COMPANIES_KEY);return a?JSON.parse(a):[]}catch(a){return console.error("Error loading companies:",a),[]}}saveCompanies(a){localStorage.setItem(this.COMPANIES_KEY,JSON.stringify(a))}getUsers(){try{const a=localStorage.getItem(this.USERS_KEY);return a?JSON.parse(a):[]}catch(a){return console.error("Error loading users:",a),[]}}saveUsers(a){localStorage.setItem(this.USERS_KEY,JSON.stringify(a))}}const ot=new wb;class jb{constructor(){le(this,"BASE_STORAGE_KEY","truckbo_fleet_data");le(this,"BASE_BACKUP_KEY","truckbo_fleet_backup");le(this,"BASE_DRIVERS_STORAGE_KEY","truckbo_drivers_data");le(this,"BASE_DRIVERS_BACKUP_KEY","truckbo_drivers_backup");le(this,"listeners",[])}getStorageKey(){try{return ot.getCompanyScopedKey(this.BASE_STORAGE_KEY)}catch{return this.BASE_STORAGE_KEY}}getBackupKey(){try{return ot.getCompanyScopedKey(this.BASE_BACKUP_KEY)}catch{return this.BASE_BACKUP_KEY}}getDriversStorageKey(){try{return ot.getCompanyScopedKey(this.BASE_DRIVERS_STORAGE_KEY)}catch{return this.BASE_DRIVERS_STORAGE_KEY}}getDriversBackupKey(){try{return ot.getCompanyScopedKey(this.BASE_DRIVERS_BACKUP_KEY)}catch{return this.BASE_DRIVERS_BACKUP_KEY}}getFleet(){try{const a=localStorage.getItem(this.getStorageKey());return a?JSON.parse(a):[]}catch(a){return console.error("Error loading fleet data:",a),this.getBackup()}}saveFleet(a){try{return this.createBackup(),localStorage.setItem(this.getStorageKey(),JSON.stringify(a)),this.notifyListeners(),!0}catch(r){return console.error("Error saving fleet data:",r),!1}}addVehicle(a){try{const r=this.getFleet();if(r.some(u=>u.vin===a.vin))throw new Error(`Vehicle with VIN ${a.vin} already exists`);let i=a.truckNumber;if(!i){const u=vu.parseTruckNumber({vin:a.vin,licensePlate:a.licensePlate,dotNumber:a.dotNumber,make:a.make,model:a.model});i=u.truckNumber||this.generateTruckNumber(r),console.log(`🚛 Auto-detected truck number for ${a.vin}:`,{detected:u.truckNumber,confidence:u.confidence,source:u.source,needsReview:u.needsReview})}const c={...a,truckNumber:i,id:this.generateId(),dateAdded:new Date().toISOString(),lastUpdated:new Date().toISOString()};return r.push(c),this.saveFleet(r),c}catch(r){return console.error("Error adding vehicle:",r),null}}addVehicles(a){const r=[],i=[];return a.forEach(c=>{try{const u=this.addVehicle(c);u?r.push(u):i.push({vehicle:c,error:"Failed to add vehicle"})}catch(u){i.push({vehicle:c,error:u instanceof Error?u.message:String(u)})}}),{successful:r,failed:i}}updateVehicle(a,r){try{const i=this.getFleet(),c=i.findIndex(u=>u.id===a);if(c===-1)throw new Error(`Vehicle with ID ${a} not found`);return i[c]={...i[c],...r,lastUpdated:new Date().toISOString()},this.saveFleet(i)}catch(i){return console.error("Error updating vehicle:",i),!1}}removeVehicle(a){try{const r=this.getFleet(),i=r.filter(c=>c.id!==a);if(i.length===r.length)throw new Error(`Vehicle with ID ${a} not found`);return this.saveFleet(i)}catch(r){return console.error("Error removing vehicle:",r),!1}}searchVehicles(a){const r=this.getFleet(),i=a.toLowerCase();return r.filter(c=>c.vin.toLowerCase().includes(i)||c.make.toLowerCase().includes(i)||c.model.toLowerCase().includes(i)||c.licensePlate.toLowerCase().includes(i)||c.truckNumber.toLowerCase().includes(i))}getFleetStats(){const a=this.getFleet();return{total:a.length,active:a.filter(r=>r.status==="active").length,inactive:a.filter(r=>r.status==="inactive").length,recentlyAdded:a.filter(r=>{const i=new Date(r.dateAdded),c=new Date;return c.setDate(c.getDate()-7),i>c}).length}}exportFleet(){const a=this.getFleet();return JSON.stringify(a,null,2)}importFleet(a){try{const r=JSON.parse(a);if(!Array.isArray(r))throw new Error("Invalid data format - expected array of vehicles");const i=r.filter(c=>c.vin&&c.make&&c.model);if(i.length===0)throw new Error("No valid vehicles found in import data");return this.saveFleet(i),{success:!0,message:`Successfully imported ${i.length} vehicles`,count:i.length}}catch(r){return{success:!1,message:`Import failed: ${r instanceof Error?r.message:String(r)}`}}}createBackup(){const a=localStorage.getItem(this.getStorageKey());a&&localStorage.setItem(this.getBackupKey(),a)}getBackup(){try{const a=localStorage.getItem(this.getBackupKey());return a?JSON.parse(a):[]}catch(a){return console.error("Error loading backup:",a),[]}}restoreFromBackup(){try{const a=localStorage.getItem(this.getBackupKey());return a?(localStorage.setItem(this.getStorageKey(),a),this.notifyListeners(),!0):!1}catch(a){return console.error("Error restoring backup:",a),!1}}clearFleet(){try{return this.createBackup(),localStorage.removeItem(this.getStorageKey()),this.notifyListeners(),!0}catch(a){return console.error("Error clearing fleet:",a),!1}}generateId(){return`vehicle_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateTruckNumber(a){const r=a.map(c=>c.truckNumber).filter(c=>c==null?void 0:c.match(/^Truck #\d+$/)).map(c=>parseInt(c.replace("Truck #",""))).filter(c=>!isNaN(c));return`Truck #${(r.length>0?Math.max(...r)+1:1).toString().padStart(3,"0")}`}getDrivers(){try{const a=localStorage.getItem(this.getDriversStorageKey());return(a?JSON.parse(a):[]).map(i=>({...i,medicalCertificate:{...i.medicalCertificate,...this.calculateCertificateStatus(i.medicalCertificate.expirationDate)},cdlInfo:{...i.cdlInfo,...this.calculateCertificateStatus(i.cdlInfo.expirationDate)}}))}catch(a){return console.error("Error loading drivers data:",a),this.getDriversBackup()}}saveDrivers(a){try{return this.createDriversBackup(),localStorage.setItem(this.getDriversStorageKey(),JSON.stringify(a)),this.notifyListeners(),!0}catch(r){return console.error("Error saving drivers data:",r),!1}}addDriver(a){try{const r=this.getDrivers();if(r.find(m=>m.employeeId===a.employeeId))return console.error("Driver with this employee ID already exists:",a.employeeId),null;if(r.find(m=>m.cdlInfo.cdlNumber===a.cdlInfo.cdlNumber))return console.error("Driver with this CDL number already exists:",a.cdlInfo.cdlNumber),null;const u={...a,id:this.generateId(),dateAdded:new Date().toISOString(),lastUpdated:new Date().toISOString(),medicalCertificate:{...a.medicalCertificate,...this.calculateCertificateStatus(a.medicalCertificate.expirationDate)},cdlInfo:{...a.cdlInfo,...this.calculateCertificateStatus(a.cdlInfo.expirationDate)}};return r.push(u),this.saveDrivers(r)?(console.log("✅ Driver added successfully:",u.firstName,u.lastName),u):(console.error("❌ Failed to save driver"),null)}catch(r){return console.error("Error adding driver:",r),null}}updateDriver(a,r){try{const i=this.getDrivers(),c=i.findIndex(u=>u.id===a);return c===-1?(console.error("Driver not found:",a),!1):(i[c]={...i[c],...r,lastUpdated:new Date().toISOString(),medicalCertificate:r.medicalCertificate?{...r.medicalCertificate,...this.calculateCertificateStatus(r.medicalCertificate.expirationDate)}:i[c].medicalCertificate,cdlInfo:r.cdlInfo?{...r.cdlInfo,...this.calculateCertificateStatus(r.cdlInfo.expirationDate)}:i[c].cdlInfo},this.saveDrivers(i))}catch(i){return console.error("Error updating driver:",i),!1}}getDriversWithExpiringCertificates(a=30){return this.getDrivers().filter(r=>r.medicalCertificate.daysUntilExpiry<=a||r.cdlInfo.daysUntilExpiry<=a)}calculateCertificateStatus(a){try{const r=new Date(a),i=new Date,c=r.getTime()-i.getTime(),u=Math.ceil(c/(1e3*3600*24));let m;return u<0?m="expired":u<=30?m="expiring_soon":m="valid",{status:m,daysUntilExpiry:u}}catch(r){return console.error("Error calculating certificate status:",r),{status:"invalid",daysUntilExpiry:-999}}}createDriversBackup(){try{const a=localStorage.getItem(this.getDriversStorageKey());a&&localStorage.setItem(this.getDriversBackupKey(),a)}catch(a){console.error("Error creating drivers backup:",a)}}getDriversBackup(){try{const a=localStorage.getItem(this.getDriversBackupKey());return a?JSON.parse(a):[]}catch(a){return console.error("Error loading drivers backup:",a),[]}}subscribe(a){return this.listeners.push(a),()=>{this.listeners=this.listeners.filter(r=>r!==a)}}notifyListeners(){this.listeners.forEach(a=>{try{a()}catch(r){console.error("Error in fleet storage listener:",r)}})}}const ze=new jb,G0=1e4,Eb=5e4,X0=1e5,Db=999999,K0=1e5,Rb=999999,Ab=17,Cb=/^[A-HJ-NPR-Z0-9]{17}$/i,Tb="TRK",ps={DOT_INSPECTION:"2025-07-22",REGISTRATION:"2025-06-22",INSURANCE:"2025-05-22",IFTA:"2024-12-31",STATE_PERMITS:"2025-04-22",EMISSIONS:"2025-08-22",WEIGHT_CERT:"2025-03-22"},bs={DOT_INSPECTION:365,REGISTRATION:335,INSURANCE:304,IFTA:162,STATE_PERMITS:274,EMISSIONS:396,WEIGHT_CERT:243},_b=`VIN
SAMPLE1234567890A
SAMPLE1234567890B
SAMPLE1234567890C`,Mb={VIN:"vin"},Ob=9;class Ib{constructor(){le(this,"vehicles",[]);le(this,"complianceTasks",[]);le(this,"subscribers",[])}subscribe(a){return this.subscribers.push(a),()=>{this.subscribers=this.subscribers.filter(r=>r!==a)}}notify(){this.subscribers.forEach(a=>a())}getAllVehicles(){return[...this.vehicles]}getAllComplianceTasks(){return[...this.complianceTasks]}addVehicles(a){const r=a.filter(i=>i.status==="success").map(i=>({id:Date.now().toString()+Math.random().toString(36).substr(2,Ob),vin:i.vin,make:i.make,model:i.model,year:i.year,licensePlate:`${Tb}-${i.vin.slice(-3)}`,status:"active",mileage:Math.floor(Math.random()*(Eb-G0))+G0,fuelType:i.fuelType,maxWeight:i.maxWeight,vehicleClass:i.vehicleClass,dotNumber:`DOT${Math.floor(Math.random()*(Db-X0))+X0}`,mcNumber:`MC${Math.floor(Math.random()*(Rb-K0))+K0}`,purchaseDate:new Date().toISOString().split("T")[0],compliance:{dotInspection:{status:"compliant",expiryDate:ps.DOT_INSPECTION,daysUntilExpiry:bs.DOT_INSPECTION},registration:{status:"compliant",expiryDate:ps.REGISTRATION,daysUntilExpiry:bs.REGISTRATION},insurance:{status:"compliant",expiryDate:ps.INSURANCE,daysUntilExpiry:bs.INSURANCE},ifta:{status:"compliant",expiryDate:ps.IFTA,daysUntilExpiry:bs.IFTA},statePermits:{status:"compliant",expiryDate:ps.STATE_PERMITS,daysUntilExpiry:bs.STATE_PERMITS},emissions:{status:"compliant",expiryDate:ps.EMISSIONS,daysUntilExpiry:bs.EMISSIONS},weightCert:{status:"compliant",expiryDate:ps.WEIGHT_CERT,daysUntilExpiry:bs.WEIGHT_CERT}}}));return this.vehicles.push(...r),this.notify(),r}updateTaskStatus(a,r){const i=this.complianceTasks.findIndex(c=>c.id===a);i!==-1&&(this.complianceTasks[i]={...this.complianceTasks[i],status:r,updatedDate:new Date().toISOString(),completedDate:r==="completed"?new Date().toISOString():void 0},this.notify())}getFleetStats(){const a=this.vehicles.length,r=this.vehicles.filter(m=>m.status==="active").length,i=this.vehicles.filter(m=>m.status==="inactive").length;let c=0,u=0;return this.vehicles.forEach(m=>{Object.values(m.compliance).forEach(h=>{h.status==="warning"&&c++,h.status==="expired"&&u++})}),{total:a,active:r,inactive:i,complianceWarnings:c,complianceExpired:u}}getComplianceStats(){const a=this.complianceTasks.length,r=this.complianceTasks.filter(x=>x.status==="pending").length,i=this.complianceTasks.filter(x=>x.status==="in_progress").length,c=this.complianceTasks.filter(x=>x.status==="completed").length,u=this.complianceTasks.filter(x=>x.status==="overdue").length,m=this.complianceTasks.filter(x=>x.priority==="critical").length,h=this.complianceTasks.filter(x=>x.priority==="high").length;return{total:a,pending:r,inProgress:i,completed:c,overdue:u,critical:m,high:h}}}const nt=new Ib,Gh=f=>{if(!f||typeof f!="string")return!1;const a=f.toUpperCase().trim();return a.length===Ab&&Cb.test(a)},Ub=async f=>new Promise((a,r)=>{const i=new FileReader;i.onload=c=>{var u;try{const h=((u=c.target)==null?void 0:u.result).split(`
`).map(g=>g.trim()).filter(g=>g),x=[];h.forEach((g,y)=>{const D=g.split(",").map(b=>b.trim().replace(/['"]/g,""))[0];y===0&&D.toLowerCase()===Mb.VIN||D&&x.push({vin:D.toUpperCase(),isValid:Gh(D),row:y+1})}),a(x)}catch(m){r(m)}},i.onerror=()=>r(new Error("Failed to read file")),i.readAsText(f)}),Lb=()=>{const f=_b,a=new Blob([f],{type:"text/csv"}),r=window.URL.createObjectURL(a),i=document.createElement("a");i.style.display="none",i.href=r,i.download="vin_sample.csv",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r),document.body.removeChild(i)},kb=({isOpen:f,onClose:a,onVehicleAdded:r})=>{const[i,c]=G.useState({vin:"",make:"",model:"",year:new Date().getFullYear(),licensePlate:"",dotNumber:"",truckNumber:"",status:"active"}),[u,m]=G.useState({}),[h,x]=G.useState(!1),g=()=>{c({vin:"",make:"",model:"",year:new Date().getFullYear(),licensePlate:"",dotNumber:"",truckNumber:"",status:"active"}),m({})},y=()=>{const b={};return i.vin.trim()?i.vin.length!==17&&(b.vin="VIN must be 17 characters"):b.vin="VIN is required",i.make.trim()||(b.make="Make is required"),i.model.trim()||(b.model="Model is required"),(i.year<1900||i.year>new Date().getFullYear()+1)&&(b.year="Please enter a valid year"),i.licensePlate.trim()||(b.licensePlate="License plate is required"),m(b),Object.keys(b).length===0},w=async b=>{if(b.preventDefault(),!!y()){x(!0);try{const N=ze.addVehicle({vin:i.vin.toUpperCase(),make:i.make,model:i.model,year:i.year,licensePlate:i.licensePlate.toUpperCase(),dotNumber:i.dotNumber||void 0,truckNumber:i.truckNumber||"",status:i.status});N?(r(N),g(),a()):m({general:"Failed to add vehicle. VIN may already exist."})}catch(N){m({general:N instanceof Error?N.message:String(N)||"Failed to add vehicle"})}finally{x(!1)}}},D=()=>{g(),a()};return f?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black",children:"🚛 Add New Vehicle"}),n.jsx("p",{className:"text-blue-100 mt-1",children:"Add a single vehicle to your existing fleet"})]}),n.jsx("button",{onClick:D,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors duration-200",children:n.jsx("span",{className:"text-xl",children:"✕"})})]})}),n.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[u.general&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-red-500 text-xl mr-3",children:"❌"}),n.jsx("span",{className:"text-red-700 font-medium",children:u.general})]})}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["🚛 Truck Number ",n.jsx("span",{className:"text-slate-500",children:"(Auto-detected from license plate if left empty)"})]}),n.jsx("input",{type:"text",value:i.truckNumber,onChange:b=>c({...i,truckNumber:b.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-slate-300 focus:border-purple-500 transition-colors duration-200 text-lg font-bold",placeholder:"Truck #047 or Unit 47 (leave empty for auto-detection)"}),n.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"💡 Leave empty and we'll automatically detect from your license plate (e.g., TRK047 → Truck #047)"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["VIN Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:i.vin,onChange:b=>c({...i,vin:b.target.value.toUpperCase()}),className:`w-full px-4 py-3 rounded-xl border-2 font-mono text-sm transition-colors duration-200 ${u.vin?"border-red-300 bg-red-50 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"1HGCM82633A123456",maxLength:17}),u.vin&&n.jsx("p",{className:"text-red-600 text-sm mt-1 font-medium",children:u.vin})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Make ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:i.make,onChange:b=>c({...i,make:b.target.value}),className:`w-full px-4 py-3 rounded-xl border-2 transition-colors duration-200 ${u.make?"border-red-300 bg-red-50 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Freightliner"}),u.make&&n.jsx("p",{className:"text-red-600 text-sm mt-1 font-medium",children:u.make})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Model ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:i.model,onChange:b=>c({...i,model:b.target.value}),className:`w-full px-4 py-3 rounded-xl border-2 transition-colors duration-200 ${u.model?"border-red-300 bg-red-50 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Cascadia"}),u.model&&n.jsx("p",{className:"text-red-600 text-sm mt-1 font-medium",children:u.model})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Year ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",value:i.year,onChange:b=>c({...i,year:parseInt(b.target.value)||new Date().getFullYear()}),className:`w-full px-4 py-3 rounded-xl border-2 transition-colors duration-200 ${u.year?"border-red-300 bg-red-50 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,min:"1900",max:new Date().getFullYear()+1}),u.year&&n.jsx("p",{className:"text-red-600 text-sm mt-1 font-medium",children:u.year})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["License Plate ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:i.licensePlate,onChange:b=>c({...i,licensePlate:b.target.value.toUpperCase()}),className:`w-full px-4 py-3 rounded-xl border-2 font-mono transition-colors duration-200 ${u.licensePlate?"border-red-300 bg-red-50 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"ABC123"}),u.licensePlate&&n.jsx("p",{className:"text-red-600 text-sm mt-1 font-medium",children:u.licensePlate})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["DOT Number ",n.jsx("span",{className:"text-amber-600",children:"(Required for Compliance Data)"})]}),n.jsx("input",{type:"text",value:i.dotNumber,onChange:b=>c({...i,dotNumber:b.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-slate-300 focus:border-blue-500 transition-colors duration-200",placeholder:"1234567"}),n.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"💡 DOT number identifies the carrier/company. Required for FMCSA compliance lookups."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Initial Status"}),n.jsxs("select",{value:i.status,onChange:b=>c({...i,status:b.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-slate-300 focus:border-blue-500 transition-colors duration-200",children:[n.jsx("option",{value:"active",children:"🟢 Active"}),n.jsx("option",{value:"maintenance",children:"🟡 Maintenance"}),n.jsx("option",{value:"inactive",children:"⚪ Inactive"})]})]})]}),n.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-200",children:[n.jsx("button",{type:"button",onClick:D,className:"flex-1 px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-colors duration-200",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:h,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-bold transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:h?n.jsxs("span",{className:"flex items-center justify-center",children:[n.jsx("span",{className:"animate-spin mr-2",children:"⏳"}),"Adding Vehicle..."]}):"🚛 Add Vehicle"})]})]})]})}):null},Vb=({isOpen:f,onClose:a,onVehiclesAdded:r})=>{const[i,c]=G.useState("csv_upload"),[u,m]=G.useState(null),[h,x]=G.useState(""),[,g]=G.useState([]),[y,w]=G.useState([]),[D,b]=G.useState(!1),[N,E]=G.useState("upload"),[A,X]=G.useState(null),L=G.useRef(null),J=()=>{c("csv_upload"),m(null),x(""),g([]),w([]),b(!1),E("upload"),X(null)},B=()=>{J(),a()},K=te=>te.length!==17?!1:/^[A-HJ-NPR-Z0-9]{17}$/i.test(te),ne=te=>te.split(`
`).map(I=>I.trim()).filter(I=>I.length>0).map((I,_)=>({vin:I.toUpperCase(),isValid:K(I),row:_+1})),he=te=>new Promise((fe,I)=>{const _=new FileReader;_.onload=j=>{var z;try{const S=((z=j.target)==null?void 0:z.result).split(`
`).map(F=>F.trim()).filter(F=>F.length>0),P=(S[0].toLowerCase().includes("vin")?S.slice(1):S).map((F,Z)=>{const ae=F.split(",").map(Re=>Re.trim().replace(/"/g,""))[0];return{vin:ae.toUpperCase(),isValid:K(ae),row:Z+2}});fe(P)}catch{I(new Error("Failed to parse CSV file"))}},_.onerror=()=>I(new Error("Failed to read file")),_.readAsText(te)}),ie=te=>{var I;const fe=(I=te.target.files)==null?void 0:I[0];fe&&(m(fe),X(null))},ee=async()=>{if(!h.trim()){X("Please enter at least one VIN");return}b(!0),E("processing");try{const te=ne(h);if(g(te),te.length===0)throw new Error("No valid VINs found");const fe=te.map(I=>({vin:I.vin,status:"active",isValid:I.isValid,needsReview:!I.isValid,missingFields:I.isValid?["make","model","year","licensePlate"]:["vin","make","model","year","licensePlate"]}));w(fe),E("review")}catch(te){X(te instanceof Error?te.message:String(te)||"Failed to process VIN list"),E("upload")}finally{b(!1)}},Ce=async()=>{if(!u){X("Please select a CSV file");return}b(!0),E("processing");try{const te=await he(u);if(g(te),te.length===0)throw new Error("No valid data found in CSV file");const fe=te.map(I=>({vin:I.vin,status:"active",isValid:I.isValid,needsReview:!I.isValid,missingFields:I.isValid?["make","model","year","licensePlate"]:["vin","make","model","year","licensePlate"]}));w(fe),E("review")}catch(te){X(te instanceof Error?te.message:String(te)||"Failed to process CSV file"),E("upload")}finally{b(!1)}},W=async()=>{const te=y.filter(fe=>fe.isValid);if(te.length===0){X("No valid vehicles to add");return}b(!0);try{const fe=te.map(_=>({vin:_.vin,make:_.make||"Unknown",model:_.model||"Unknown",year:_.year||new Date().getFullYear(),licensePlate:_.licensePlate||`${_.vin.slice(-6)}`,dotNumber:_.dotNumber,truckNumber:"",status:_.status})),I=ze.addVehicles(fe);if(I.successful.length>0)r(I.successful),E("complete"),setTimeout(()=>{B()},2e3);else throw new Error("Failed to add vehicles to fleet")}catch(fe){X(fe instanceof Error?fe.message:String(fe)||"Failed to add vehicles")}finally{b(!1)}},ve=()=>{const te=`VIN,Make,Model,Year,License_Plate,DOT_Number
1HGCM82633A123456,Honda,Civic,2022,ABC123,1234567
1FTFW1ET5DFC12345,Ford,F-150,2023,XYZ789,7654321`,fe=new Blob([te],{type:"text/csv"}),I=window.URL.createObjectURL(fe),_=document.createElement("a");_.href=I,_.download="sample_vehicle_import.csv",document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(I)};return f?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black",children:"📁 Bulk Add Vehicles"}),n.jsx("p",{className:"text-green-100 mt-1",children:"Add multiple vehicles to your existing fleet"})]}),n.jsx("button",{onClick:B,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors duration-200",children:n.jsx("span",{className:"text-xl",children:"✕"})})]})}),n.jsxs("div",{className:"p-6",children:[A&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-red-500 text-xl mr-3",children:"❌"}),n.jsx("span",{className:"text-red-700 font-medium",children:A})]})}),N==="upload"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Choose Import Method"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx("div",{className:`group relative border-2 rounded-xl p-6 cursor-pointer transition-all duration-300 ${i==="csv_upload"?"border-green-500 bg-green-50 shadow-lg":"border-gray-200 hover:border-green-300 hover:bg-green-50/50"}`,onClick:()=>c("csv_upload"),children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold mb-4 mx-auto group-hover:scale-110 transition-transform duration-300",children:"CSV"}),n.jsx("h4",{className:"font-bold text-xl mb-3 text-gray-900",children:"CSV File Upload"}),n.jsx("p",{className:"text-gray-600",children:"Upload a CSV file with vehicle information"})]})}),n.jsx("div",{className:`group relative border-2 rounded-xl p-6 cursor-pointer transition-all duration-300 ${i==="vin_list"?"border-green-500 bg-green-50 shadow-lg":"border-gray-200 hover:border-green-300 hover:bg-green-50/50"}`,onClick:()=>c("vin_list"),children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold mb-4 mx-auto group-hover:scale-110 transition-transform duration-300",children:"VIN"}),n.jsx("h4",{className:"font-bold text-xl mb-3 text-gray-900",children:"VIN List"}),n.jsx("p",{className:"text-gray-600",children:"Paste a list of VIN numbers"})]})})]})]}),i==="csv_upload"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-blue-600 text-lg",children:"💡"})})}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"CSV Format"}),n.jsxs("p",{className:"text-blue-700 text-sm mb-3",children:["Your CSV should have columns: VIN, Make, Model, Year, License_Plate, DOT_Number",n.jsx("br",{}),n.jsx("strong",{children:"Note:"})," DOT_Number is required for compliance data (identifies the carrier/company)"]}),n.jsx("button",{onClick:ve,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-4 py-2 rounded-xl font-bold text-sm transition-all duration-300 shadow-lg shadow-blue-900/20 hover:shadow-xl hover:shadow-blue-900/30 hover:scale-105 active:scale-95",children:"📥 Download Sample CSV"})]})]})}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-green-400 transition-colors duration-200",children:[n.jsx("input",{ref:L,type:"file",accept:".csv",onChange:ie,className:"hidden"}),n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4",children:"📁"}),n.jsx("h5",{className:"text-lg font-semibold text-gray-900 mb-2",children:u?`Selected: ${u.name}`:"Drop your CSV file here"}),n.jsx("p",{className:"text-gray-500 mb-4",children:u?"Click process to continue":"or click to browse files"}),n.jsx("button",{onClick:()=>{var te;return(te=L.current)==null?void 0:te.click()},className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 hover:scale-105 active:scale-95",children:u?"📄 Change File":"📁 Browse Files"})]}),n.jsx("button",{onClick:Ce,disabled:!u||D,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-4 rounded-2xl font-black text-lg shadow-xl shadow-green-900/20 hover:shadow-2xl hover:shadow-green-900/30 transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:D?"⏳ Processing...":"🚀 Process CSV File"})]}),i==="vin_list"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-blue-600 text-lg",children:"💡"})})}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"VIN List Format"}),n.jsx("p",{className:"text-blue-700 text-sm",children:"Enter one VIN per line. VINs must be exactly 17 characters long."})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Paste VIN Numbers (one per line)"}),n.jsx("textarea",{value:h,onChange:te=>x(te.target.value),className:"w-full h-40 px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-blue-500 font-mono text-sm resize-none",placeholder:`1HGCM82633A123456
1FTFW1ET5DFC12345
JH4KA8260MC123456`})]}),n.jsx("button",{onClick:ee,disabled:!h.trim()||D,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-4 rounded-2xl font-black text-lg shadow-xl shadow-blue-900/20 hover:shadow-2xl hover:shadow-blue-900/30 transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:D?"⏳ Processing...":"🚀 Process VIN List"})]})]}),N==="processing"&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin text-6xl mb-4",children:"⚙️"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Vehicle Data"}),n.jsx("p",{className:"text-gray-600",children:"Validating VINs and preparing vehicle records..."})]}),N==="review"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Review Vehicles"}),n.jsxs("div",{className:"text-sm text-gray-600",children:[y.filter(te=>te.isValid).length," valid of ",y.length," total"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-blue-800",children:"Total VINs"}),n.jsx("div",{className:"text-2xl text-blue-600",children:y.length})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-green-800",children:"Valid VINs"}),n.jsx("div",{className:"text-2xl text-green-600",children:y.filter(te=>te.isValid).length})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-red-800",children:"Invalid VINs"}),n.jsx("div",{className:"text-2xl text-red-600",children:y.filter(te=>!te.isValid).length})]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-yellow-500 text-xl mr-3",children:"⚠️"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-yellow-800",children:"Note"}),n.jsx("p",{className:"text-yellow-700 text-sm",children:"Vehicles will be added with placeholder data for missing information. You can edit them later in Fleet Management."})]})]})}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:y.map((te,fe)=>n.jsx("div",{className:`p-4 rounded-lg border ${te.isValid?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-lg mr-2",children:te.isValid?"✅":"❌"}),n.jsx("span",{className:"font-mono text-sm font-bold",children:te.vin})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${te.isValid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:te.isValid?"Valid":"Invalid VIN"})]})},fe))})}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>E("upload"),className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold transition-colors duration-200",children:"← Back"}),n.jsx("button",{onClick:W,disabled:y.filter(te=>te.isValid).length===0||D,className:"flex-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-bold transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:D?"⏳ Adding...":`🚛 Add ${y.filter(te=>te.isValid).length} Vehicles`})]})]}),N==="complete"&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),n.jsx("h3",{className:"text-2xl font-bold text-green-600 mb-2",children:"Vehicles Added Successfully!"}),n.jsxs("p",{className:"text-gray-600",children:[y.filter(te=>te.isValid).length," vehicles have been added to your fleet."]}),n.jsx("div",{className:"mt-6",children:n.jsxs("div",{className:"inline-flex items-center text-green-600",children:[n.jsx("span",{className:"animate-spin mr-2",children:"⏳"}),"Closing automatically..."]})})]})]})]})}):null};var Po={exports:{}},Q0;function $b(){return Q0||(Q0=1,function(f){var a=function(r){var i=Object.prototype,c=i.hasOwnProperty,u=Object.defineProperty||function(M,S,T){M[S]=T.value},m,h=typeof Symbol=="function"?Symbol:{},x=h.iterator||"@@iterator",g=h.asyncIterator||"@@asyncIterator",y=h.toStringTag||"@@toStringTag";function w(M,S,T){return Object.defineProperty(M,S,{value:T,enumerable:!0,configurable:!0,writable:!0}),M[S]}try{w({},"")}catch{w=function(S,T,P){return S[T]=P}}function D(M,S,T,P){var F=S&&S.prototype instanceof J?S:J,Z=Object.create(F.prototype),se=new _(P||[]);return u(Z,"_invoke",{value:ve(M,T,se)}),Z}r.wrap=D;function b(M,S,T){try{return{type:"normal",arg:M.call(S,T)}}catch(P){return{type:"throw",arg:P}}}var N="suspendedStart",E="suspendedYield",A="executing",X="completed",L={};function J(){}function B(){}function K(){}var ne={};w(ne,x,function(){return this});var he=Object.getPrototypeOf,ie=he&&he(he(j([])));ie&&ie!==i&&c.call(ie,x)&&(ne=ie);var ee=K.prototype=J.prototype=Object.create(ne);B.prototype=K,u(ee,"constructor",{value:K,configurable:!0}),u(K,"constructor",{value:B,configurable:!0}),B.displayName=w(K,y,"GeneratorFunction");function Ce(M){["next","throw","return"].forEach(function(S){w(M,S,function(T){return this._invoke(S,T)})})}r.isGeneratorFunction=function(M){var S=typeof M=="function"&&M.constructor;return S?S===B||(S.displayName||S.name)==="GeneratorFunction":!1},r.mark=function(M){return Object.setPrototypeOf?Object.setPrototypeOf(M,K):(M.__proto__=K,w(M,y,"GeneratorFunction")),M.prototype=Object.create(ee),M},r.awrap=function(M){return{__await:M}};function W(M,S){function T(Z,se,ae,Re){var xe=b(M[Z],M,se);if(xe.type==="throw")Re(xe.arg);else{var oe=xe.arg,ge=oe.value;return ge&&typeof ge=="object"&&c.call(ge,"__await")?S.resolve(ge.__await).then(function(_e){T("next",_e,ae,Re)},function(_e){T("throw",_e,ae,Re)}):S.resolve(ge).then(function(_e){oe.value=_e,ae(oe)},function(_e){return T("throw",_e,ae,Re)})}}var P;function F(Z,se){function ae(){return new S(function(Re,xe){T(Z,se,Re,xe)})}return P=P?P.then(ae,ae):ae()}u(this,"_invoke",{value:F})}Ce(W.prototype),w(W.prototype,g,function(){return this}),r.AsyncIterator=W,r.async=function(M,S,T,P,F){F===void 0&&(F=Promise);var Z=new W(D(M,S,T,P),F);return r.isGeneratorFunction(S)?Z:Z.next().then(function(se){return se.done?se.value:Z.next()})};function ve(M,S,T){var P=N;return function(Z,se){if(P===A)throw new Error("Generator is already running");if(P===X){if(Z==="throw")throw se;return z()}for(T.method=Z,T.arg=se;;){var ae=T.delegate;if(ae){var Re=te(ae,T);if(Re){if(Re===L)continue;return Re}}if(T.method==="next")T.sent=T._sent=T.arg;else if(T.method==="throw"){if(P===N)throw P=X,T.arg;T.dispatchException(T.arg)}else T.method==="return"&&T.abrupt("return",T.arg);P=A;var xe=b(M,S,T);if(xe.type==="normal"){if(P=T.done?X:E,xe.arg===L)continue;return{value:xe.arg,done:T.done}}else xe.type==="throw"&&(P=X,T.method="throw",T.arg=xe.arg)}}}function te(M,S){var T=S.method,P=M.iterator[T];if(P===m)return S.delegate=null,T==="throw"&&M.iterator.return&&(S.method="return",S.arg=m,te(M,S),S.method==="throw")||T!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+T+"' method")),L;var F=b(P,M.iterator,S.arg);if(F.type==="throw")return S.method="throw",S.arg=F.arg,S.delegate=null,L;var Z=F.arg;if(!Z)return S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,L;if(Z.done)S[M.resultName]=Z.value,S.next=M.nextLoc,S.method!=="return"&&(S.method="next",S.arg=m);else return Z;return S.delegate=null,L}Ce(ee),w(ee,y,"Generator"),w(ee,x,function(){return this}),w(ee,"toString",function(){return"[object Generator]"});function fe(M){var S={tryLoc:M[0]};1 in M&&(S.catchLoc=M[1]),2 in M&&(S.finallyLoc=M[2],S.afterLoc=M[3]),this.tryEntries.push(S)}function I(M){var S=M.completion||{};S.type="normal",delete S.arg,M.completion=S}function _(M){this.tryEntries=[{tryLoc:"root"}],M.forEach(fe,this),this.reset(!0)}r.keys=function(M){var S=Object(M),T=[];for(var P in S)T.push(P);return T.reverse(),function F(){for(;T.length;){var Z=T.pop();if(Z in S)return F.value=Z,F.done=!1,F}return F.done=!0,F}};function j(M){if(M){var S=M[x];if(S)return S.call(M);if(typeof M.next=="function")return M;if(!isNaN(M.length)){var T=-1,P=function F(){for(;++T<M.length;)if(c.call(M,T))return F.value=M[T],F.done=!1,F;return F.value=m,F.done=!0,F};return P.next=P}}return{next:z}}r.values=j;function z(){return{value:m,done:!0}}return _.prototype={constructor:_,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(I),!M)for(var S in this)S.charAt(0)==="t"&&c.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=m)},stop:function(){this.done=!0;var M=this.tryEntries[0],S=M.completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var S=this;function T(Re,xe){return Z.type="throw",Z.arg=M,S.next=Re,xe&&(S.method="next",S.arg=m),!!xe}for(var P=this.tryEntries.length-1;P>=0;--P){var F=this.tryEntries[P],Z=F.completion;if(F.tryLoc==="root")return T("end");if(F.tryLoc<=this.prev){var se=c.call(F,"catchLoc"),ae=c.call(F,"finallyLoc");if(se&&ae){if(this.prev<F.catchLoc)return T(F.catchLoc,!0);if(this.prev<F.finallyLoc)return T(F.finallyLoc)}else if(se){if(this.prev<F.catchLoc)return T(F.catchLoc,!0)}else if(ae){if(this.prev<F.finallyLoc)return T(F.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(M,S){for(var T=this.tryEntries.length-1;T>=0;--T){var P=this.tryEntries[T];if(P.tryLoc<=this.prev&&c.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var F=P;break}}F&&(M==="break"||M==="continue")&&F.tryLoc<=S&&S<=F.finallyLoc&&(F=null);var Z=F?F.completion:{};return Z.type=M,Z.arg=S,F?(this.method="next",this.next=F.finallyLoc,L):this.complete(Z)},complete:function(M,S){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&S&&(this.next=S),L},finish:function(M){for(var S=this.tryEntries.length-1;S>=0;--S){var T=this.tryEntries[S];if(T.finallyLoc===M)return this.complete(T.completion,T.afterLoc),I(T),L}},catch:function(M){for(var S=this.tryEntries.length-1;S>=0;--S){var T=this.tryEntries[S];if(T.tryLoc===M){var P=T.completion;if(P.type==="throw"){var F=P.arg;I(T)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(M,S,T){return this.delegate={iterator:j(M),resultName:S,nextLoc:T},this.method==="next"&&(this.arg=m),L}},r}(f.exports);try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}(Po)),Po.exports}var zo,Z0;function Tu(){return Z0||(Z0=1,zo=(f,a)=>`${f}-${a}-${Math.random().toString(16).slice(3,8)}`),zo}var qo,J0;function Xh(){if(J0)return qo;J0=1;const f=Tu();let a=0;return qo=({id:r,action:i,payload:c={}})=>{let u=r;return typeof u>"u"&&(u=f("Job",a),a+=1),{id:u,action:i,payload:c}},qo}var xn={},W0;function _u(){if(W0)return xn;W0=1;let f=!1;return xn.logging=f,xn.setLogging=a=>{f=a},xn.log=(...a)=>f?console.log.apply(this,a):null,xn}var Ho,eh;function Bb(){if(eh)return Ho;eh=1;const f=Xh(),{log:a}=_u(),r=Tu();let i=0;return Ho=()=>{const c=r("Scheduler",i),u={},m={};let h=[];i+=1;const x=()=>h.length,g=()=>Object.keys(u).length,y=()=>{if(h.length!==0){const E=Object.keys(u);for(let A=0;A<E.length;A+=1)if(typeof m[E[A]]>"u"){h[0](u[E[A]]);break}}},w=(E,A)=>new Promise((X,L)=>{const J=f({action:E,payload:A});h.push(async B=>{h.shift(),m[B.id]=J;try{X(await B[E].apply(this,[...A,J.id]))}catch(K){L(K)}finally{delete m[B.id],y()}}),a(`[${c}]: Add ${J.id} to JobQueue`),a(`[${c}]: JobQueue length=${h.length}`),y()});return{addWorker:E=>(u[E.id]=E,a(`[${c}]: Add ${E.id}`),a(`[${c}]: Number of workers=${g()}`),y(),E.id),addJob:async(E,...A)=>{if(g()===0)throw Error(`[${c}]: You need to have at least one worker before adding jobs`);return w(E,A)},terminate:async()=>{Object.keys(u).forEach(async E=>{await u[E].terminate()}),h=[]},getQueueLen:x,getNumWorkers:g}},Ho}function Kh(f){throw new Error('Could not dynamically require "'+f+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yo,th;function Fb(){return th||(th=1,Yo=f=>{const a={};return typeof WorkerGlobalScope<"u"?a.type="webworker":typeof document=="object"?a.type="browser":typeof process=="object"&&typeof Kh=="function"&&(a.type="node"),typeof f>"u"?a:a[f]}),Yo}var Go,ah;function Pb(){if(ah)return Go;ah=1;const a=Fb()("type")==="browser"?r=>new URL(r,window.location.href).href:r=>r;return Go=r=>{const i={...r};return["corePath","workerPath","langPath"].forEach(c=>{r[c]&&(i[c]=a(i[c]))}),i},Go}var Xo,sh;function Qh(){return sh||(sh=1,Xo={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Xo}const zb="6.0.1",qb={version:zb};var Ko,rh;function Hb(){return rh||(rh=1,Ko={workerBlobURL:!0,logger:()=>{}}),Ko}var Qo,nh;function Yb(){if(nh)return Qo;nh=1;const f=qb.version;return Qo={...Hb(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${f}/dist/worker.min.js`},Qo}var Zo,ih;function Gb(){return ih||(ih=1,Zo=({workerPath:f,workerBlobURL:a})=>{let r;if(Blob&&URL&&a){const i=new Blob([`importScripts("${f}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(i))}else r=new Worker(f);return r}),Zo}var Jo,lh;function Xb(){return lh||(lh=1,Jo=f=>{f.terminate()}),Jo}var Wo,ch;function Kb(){return ch||(ch=1,Wo=(f,a)=>{f.onmessage=({data:r})=>{a(r)}}),Wo}var eu,oh;function Qb(){return oh||(oh=1,eu=async(f,a)=>{f.postMessage(a)}),eu}var tu,uh;function Zb(){if(uh)return tu;uh=1;const f=r=>new Promise((i,c)=>{const u=new FileReader;u.onload=()=>{i(u.result)},u.onerror=({target:{error:{code:m}}})=>{c(Error(`File could not be read! Code=${m}`))},u.readAsArrayBuffer(r)}),a=async r=>{let i=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?i=atob(r.split(",")[1]).split("").map(c=>c.charCodeAt(0)):i=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(i=await a(r.src)),r.tagName==="VIDEO"&&(i=await a(r.poster)),r.tagName==="CANVAS"&&await new Promise(c=>{r.toBlob(async u=>{i=await f(u),c()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){const c=await r.convertToBlob();i=await f(c)}else(r instanceof File||r instanceof Blob)&&(i=await f(r));return new Uint8Array(i)};return tu=a,tu}var au,dh;function Jb(){if(dh)return au;dh=1;const f=Yb(),a=Gb(),r=Xb(),i=Kb(),c=Qb(),u=Zb();return au={defaultOptions:f,spawnWorker:a,terminateWorker:r,onMessage:i,send:c,loadImage:u},au}var su,fh;function Zh(){if(fh)return su;fh=1;const f=Pb(),a=Xh(),{log:r}=_u(),i=Tu(),c=Qh(),{defaultOptions:u,spawnWorker:m,terminateWorker:h,onMessage:x,loadImage:g,send:y}=Jb();let w=0;return su=async(D="eng",b=c.LSTM_ONLY,N={},E={})=>{const A=i("Worker",w),{logger:X,errorHandler:L,...J}=f({...u,...N}),B={},K=typeof D=="string"?D.split("+"):D;let ne=b,he=E;const ie=[c.DEFAULT,c.LSTM_ONLY].includes(b)&&!J.legacyCore;let ee,Ce;const W=new Promise((oe,ge)=>{Ce=oe,ee=ge}),ve=oe=>{ee(oe.message)};let te=m(J);te.onerror=ve,w+=1;const fe=({id:oe,action:ge,payload:_e})=>new Promise((Ze,be)=>{r(`[${A}]: Start ${oe}, action=${ge}`);const et=`${ge}-${oe}`;B[et]={resolve:Ze,reject:be},y(te,{workerId:A,jobId:oe,action:ge,payload:_e})}),I=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),_=oe=>fe(a({id:oe,action:"load",payload:{options:{lstmOnly:ie,corePath:J.corePath,logging:J.logging}}})),j=(oe,ge,_e)=>fe(a({id:_e,action:"FS",payload:{method:"writeFile",args:[oe,ge]}})),z=(oe,ge)=>fe(a({id:ge,action:"FS",payload:{method:"readFile",args:[oe,{encoding:"utf8"}]}})),M=(oe,ge)=>fe(a({id:ge,action:"FS",payload:{method:"unlink",args:[oe]}})),S=(oe,ge,_e)=>fe(a({id:_e,action:"FS",payload:{method:oe,args:ge}})),T=(oe,ge)=>fe(a({id:ge,action:"loadLanguage",payload:{langs:oe,options:{langPath:J.langPath,dataPath:J.dataPath,cachePath:J.cachePath,cacheMethod:J.cacheMethod,gzip:J.gzip,lstmOnly:[c.DEFAULT,c.LSTM_ONLY].includes(ne)&&!J.legacyLang}}})),P=(oe,ge,_e,Ze)=>fe(a({id:Ze,action:"initialize",payload:{langs:oe,oem:ge,config:_e}})),F=(oe="eng",ge,_e,Ze)=>{if(ie&&[c.TESSERACT_ONLY,c.TESSERACT_LSTM_COMBINED].includes(ge))throw Error("Legacy model requested but code missing.");const be=ge||ne;ne=be;const et=_e||he;he=et;const hr=(typeof oe=="string"?oe.split("+"):oe).filter(It=>!K.includes(It));return K.push(...hr),hr.length>0?T(hr,Ze).then(()=>P(oe,be,et,Ze)):P(oe,be,et,Ze)},Z=(oe={},ge)=>fe(a({id:ge,action:"setParameters",payload:{params:oe}})),se=async(oe,ge={},_e={text:!0},Ze)=>fe(a({id:Ze,action:"recognize",payload:{image:await g(oe),options:ge,output:_e}})),ae=async(oe,ge)=>{if(ie)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return fe(a({id:ge,action:"detect",payload:{image:await g(oe)}}))},Re=async()=>(te!==null&&(h(te),te=null),Promise.resolve());x(te,({workerId:oe,jobId:ge,status:_e,action:Ze,data:be})=>{const et=`${Ze}-${ge}`;if(_e==="resolve")r(`[${oe}]: Complete ${ge}`),B[et].resolve({jobId:ge,data:be}),delete B[et];else if(_e==="reject")if(B[et].reject(be),delete B[et],Ze==="load"&&ee(be),L)L(be);else throw Error(be);else _e==="progress"&&X({...be,userJobId:ge})});const xe={id:A,worker:te,load:I,writeText:j,readText:z,removeFile:M,FS:S,reinitialize:F,setParameters:Z,recognize:se,detect:ae,terminate:Re};return _().then(()=>T(D)).then(()=>P(D,b,E)).then(()=>Ce(xe)).catch(()=>{}),W},su}var ru,mh;function Wb(){if(mh)return ru;mh=1;const f=Zh();return ru={recognize:async(i,c,u)=>{const m=await f(c,1,u);return m.recognize(i).finally(async()=>{await m.terminate()})},detect:async(i,c)=>{const u=await f("osd",0,c);return u.detect(i).finally(async()=>{await u.terminate()})}},ru}var nu,hh;function ey(){return hh||(hh=1,nu={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),nu}var iu,xh;function ty(){return xh||(xh=1,iu={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),iu}var lu,gh;function ay(){if(gh)return lu;gh=1,$b();const f=Bb(),a=Zh(),r=Wb(),i=ey(),c=Qh(),u=ty(),{setLogging:m}=_u();return lu={languages:i,OEM:c,PSM:u,createScheduler:f,createWorker:a,setLogging:m,...r},lu}var ph=ay();function sy(){const[f,a]=G.useState([]);G.useEffect(()=>{const m=De.subscribeToNotifications(a);return a(De.getNotifications()),m},[]);const r=m=>{switch(m){case"error":return"🚨";case"warning":return"⚠️";case"success":return"✅";case"info":return"ℹ️";default:return"ℹ️"}},i=m=>{switch(m){case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},c=(m,h)=>{m.handler(),m.type==="dismiss"&&De.dismissNotification(h)},u=m=>{De.dismissNotification(m)};return f.length===0?null:n.jsxs("div",{className:"fixed top-4 right-4 z-50 space-y-2",style:{maxWidth:"400px"},children:[f.slice(0,5).map(m=>n.jsx("div",{className:`border rounded-lg p-4 shadow-lg transition-all duration-300 ${i(m.type)}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("span",{className:"text-lg flex-shrink-0",children:r(m.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium break-words",children:m.message}),m.actions&&m.actions.length>0&&n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:m.actions.map((h,x)=>n.jsx("button",{onClick:()=>c(h,m.id),className:"text-xs px-2 py-1 rounded border border-current hover:bg-current hover:text-white transition-colors",children:h.label},x))})]})]}),n.jsx("button",{onClick:()=>u(m.id),className:"flex-shrink-0 ml-2 text-current hover:opacity-70 transition-opacity","aria-label":"Dismiss notification",children:"✕"})]})},m.id)),f.length>5&&n.jsx("div",{className:"text-center",children:n.jsxs("button",{onClick:()=>De.clearAll(),className:"text-xs text-gray-500 hover:text-gray-700 underline",children:["Clear all (",f.length," total)"]})})]})}function Mn({message:f="Processing...",size:a="md"}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return n.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[n.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${r[a]}`}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:f})]})}class ry extends zh.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,r){console.error("Error Boundary caught an error:",a,r),De.handleCriticalError(a,"React Error Boundary")}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"💥"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"The application encountered an unexpected error. Please refresh the page to continue."}),n.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"Refresh Page"})]})}):this.props.children}}class ny{constructor(){le(this,"steps",[]);le(this,"listeners",[])}addStep(a){this.steps.push({...a,status:"pending"}),this.notifyListeners()}updateStep(a,r){const i=this.steps.findIndex(c=>c.id===a);i!==-1&&(this.steps[i]={...this.steps[i],...r},this.notifyListeners())}startStep(a,r){this.updateStep(a,{status:"in_progress",details:r,progress:0})}updateProgress(a,r,i){this.updateStep(a,{progress:r,details:i})}completeStep(a,r){this.updateStep(a,{status:"completed",progress:100,details:r})}failStep(a,r){this.updateStep(a,{status:"failed",error:r})}getSteps(){return[...this.steps]}clear(){this.steps=[],this.notifyListeners()}subscribe(a){return this.listeners.push(a),()=>{this.listeners=this.listeners.filter(r=>r!==a)}}notifyListeners(){this.listeners.forEach(a=>a(this.steps))}}const qt=new ny;class iy{validateVIN(a){const r=[],i=[];if(!a)return r.push({field:"vin",message:"VIN is required",value:a,severity:"error"}),{isValid:!1,errors:r,warnings:i};const c=a.replace(/\s/g,"").toUpperCase();c.length!==17&&r.push({field:"vin",message:`VIN must be exactly 17 characters, got ${c.length}`,value:a,severity:"error"});const u=c.match(/[IOQ]/g);return u&&r.push({field:"vin",message:`VIN contains invalid characters: ${u.join(", ")}. VINs cannot contain I, O, or Q`,value:a,severity:"error"}),/^[A-HJ-NPR-Z0-9]{17}$/.test(c)||r.push({field:"vin",message:"VIN contains invalid characters. Only letters and numbers allowed (no I, O, Q)",value:a,severity:"error"}),c.length===17&&(this.validateVINCheckDigit(c)||i.push({field:"vin",message:"VIN check digit validation failed. Please verify VIN is correct",value:a,suggestion:"Double-check the VIN against the vehicle title or registration"})),{isValid:r.length===0,errors:r,warnings:i}}validateMedicalCertificate(a){const r=[],i=[];a.certificateNumber?/^[A-Z0-9]{8,20}$/i.test(a.certificateNumber)||i.push({field:"certificateNumber",message:"Medical certificate number format may be incorrect",value:a.certificateNumber,suggestion:"Certificate numbers are typically 8-20 alphanumeric characters"}):r.push({field:"certificateNumber",message:"Medical certificate number is required",value:a.certificateNumber,severity:"error"});const c=this.validateDateFields(a,[{field:"issuedDate",required:!0,label:"Issue Date"},{field:"expirationDate",required:!0,label:"Expiration Date"}]);if(r.push(...c.errors),i.push(...c.warnings),a.issuedDate&&a.expirationDate){const u=new Date(a.issuedDate),m=new Date(a.expirationDate);m<=u&&r.push({field:"expirationDate",message:"Expiration date must be after issue date",value:a.expirationDate,severity:"error"}),Math.floor((m.getTime()-u.getTime())/(1e3*60*60*24))>730&&i.push({field:"expirationDate",message:"Medical certificate validity period seems unusually long",value:a.expirationDate,suggestion:"Standard medical certificates are valid for up to 2 years"})}return a.examinerName?/^(Dr\.?\s+)?[A-Z][a-z]+\s+[A-Z][a-z]+/i.test(a.examinerName)||i.push({field:"examinerName",message:"Examiner name format may be incorrect",value:a.examinerName,suggestion:'Format should be "Dr. First Last" or "First Last"'}):r.push({field:"examinerName",message:"Medical examiner name is required",value:a.examinerName,severity:"error"}),a.examinerNationalRegistry&&!/^[A-Z0-9]{6,12}$/i.test(a.examinerNationalRegistry)&&i.push({field:"examinerNationalRegistry",message:"National Registry number format may be incorrect",value:a.examinerNationalRegistry,suggestion:"Registry numbers are typically 6-12 alphanumeric characters"}),{isValid:r.length===0,errors:r,warnings:i}}validateCDL(a){const r=[],i=[];a.cdlNumber?/^[A-Z0-9\-]{8,20}$/i.test(a.cdlNumber)||i.push({field:"cdlNumber",message:"CDL number format may be incorrect",value:a.cdlNumber,suggestion:"CDL numbers vary by state but are typically 8-20 characters"}):r.push({field:"cdlNumber",message:"CDL number is required",value:a.cdlNumber,severity:"error"}),a.cdlClass?["A","B","C"].includes(a.cdlClass.toUpperCase())||r.push({field:"cdlClass",message:"CDL class must be A, B, or C",value:a.cdlClass,severity:"error"}):r.push({field:"cdlClass",message:"CDL class is required",value:a.cdlClass,severity:"error"}),a.cdlState?this.isValidUSState(a.cdlState)||r.push({field:"cdlState",message:"Invalid US state code",value:a.cdlState,severity:"error"}):r.push({field:"cdlState",message:"CDL issuing state is required",value:a.cdlState,severity:"error"});const c=this.validateDateFields(a,[{field:"cdlIssueDate",required:!1,label:"Issue Date"},{field:"cdlExpirationDate",required:!0,label:"Expiration Date"}]);if(r.push(...c.errors),i.push(...c.warnings),a.cdlEndorsements&&Array.isArray(a.cdlEndorsements)){const u=["H","N","P","S","T","X"],m=a.cdlEndorsements.filter(h=>!u.includes(h.toUpperCase()));m.length>0&&i.push({field:"cdlEndorsements",message:`Unknown endorsements: ${m.join(", ")}`,value:a.cdlEndorsements,suggestion:"Valid endorsements are: H, N, P, S, T, X"})}return{isValid:r.length===0,errors:r,warnings:i}}validateDriverInfo(a){const r=[],i=[];if(a.firstName?/^[A-Za-z\s\-']{1,50}$/.test(a.firstName)||r.push({field:"firstName",message:"First name contains invalid characters",value:a.firstName,severity:"error"}):r.push({field:"firstName",message:"First name is required",value:a.firstName,severity:"error"}),a.lastName?/^[A-Za-z\s\-']{1,50}$/.test(a.lastName)||r.push({field:"lastName",message:"Last name contains invalid characters",value:a.lastName,severity:"error"}):r.push({field:"lastName",message:"Last name is required",value:a.lastName,severity:"error"}),a.employeeId?/^[A-Z0-9]{3,20}$/i.test(a.employeeId)||i.push({field:"employeeId",message:"Employee ID format may be non-standard",value:a.employeeId,suggestion:"Employee IDs are typically 3-20 alphanumeric characters"}):r.push({field:"employeeId",message:"Employee ID is required",value:a.employeeId,severity:"error"}),a.dateOfBirth){const c=this.validateDateOfBirth(a.dateOfBirth);r.push(...c.errors),i.push(...c.warnings)}if(a.email){const c=this.validateEmail(a.email);r.push(...c.errors),i.push(...c.warnings)}if(a.phone){const c=this.validatePhone(a.phone);i.push(...c.warnings)}return{isValid:r.length===0,errors:r,warnings:i}}validateVehicleRegistration(a){const r=[],i=[];a.licensePlate?/^[A-Z0-9\-\s]{2,8}$/i.test(a.licensePlate)||i.push({field:"licensePlate",message:"License plate format may be incorrect",value:a.licensePlate,suggestion:"License plates are typically 2-8 alphanumeric characters"}):r.push({field:"licensePlate",message:"License plate is required",value:a.licensePlate,severity:"error"});const c=this.validateDateFields(a,[{field:"registrationExpiry",required:!0,label:"Registration Expiry"}]);if(r.push(...c.errors),i.push(...c.warnings),a.registrationState&&!this.isValidUSState(a.registrationState)&&r.push({field:"registrationState",message:"Invalid US state code",value:a.registrationState,severity:"error"}),a.year){const u=new Date().getFullYear();(a.year<1990||a.year>u+1)&&i.push({field:"year",message:`Vehicle year ${a.year} seems unusual`,value:a.year,suggestion:`Expected range: 1990-${u+1}`})}return{isValid:r.length===0,errors:r,warnings:i}}validateInsuranceData(a){const r=[],i=[];a.policyNumber||r.push({field:"policyNumber",message:"Insurance policy number is required",value:a.policyNumber,severity:"error"});const c=this.validateDateFields(a,[{field:"insuranceExpiry",required:!0,label:"Insurance Expiry"}]);return r.push(...c.errors),i.push(...c.warnings),a.coverageAmount&&(typeof a.coverageAmount!="number"||a.coverageAmount<0?r.push({field:"coverageAmount",message:"Coverage amount must be a positive number",value:a.coverageAmount,severity:"error"}):a.coverageAmount<75e4&&i.push({field:"coverageAmount",message:"Coverage amount may be below DOT requirements",value:a.coverageAmount,suggestion:"Commercial vehicles typically require $750,000+ liability coverage"})),{isValid:r.length===0,errors:r,warnings:i}}validateDateFields(a,r){const i=[],c=[];return r.forEach(({field:u,required:m,label:h})=>{const x=a[u];if(!x&&m){i.push({field:u,message:`${h} is required`,value:x,severity:"error"});return}if(x)if(!this.validateDate(String(x)).isValid)i.push({field:u,message:`${h} is not a valid date`,value:x,severity:"error"});else{const y=new Date(String(x)),w=new Date;(u.includes("expir")||u.includes("Expir"))&&y<w&&c.push({field:u,message:`${h} appears to be in the past`,value:x,suggestion:"Expired documents may need renewal"})}}),{isValid:i.length===0,errors:i,warnings:c}}validateDate(a){const r=[];if(!a)return{isValid:!1,errors:[{field:"date",message:"Date is required",value:a,severity:"error"}],warnings:[]};const i=new Date(a);return isNaN(i.getTime())&&r.push({field:"date",message:"Invalid date format",value:a,severity:"error"}),{isValid:r.length===0,errors:r,warnings:[]}}validateDateOfBirth(a){const r=[],i=[],c=this.validateDate(a);if(!c.isValid)return c;const u=new Date(a),h=Math.floor((new Date().getTime()-u.getTime())/(1e3*60*60*24*365.25));return h<18?r.push({field:"dateOfBirth",message:"Driver must be at least 18 years old",value:a,severity:"error"}):h<21&&i.push({field:"dateOfBirth",message:"Driver is under 21 - interstate restrictions may apply",value:a,suggestion:"Check interstate driving restrictions for drivers under 21"}),h>100&&i.push({field:"dateOfBirth",message:"Age seems unusually high",value:a,suggestion:"Please verify date of birth"}),{isValid:r.length===0,errors:r,warnings:i}}validateEmail(a){const r=[],i=[];return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||r.push({field:"email",message:"Invalid email format",value:a,severity:"error"}),{isValid:r.length===0,errors:r,warnings:i}}validatePhone(a){const r=[],i=a.replace(/\D/g,"");return i.length!==10&&i.length!==11&&r.push({field:"phone",message:"Phone number format may be incorrect",value:a,suggestion:"Use format: (555) 123-4567 or 555-123-4567"}),{isValid:!0,errors:[],warnings:r}}validateVINCheckDigit(a){const r=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],i={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9};let c=0;for(let h=0;h<17;h++){if(h===8)continue;const x=a[h],g=isNaN(parseInt(x))?i[x]||0:parseInt(x);c+=g*r[h]}const u=c%11,m=u===10?"X":u.toString();return a[8]===m}isValidUSState(a){return["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","DC"].includes(a.toUpperCase())}validateDriverRecord(a){const r=[],i=[],c=this.validateDriverInfo(a);if(r.push(...c.errors),i.push(...c.warnings),a.medicalCertificate&&typeof a.medicalCertificate=="object"&&a.medicalCertificate!==null){const u=this.validateMedicalCertificate(a.medicalCertificate);r.push(...u.errors),i.push(...u.warnings)}if(a.cdlInfo&&typeof a.cdlInfo=="object"&&a.cdlInfo!==null){const u=this.validateCDL(a.cdlInfo);r.push(...u.errors),i.push(...u.warnings)}return{isValid:r.length===0,errors:r,warnings:i}}validateVehicleRecord(a){const r=[],i=[];if(a.vin&&typeof a.vin=="string"){const u=this.validateVIN(a.vin);r.push(...u.errors),i.push(...u.warnings)}const c=this.validateVehicleRegistration(a);if(r.push(...c.errors),i.push(...c.warnings),a.insuranceCarrier||a.policyNumber||a.insuranceExpiry){const u=this.validateInsuranceData(a);r.push(...u.errors),i.push(...u.warnings)}return{isValid:r.length===0,errors:r,warnings:i}}handleValidationResults(a,r){a.isValid||a.errors.forEach(i=>{De.handleValidationError(i.field,i.value,[i.message])}),a.warnings.forEach(i=>{De.showInfo(`${i.field}: ${i.message}${i.suggestion?` (${i.suggestion})`:""}`,5e3)}),a.isValid&&a.warnings.length===0&&De.showSuccess(`${r} validation passed!`)}}const Zi=new iy;function pe(f,a,r,i,c){if(typeof a=="function"?f!==a||!0:!a.has(f))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a.set(f,r),r}function Q(f,a,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?f!==a||!i:!a.has(f))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(f):i?i.value:a.get(f)}let Jh=function(){const{crypto:f}=globalThis;if(f!=null&&f.randomUUID)return Jh=f.randomUUID.bind(f),f.randomUUID();const a=new Uint8Array(1),r=f?()=>f.getRandomValues(a)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^r()&15>>+i/4).toString(16))};function On(f){return typeof f=="object"&&f!==null&&("name"in f&&f.name==="AbortError"||"message"in f&&String(f.message).includes("FetchRequestCanceledException"))}const wu=f=>{if(f instanceof Error)return f;if(typeof f=="object"&&f!==null){try{if(Object.prototype.toString.call(f)==="[object Error]"){const a=new Error(f.message,f.cause?{cause:f.cause}:{});return f.stack&&(a.stack=f.stack),f.cause&&!a.cause&&(a.cause=f.cause),f.name&&(a.name=f.name),a}}catch{}try{return new Error(JSON.stringify(f))}catch{}}return new Error(f)};class Se extends Error{}class mt extends Se{constructor(a,r,i,c){super(`${mt.makeMessage(a,r,i)}`),this.status=a,this.headers=c,this.requestID=c==null?void 0:c.get("request-id"),this.error=r}static makeMessage(a,r,i){const c=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):i;return a&&c?`${a} ${c}`:a?`${a} status code (no body)`:c||"(no status code or body)"}static generate(a,r,i,c){if(!a||!c)return new Nl({message:i,cause:wu(r)});const u=r;return a===400?new ex(a,u,i,c):a===401?new tx(a,u,i,c):a===403?new ax(a,u,i,c):a===404?new sx(a,u,i,c):a===409?new rx(a,u,i,c):a===422?new nx(a,u,i,c):a===429?new ix(a,u,i,c):a>=500?new lx(a,u,i,c):new mt(a,u,i,c)}}class Jt extends mt{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class Nl extends mt{constructor({message:a,cause:r}){super(void 0,void 0,a||"Connection error.",void 0),r&&(this.cause=r)}}class Wh extends Nl{constructor({message:a}={}){super({message:a??"Request timed out."})}}class ex extends mt{}class tx extends mt{}class ax extends mt{}class sx extends mt{}class rx extends mt{}class nx extends mt{}class ix extends mt{}class lx extends mt{}const ly=/^[a-z][a-z0-9+.-]*:/i,cy=f=>ly.test(f);let ju=f=>(ju=Array.isArray,ju(f)),bh=ju;function yh(f){return typeof f!="object"?{}:f??{}}function oy(f){if(!f)return!0;for(const a in f)return!1;return!0}function uy(f,a){return Object.prototype.hasOwnProperty.call(f,a)}const dy=(f,a)=>{if(typeof a!="number"||!Number.isInteger(a))throw new Se(`${f} must be an integer`);if(a<0)throw new Se(`${f} must be a positive integer`);return a},cx=f=>{try{return JSON.parse(f)}catch{return}},fy=f=>new Promise(a=>setTimeout(a,f)),or="0.57.0",my=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function hy(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xy=()=>{var r;const f=hy();if(f==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":or,"X-Stainless-OS":Nh(Deno.build.os),"X-Stainless-Arch":vh(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((r=Deno.version)==null?void 0:r.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":or,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(f==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":or,"X-Stainless-OS":Nh(globalThis.process.platform??"unknown"),"X-Stainless-Arch":vh(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const a=gy();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":or,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":or,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function gy(){if(typeof navigator>"u"||!navigator)return null;const f=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:a,pattern:r}of f){const i=r.exec(navigator.userAgent);if(i){const c=i[1]||0,u=i[2]||0,m=i[3]||0;return{browser:a,version:`${c}.${u}.${m}`}}}return null}const vh=f=>f==="x32"?"x32":f==="x86_64"||f==="x64"?"x64":f==="arm"?"arm":f==="aarch64"||f==="arm64"?"arm64":f?`other:${f}`:"unknown",Nh=f=>(f=f.toLowerCase(),f.includes("ios")?"iOS":f==="android"?"Android":f==="darwin"?"MacOS":f==="win32"?"Windows":f==="freebsd"?"FreeBSD":f==="openbsd"?"OpenBSD":f==="linux"?"Linux":f?`Other:${f}`:"Unknown");let Sh;const py=()=>Sh??(Sh=xy());function by(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ox(...f){const a=globalThis.ReadableStream;if(typeof a>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new a(...f)}function ux(f){let a=Symbol.asyncIterator in f?f[Symbol.asyncIterator]():f[Symbol.iterator]();return ox({start(){},async pull(r){const{done:i,value:c}=await a.next();i?r.close():r.enqueue(c)},async cancel(){var r;await((r=a.return)==null?void 0:r.call(a))}})}function Mu(f){if(f[Symbol.asyncIterator])return f;const a=f.getReader();return{async next(){try{const r=await a.read();return r!=null&&r.done&&a.releaseLock(),r}catch(r){throw a.releaseLock(),r}},async return(){const r=a.cancel();return a.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function yy(f){var i,c;if(f===null||typeof f!="object")return;if(f[Symbol.asyncIterator]){await((c=(i=f[Symbol.asyncIterator]()).return)==null?void 0:c.call(i));return}const a=f.getReader(),r=a.cancel();a.releaseLock(),await r}const vy=({headers:f,body:a})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(a)});function Ny(f){let a=0;for(const c of f)a+=c.length;const r=new Uint8Array(a);let i=0;for(const c of f)r.set(c,i),i+=c.length;return r}let wh;function Ou(f){let a;return(wh??(a=new globalThis.TextEncoder,wh=a.encode.bind(a)))(f)}let jh;function Eh(f){let a;return(jh??(a=new globalThis.TextDecoder,jh=a.decode.bind(a)))(f)}var Tt,_t;class In{constructor(){Tt.set(this,void 0),_t.set(this,void 0),pe(this,Tt,new Uint8Array),pe(this,_t,null)}decode(a){if(a==null)return[];const r=a instanceof ArrayBuffer?new Uint8Array(a):typeof a=="string"?Ou(a):a;pe(this,Tt,Ny([Q(this,Tt,"f"),r]));const i=[];let c;for(;(c=Sy(Q(this,Tt,"f"),Q(this,_t,"f")))!=null;){if(c.carriage&&Q(this,_t,"f")==null){pe(this,_t,c.index);continue}if(Q(this,_t,"f")!=null&&(c.index!==Q(this,_t,"f")+1||c.carriage)){i.push(Eh(Q(this,Tt,"f").subarray(0,Q(this,_t,"f")-1))),pe(this,Tt,Q(this,Tt,"f").subarray(Q(this,_t,"f"))),pe(this,_t,null);continue}const u=Q(this,_t,"f")!==null?c.preceding-1:c.preceding,m=Eh(Q(this,Tt,"f").subarray(0,u));i.push(m),pe(this,Tt,Q(this,Tt,"f").subarray(c.index)),pe(this,_t,null)}return i}flush(){return Q(this,Tt,"f").length?this.decode(`
`):[]}}Tt=new WeakMap,_t=new WeakMap;In.NEWLINE_CHARS=new Set([`
`,"\r"]);In.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Sy(f,a){for(let c=a??0;c<f.length;c++){if(f[c]===10)return{preceding:c,index:c+1,carriage:!1};if(f[c]===13)return{preceding:c,index:c+1,carriage:!0}}return null}function wy(f){for(let i=0;i<f.length-1;i++){if(f[i]===10&&f[i+1]===10||f[i]===13&&f[i+1]===13)return i+2;if(f[i]===13&&f[i+1]===10&&i+3<f.length&&f[i+2]===13&&f[i+3]===10)return i+4}return-1}const bl={off:0,error:200,warn:300,info:400,debug:500},Dh=(f,a,r)=>{if(f){if(uy(bl,f))return f;xt(r).warn(`${a} was set to ${JSON.stringify(f)}, expected one of ${JSON.stringify(Object.keys(bl))}`)}};function An(){}function Ji(f,a,r){return!a||bl[f]>bl[r]?An:a[f].bind(a)}const jy={error:An,warn:An,info:An,debug:An};let Rh=new WeakMap;function xt(f){const a=f.logger,r=f.logLevel??"off";if(!a)return jy;const i=Rh.get(a);if(i&&i[0]===r)return i[1];const c={error:Ji("error",a,r),warn:Ji("warn",a,r),info:Ji("info",a,r),debug:Ji("debug",a,r)};return Rh.set(a,[r,c]),c}const ys=f=>(f.options&&(f.options={...f.options},delete f.options.headers),f.headers&&(f.headers=Object.fromEntries((f.headers instanceof Headers?[...f.headers]:Object.entries(f.headers)).map(([a,r])=>[a,a.toLowerCase()==="x-api-key"||a.toLowerCase()==="authorization"||a.toLowerCase()==="cookie"||a.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in f&&(f.retryOfRequestLogID&&(f.retryOf=f.retryOfRequestLogID),delete f.retryOfRequestLogID),f);var gn;class ia{constructor(a,r,i){this.iterator=a,gn.set(this,void 0),this.controller=r,pe(this,gn,i)}static fromSSEResponse(a,r,i){let c=!1;const u=i?xt(i):console;async function*m(){if(c)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let h=!1;try{for await(const x of Ey(a,r)){if(x.event==="completion")try{yield JSON.parse(x.data)}catch(g){throw u.error("Could not parse message into JSON:",x.data),u.error("From chunk:",x.raw),g}if(x.event==="message_start"||x.event==="message_delta"||x.event==="message_stop"||x.event==="content_block_start"||x.event==="content_block_delta"||x.event==="content_block_stop")try{yield JSON.parse(x.data)}catch(g){throw u.error("Could not parse message into JSON:",x.data),u.error("From chunk:",x.raw),g}if(x.event!=="ping"&&x.event==="error")throw new mt(void 0,cx(x.data)??x.data,void 0,a.headers)}h=!0}catch(x){if(On(x))return;throw x}finally{h||r.abort()}}return new ia(m,r,i)}static fromReadableStream(a,r,i){let c=!1;async function*u(){const h=new In,x=Mu(a);for await(const g of x)for(const y of h.decode(g))yield y;for(const g of h.flush())yield g}async function*m(){if(c)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let h=!1;try{for await(const x of u())h||x&&(yield JSON.parse(x));h=!0}catch(x){if(On(x))return;throw x}finally{h||r.abort()}}return new ia(m,r,i)}[(gn=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const a=[],r=[],i=this.iterator(),c=u=>({next:()=>{if(u.length===0){const m=i.next();a.push(m),r.push(m)}return u.shift()}});return[new ia(()=>c(a),this.controller,Q(this,gn,"f")),new ia(()=>c(r),this.controller,Q(this,gn,"f"))]}toReadableStream(){const a=this;let r;return ox({async start(){r=a[Symbol.asyncIterator]()},async pull(i){try{const{value:c,done:u}=await r.next();if(u)return i.close();const m=Ou(JSON.stringify(c)+`
`);i.enqueue(m)}catch(c){i.error(c)}},async cancel(){var i;await((i=r.return)==null?void 0:i.call(r))}})}}async function*Ey(f,a){if(!f.body)throw a.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Se("Attempted to iterate over a response with no body");const r=new Ry,i=new In,c=Mu(f.body);for await(const u of Dy(c))for(const m of i.decode(u)){const h=r.decode(m);h&&(yield h)}for(const u of i.flush()){const m=r.decode(u);m&&(yield m)}}async function*Dy(f){let a=new Uint8Array;for await(const r of f){if(r==null)continue;const i=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?Ou(r):r;let c=new Uint8Array(a.length+i.length);c.set(a),c.set(i,a.length),a=c;let u;for(;(u=wy(a))!==-1;)yield a.slice(0,u),a=a.slice(u)}a.length>0&&(yield a)}class Ry{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(a){if(a.endsWith("\r")&&(a=a.substring(0,a.length-1)),!a){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(a),a.startsWith(":"))return null;let[r,i,c]=Ay(a,":");return c.startsWith(" ")&&(c=c.substring(1)),r==="event"?this.event=c:r==="data"&&this.data.push(c),null}}function Ay(f,a){const r=f.indexOf(a);return r!==-1?[f.substring(0,r),a,f.substring(r+a.length)]:[f,"",""]}async function dx(f,a){const{response:r,requestLogID:i,retryOfRequestLogID:c,startTime:u}=a,m=await(async()=>{var w;if(a.options.stream)return xt(f).debug("response",r.status,r.url,r.headers,r.body),a.options.__streamClass?a.options.__streamClass.fromSSEResponse(r,a.controller):ia.fromSSEResponse(r,a.controller);if(r.status===204)return null;if(a.options.__binaryResponse)return r;const h=r.headers.get("content-type"),x=(w=h==null?void 0:h.split(";")[0])==null?void 0:w.trim();if((x==null?void 0:x.includes("application/json"))||(x==null?void 0:x.endsWith("+json"))){const D=await r.json();return fx(D,r)}return await r.text()})();return xt(f).debug(`[${i}] response parsed`,ys({retryOfRequestLogID:c,url:r.url,status:r.status,body:m,durationMs:Date.now()-u})),m}function fx(f,a){return!f||typeof f!="object"||Array.isArray(f)?f:Object.defineProperty(f,"_request_id",{value:a.headers.get("request-id"),enumerable:!1})}var Cn;class Sl extends Promise{constructor(a,r,i=dx){super(c=>{c(null)}),this.responsePromise=r,this.parseResponse=i,Cn.set(this,void 0),pe(this,Cn,a)}_thenUnwrap(a){return new Sl(Q(this,Cn,"f"),this.responsePromise,async(r,i)=>fx(a(await this.parseResponse(r,i),i),i.response))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){const[a,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:r,request_id:r.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(Q(this,Cn,"f"),a))),this.parsedPromise}then(a,r){return this.parse().then(a,r)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}Cn=new WeakMap;var Wi;class Cy{constructor(a,r,i,c){Wi.set(this,void 0),pe(this,Wi,a),this.options=c,this.response=r,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const a=this.nextPageRequestOptions();if(!a)throw new Se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Q(this,Wi,"f").requestAPIList(this.constructor,a)}async*iterPages(){let a=this;for(yield a;a.hasNextPage();)a=await a.getNextPage(),yield a}async*[(Wi=new WeakMap,Symbol.asyncIterator)](){for await(const a of this.iterPages())for(const r of a.getPaginatedItems())yield r}}class Ty extends Sl{constructor(a,r,i){super(a,r,async(c,u)=>new i(c,u.response,await dx(c,u),u.options))}async*[Symbol.asyncIterator](){const a=await this;for await(const r of a)yield r}}class Un extends Cy{constructor(a,r,i,c){super(a,r,i,c),this.data=i.data||[],this.has_more=i.has_more||!1,this.first_id=i.first_id||null,this.last_id=i.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;if((r=this.options.query)!=null&&r.before_id){const i=this.first_id;return i?{...this.options,query:{...yh(this.options.query),before_id:i}}:null}const a=this.last_id;return a?{...this.options,query:{...yh(this.options.query),after_id:a}}:null}}const mx=()=>{var f;if(typeof File>"u"){const{process:a}=globalThis,r=typeof((f=a==null?void 0:a.versions)==null?void 0:f.node)=="string"&&parseInt(a.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function dr(f,a,r){return mx(),new File(f,a??"unknown_file",r)}function gl(f){return(typeof f=="object"&&f!==null&&("name"in f&&f.name&&String(f.name)||"url"in f&&f.url&&String(f.url)||"filename"in f&&f.filename&&String(f.filename)||"path"in f&&f.path&&String(f.path))||"").split(/[\\/]/).pop()||void 0}const hx=f=>f!=null&&typeof f=="object"&&typeof f[Symbol.asyncIterator]=="function",_y=async(f,a)=>({...f,body:await Oy(f.body,a)}),Ah=new WeakMap;function My(f){const a=typeof f=="function"?f:f.fetch,r=Ah.get(a);if(r)return r;const i=(async()=>{try{const c="Response"in a?a.Response:(await a("data:,")).constructor,u=new FormData;return u.toString()!==await new c(u).text()}catch{return!0}})();return Ah.set(a,i),i}const Oy=async(f,a)=>{if(!await My(a))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(f||{}).map(([i,c])=>Eu(r,i,c))),r},Iy=f=>f instanceof Blob&&"name"in f,Eu=async(f,a,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${a}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")f.append(a,String(r));else if(r instanceof Response){let i={};const c=r.headers.get("Content-Type");c&&(i={type:c}),f.append(a,dr([await r.blob()],gl(r),i))}else if(hx(r))f.append(a,dr([await new Response(ux(r)).blob()],gl(r)));else if(Iy(r))f.append(a,dr([r],gl(r),{type:r.type}));else if(Array.isArray(r))await Promise.all(r.map(i=>Eu(f,a+"[]",i)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([i,c])=>Eu(f,`${a}[${i}]`,c)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},xx=f=>f!=null&&typeof f=="object"&&typeof f.size=="number"&&typeof f.type=="string"&&typeof f.text=="function"&&typeof f.slice=="function"&&typeof f.arrayBuffer=="function",Uy=f=>f!=null&&typeof f=="object"&&typeof f.name=="string"&&typeof f.lastModified=="number"&&xx(f),Ly=f=>f!=null&&typeof f=="object"&&typeof f.url=="string"&&typeof f.blob=="function";async function ky(f,a,r){if(mx(),f=await f,a||(a=gl(f)),Uy(f))return f instanceof File&&a==null&&r==null?f:dr([await f.arrayBuffer()],a??f.name,{type:f.type,lastModified:f.lastModified,...r});if(Ly(f)){const c=await f.blob();return a||(a=new URL(f.url).pathname.split(/[\\/]/).pop()),dr(await Du(c),a,r)}const i=await Du(f);if(!(r!=null&&r.type)){const c=i.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof c=="string"&&(r={...r,type:c})}return dr(i,a,r)}async function Du(f){var r;let a=[];if(typeof f=="string"||ArrayBuffer.isView(f)||f instanceof ArrayBuffer)a.push(f);else if(xx(f))a.push(f instanceof Blob?f:await f.arrayBuffer());else if(hx(f))for await(const i of f)a.push(...await Du(i));else{const i=(r=f==null?void 0:f.constructor)==null?void 0:r.name;throw new Error(`Unexpected data type: ${typeof f}${i?`; constructor: ${i}`:""}${Vy(f)}`)}return a}function Vy(f){return typeof f!="object"||f===null?"":`; props: [${Object.getOwnPropertyNames(f).map(r=>`"${r}"`).join(", ")}]`}class ja{constructor(a){this._client=a}}const gx=Symbol.for("brand.privateNullableHeaders");function*$y(f){if(!f)return;if(gx in f){const{values:i,nulls:c}=f;yield*i.entries();for(const u of c)yield[u,null];return}let a=!1,r;f instanceof Headers?r=f.entries():bh(f)?r=f:(a=!0,r=Object.entries(f??{}));for(let i of r){const c=i[0];if(typeof c!="string")throw new TypeError("expected header name to be a string");const u=bh(i[1])?i[1]:[i[1]];let m=!1;for(const h of u)h!==void 0&&(a&&!m&&(m=!0,yield[c,null]),yield[c,h])}}const Fe=f=>{const a=new Headers,r=new Set;for(const i of f){const c=new Set;for(const[u,m]of $y(i)){const h=u.toLowerCase();c.has(h)||(a.delete(u),c.add(h)),m===null?(a.delete(u),r.add(h)):(a.append(u,m),r.delete(h))}}return{[gx]:!0,values:a,nulls:r}};function px(f){return f.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ch=Object.freeze(Object.create(null)),By=(f=px)=>function(r,...i){if(r.length===1)return r[0];let c=!1;const u=[],m=r.reduce((y,w,D)=>{var E;/[?#]/.test(w)&&(c=!0);const b=i[D];let N=(c?encodeURIComponent:f)(""+b);return D!==i.length&&(b==null||typeof b=="object"&&b.toString===((E=Object.getPrototypeOf(Object.getPrototypeOf(b.hasOwnProperty??Ch)??Ch))==null?void 0:E.toString))&&(N=b+"",u.push({start:y.length+w.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),y+w+(D===i.length?"":N)},""),h=m.split(/[?#]/,1)[0],x=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let g;for(;(g=x.exec(h))!==null;)u.push({start:g.index,length:g[0].length,error:`Value "${g[0]}" can't be safely passed as a path parameter`});if(u.sort((y,w)=>y.start-w.start),u.length>0){let y=0;const w=u.reduce((D,b)=>{const N=" ".repeat(b.start-y),E="^".repeat(b.length);return y=b.start+b.length,D+N+E},"");throw new Se(`Path parameters result in path with invalid segments:
${u.map(D=>D.error).join(`
`)}
${m}
${w}`)}return m},Wt=By(px);class bx extends ja{list(a={},r){const{betas:i,...c}=a??{};return this._client.getAPIList("/v1/files",Un,{query:c,...r,headers:Fe([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r==null?void 0:r.headers])})}delete(a,r={},i){const{betas:c}=r??{};return this._client.delete(Wt`/v1/files/${a}`,{...i,headers:Fe([{"anthropic-beta":[...c??[],"files-api-2025-04-14"].toString()},i==null?void 0:i.headers])})}download(a,r={},i){const{betas:c}=r??{};return this._client.get(Wt`/v1/files/${a}/content`,{...i,headers:Fe([{"anthropic-beta":[...c??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}retrieveMetadata(a,r={},i){const{betas:c}=r??{};return this._client.get(Wt`/v1/files/${a}`,{...i,headers:Fe([{"anthropic-beta":[...c??[],"files-api-2025-04-14"].toString()},i==null?void 0:i.headers])})}upload(a,r){const{betas:i,...c}=a;return this._client.post("/v1/files",_y({body:c,...r,headers:Fe([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r==null?void 0:r.headers])},this._client))}}let yx=class extends ja{retrieve(a,r={},i){const{betas:c}=r??{};return this._client.get(Wt`/v1/models/${a}?beta=true`,{...i,headers:Fe([{...(c==null?void 0:c.toString())!=null?{"anthropic-beta":c==null?void 0:c.toString()}:void 0},i==null?void 0:i.headers])})}list(a={},r){const{betas:i,...c}=a??{};return this._client.getAPIList("/v1/models?beta=true",Un,{query:c,...r,headers:Fe([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},r==null?void 0:r.headers])})}};class wl{constructor(a,r){this.iterator=a,this.controller=r}async*decoder(){const a=new In;for await(const r of this.iterator)for(const i of a.decode(r))yield JSON.parse(i);for(const r of a.flush())yield JSON.parse(r)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(a,r){if(!a.body)throw r.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Se("Attempted to iterate over a response with no body");return new wl(Mu(a.body),r)}}let vx=class extends ja{create(a,r){const{betas:i,...c}=a;return this._client.post("/v1/messages/batches?beta=true",{body:c,...r,headers:Fe([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r==null?void 0:r.headers])})}retrieve(a,r={},i){const{betas:c}=r??{};return this._client.get(Wt`/v1/messages/batches/${a}?beta=true`,{...i,headers:Fe([{"anthropic-beta":[...c??[],"message-batches-2024-09-24"].toString()},i==null?void 0:i.headers])})}list(a={},r){const{betas:i,...c}=a??{};return this._client.getAPIList("/v1/messages/batches?beta=true",Un,{query:c,...r,headers:Fe([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r==null?void 0:r.headers])})}delete(a,r={},i){const{betas:c}=r??{};return this._client.delete(Wt`/v1/messages/batches/${a}?beta=true`,{...i,headers:Fe([{"anthropic-beta":[...c??[],"message-batches-2024-09-24"].toString()},i==null?void 0:i.headers])})}cancel(a,r={},i){const{betas:c}=r??{};return this._client.post(Wt`/v1/messages/batches/${a}/cancel?beta=true`,{...i,headers:Fe([{"anthropic-beta":[...c??[],"message-batches-2024-09-24"].toString()},i==null?void 0:i.headers])})}async results(a,r={},i){const c=await this.retrieve(a);if(!c.results_url)throw new Se(`No batch \`results_url\`; Has it finished processing? ${c.processing_status} - ${c.id}`);const{betas:u}=r??{};return this._client.get(c.results_url,{...i,headers:Fe([{"anthropic-beta":[...u??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},i==null?void 0:i.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((m,h)=>wl.fromResponse(h.response,h.controller))}};const Fy=f=>{let a=0,r=[];for(;a<f.length;){let i=f[a];if(i==="\\"){a++;continue}if(i==="{"){r.push({type:"brace",value:"{"}),a++;continue}if(i==="}"){r.push({type:"brace",value:"}"}),a++;continue}if(i==="["){r.push({type:"paren",value:"["}),a++;continue}if(i==="]"){r.push({type:"paren",value:"]"}),a++;continue}if(i===":"){r.push({type:"separator",value:":"}),a++;continue}if(i===","){r.push({type:"delimiter",value:","}),a++;continue}if(i==='"'){let h="",x=!1;for(i=f[++a];i!=='"';){if(a===f.length){x=!0;break}if(i==="\\"){if(a++,a===f.length){x=!0;break}h+=i+f[a],i=f[++a]}else h+=i,i=f[++a]}i=f[++a],x||r.push({type:"string",value:h});continue}if(i&&/\s/.test(i)){a++;continue}let u=/[0-9]/;if(i&&u.test(i)||i==="-"||i==="."){let h="";for(i==="-"&&(h+=i,i=f[++a]);i&&u.test(i)||i===".";)h+=i,i=f[++a];r.push({type:"number",value:h});continue}let m=/[a-z]/i;if(i&&m.test(i)){let h="";for(;i&&m.test(i)&&a!==f.length;)h+=i,i=f[++a];if(h=="true"||h=="false"||h==="null")r.push({type:"name",value:h});else{a++;continue}continue}a++}return r},ur=f=>{if(f.length===0)return f;let a=f[f.length-1];switch(a.type){case"separator":return f=f.slice(0,f.length-1),ur(f);case"number":let r=a.value[a.value.length-1];if(r==="."||r==="-")return f=f.slice(0,f.length-1),ur(f);case"string":let i=f[f.length-2];if((i==null?void 0:i.type)==="delimiter")return f=f.slice(0,f.length-1),ur(f);if((i==null?void 0:i.type)==="brace"&&i.value==="{")return f=f.slice(0,f.length-1),ur(f);break;case"delimiter":return f=f.slice(0,f.length-1),ur(f)}return f},Py=f=>{let a=[];return f.map(r=>{r.type==="brace"&&(r.value==="{"?a.push("}"):a.splice(a.lastIndexOf("}"),1)),r.type==="paren"&&(r.value==="["?a.push("]"):a.splice(a.lastIndexOf("]"),1))}),a.length>0&&a.reverse().map(r=>{r==="}"?f.push({type:"brace",value:"}"}):r==="]"&&f.push({type:"paren",value:"]"})}),f},zy=f=>{let a="";return f.map(r=>{switch(r.type){case"string":a+='"'+r.value+'"';break;default:a+=r.value;break}}),a},Nx=f=>JSON.parse(zy(Py(ur(Fy(f)))));var Ht,Qa,pn,el,bn,yn,tl,vn,Sa,Nn,al,sl,ir,rl,nl,cu,Th,il,ou,uu,du,_h;const Mh="__json_buf";function Oh(f){return f.type==="tool_use"||f.type==="server_tool_use"||f.type==="mcp_tool_use"}class yl{constructor(){Ht.add(this),this.messages=[],this.receivedMessages=[],Qa.set(this,void 0),this.controller=new AbortController,pn.set(this,void 0),el.set(this,()=>{}),bn.set(this,()=>{}),yn.set(this,void 0),tl.set(this,()=>{}),vn.set(this,()=>{}),Sa.set(this,{}),Nn.set(this,!1),al.set(this,!1),sl.set(this,!1),ir.set(this,!1),rl.set(this,void 0),nl.set(this,void 0),il.set(this,a=>{if(pe(this,al,!0),On(a)&&(a=new Jt),a instanceof Jt)return pe(this,sl,!0),this._emit("abort",a);if(a instanceof Se)return this._emit("error",a);if(a instanceof Error){const r=new Se(a.message);return r.cause=a,this._emit("error",r)}return this._emit("error",new Se(String(a)))}),pe(this,pn,new Promise((a,r)=>{pe(this,el,a,"f"),pe(this,bn,r,"f")})),pe(this,yn,new Promise((a,r)=>{pe(this,tl,a,"f"),pe(this,vn,r,"f")})),Q(this,pn,"f").catch(()=>{}),Q(this,yn,"f").catch(()=>{})}get response(){return Q(this,rl,"f")}get request_id(){return Q(this,nl,"f")}async withResponse(){const a=await Q(this,pn,"f");if(!a)throw new Error("Could not resolve a `Response` object");return{data:this,response:a,request_id:a.headers.get("request-id")}}static fromReadableStream(a){const r=new yl;return r._run(()=>r._fromReadableStream(a)),r}static createMessage(a,r,i){const c=new yl;for(const u of r.messages)c._addMessageParam(u);return c._run(()=>c._createMessage(a,{...r,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),c}_run(a){a().then(()=>{this._emitFinal(),this._emit("end")},Q(this,il,"f"))}_addMessageParam(a){this.messages.push(a)}_addMessage(a,r=!0){this.receivedMessages.push(a),r&&this._emit("message",a)}async _createMessage(a,r,i){var m;const c=i==null?void 0:i.signal;let u;c&&(c.aborted&&this.controller.abort(),u=this.controller.abort.bind(this.controller),c.addEventListener("abort",u));try{Q(this,Ht,"m",ou).call(this);const{response:h,data:x}=await a.create({...r,stream:!0},{...i,signal:this.controller.signal}).withResponse();this._connected(h);for await(const g of x)Q(this,Ht,"m",uu).call(this,g);if((m=x.controller.signal)!=null&&m.aborted)throw new Jt;Q(this,Ht,"m",du).call(this)}finally{c&&u&&c.removeEventListener("abort",u)}}_connected(a){this.ended||(pe(this,rl,a),pe(this,nl,a==null?void 0:a.headers.get("request-id")),Q(this,el,"f").call(this,a),this._emit("connect"))}get ended(){return Q(this,Nn,"f")}get errored(){return Q(this,al,"f")}get aborted(){return Q(this,sl,"f")}abort(){this.controller.abort()}on(a,r){return(Q(this,Sa,"f")[a]||(Q(this,Sa,"f")[a]=[])).push({listener:r}),this}off(a,r){const i=Q(this,Sa,"f")[a];if(!i)return this;const c=i.findIndex(u=>u.listener===r);return c>=0&&i.splice(c,1),this}once(a,r){return(Q(this,Sa,"f")[a]||(Q(this,Sa,"f")[a]=[])).push({listener:r,once:!0}),this}emitted(a){return new Promise((r,i)=>{pe(this,ir,!0),a!=="error"&&this.once("error",i),this.once(a,r)})}async done(){pe(this,ir,!0),await Q(this,yn,"f")}get currentMessage(){return Q(this,Qa,"f")}async finalMessage(){return await this.done(),Q(this,Ht,"m",cu).call(this)}async finalText(){return await this.done(),Q(this,Ht,"m",Th).call(this)}_emit(a,...r){if(Q(this,Nn,"f"))return;a==="end"&&(pe(this,Nn,!0),Q(this,tl,"f").call(this));const i=Q(this,Sa,"f")[a];if(i&&(Q(this,Sa,"f")[a]=i.filter(c=>!c.once),i.forEach(({listener:c})=>c(...r))),a==="abort"){const c=r[0];!Q(this,ir,"f")&&!(i!=null&&i.length)&&Promise.reject(c),Q(this,bn,"f").call(this,c),Q(this,vn,"f").call(this,c),this._emit("end");return}if(a==="error"){const c=r[0];!Q(this,ir,"f")&&!(i!=null&&i.length)&&Promise.reject(c),Q(this,bn,"f").call(this,c),Q(this,vn,"f").call(this,c),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Q(this,Ht,"m",cu).call(this))}async _fromReadableStream(a,r){var u;const i=r==null?void 0:r.signal;let c;i&&(i.aborted&&this.controller.abort(),c=this.controller.abort.bind(this.controller),i.addEventListener("abort",c));try{Q(this,Ht,"m",ou).call(this),this._connected(null);const m=ia.fromReadableStream(a,this.controller);for await(const h of m)Q(this,Ht,"m",uu).call(this,h);if((u=m.controller.signal)!=null&&u.aborted)throw new Jt;Q(this,Ht,"m",du).call(this)}finally{i&&c&&i.removeEventListener("abort",c)}}[(Qa=new WeakMap,pn=new WeakMap,el=new WeakMap,bn=new WeakMap,yn=new WeakMap,tl=new WeakMap,vn=new WeakMap,Sa=new WeakMap,Nn=new WeakMap,al=new WeakMap,sl=new WeakMap,ir=new WeakMap,rl=new WeakMap,nl=new WeakMap,il=new WeakMap,Ht=new WeakSet,cu=function(){if(this.receivedMessages.length===0)throw new Se("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Th=function(){if(this.receivedMessages.length===0)throw new Se("stream ended without producing a Message with role=assistant");const r=this.receivedMessages.at(-1).content.filter(i=>i.type==="text").map(i=>i.text);if(r.length===0)throw new Se("stream ended without producing a content block with type=text");return r.join(" ")},ou=function(){this.ended||pe(this,Qa,void 0)},uu=function(r){if(this.ended)return;const i=Q(this,Ht,"m",_h).call(this,r);switch(this._emit("streamEvent",r,i),r.type){case"content_block_delta":{const c=i.content.at(-1);switch(r.delta.type){case"text_delta":{c.type==="text"&&this._emit("text",r.delta.text,c.text||"");break}case"citations_delta":{c.type==="text"&&this._emit("citation",r.delta.citation,c.citations??[]);break}case"input_json_delta":{Oh(c)&&c.input&&this._emit("inputJson",r.delta.partial_json,c.input);break}case"thinking_delta":{c.type==="thinking"&&this._emit("thinking",r.delta.thinking,c.thinking);break}case"signature_delta":{c.type==="thinking"&&this._emit("signature",c.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(i),this._addMessage(i,!0);break}case"content_block_stop":{this._emit("contentBlock",i.content.at(-1));break}case"message_start":{pe(this,Qa,i);break}}},du=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const r=Q(this,Qa,"f");if(!r)throw new Se("request ended without sending any chunks");return pe(this,Qa,void 0),r},_h=function(r){let i=Q(this,Qa,"f");if(r.type==="message_start"){if(i)throw new Se(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!i)throw new Se(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return i;case"message_delta":return i.container=r.delta.container,i.stop_reason=r.delta.stop_reason,i.stop_sequence=r.delta.stop_sequence,i.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(i.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(i.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(i.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(i.usage.server_tool_use=r.usage.server_tool_use),i;case"content_block_start":return i.content.push(r.content_block),i;case"content_block_delta":{const c=i.content.at(r.index);switch(r.delta.type){case"text_delta":{(c==null?void 0:c.type)==="text"&&(i.content[r.index]={...c,text:(c.text||"")+r.delta.text});break}case"citations_delta":{(c==null?void 0:c.type)==="text"&&(i.content[r.index]={...c,citations:[...c.citations??[],r.delta.citation]});break}case"input_json_delta":{if(c&&Oh(c)){let u=c[Mh]||"";u+=r.delta.partial_json;const m={...c};if(Object.defineProperty(m,Mh,{value:u,enumerable:!1,writable:!0}),u)try{m.input=Nx(u)}catch(h){const x=new Se(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${h}. JSON: ${u}`);Q(this,il,"f").call(this,x)}i.content[r.index]=m}break}case"thinking_delta":{(c==null?void 0:c.type)==="thinking"&&(i.content[r.index]={...c,thinking:c.thinking+r.delta.thinking});break}case"signature_delta":{(c==null?void 0:c.type)==="thinking"&&(i.content[r.index]={...c,signature:r.delta.signature});break}default:r.delta}return i}case"content_block_stop":return i}},Symbol.asyncIterator)](){const a=[],r=[];let i=!1;return this.on("streamEvent",c=>{const u=r.shift();u?u.resolve(c):a.push(c)}),this.on("end",()=>{i=!0;for(const c of r)c.resolve(void 0);r.length=0}),this.on("abort",c=>{i=!0;for(const u of r)u.reject(c);r.length=0}),this.on("error",c=>{i=!0;for(const u of r)u.reject(c);r.length=0}),{next:async()=>a.length?{value:a.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((u,m)=>r.push({resolve:u,reject:m})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ia(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const Sx={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192},Ih={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};let Iu=class extends ja{constructor(){super(...arguments),this.batches=new vx(this._client)}create(a,r){const{betas:i,...c}=a;c.model in Ih&&console.warn(`The model '${c.model}' is deprecated and will reach end-of-life on ${Ih[c.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let u=this._client._options.timeout;if(!c.stream&&u==null){const m=Sx[c.model]??void 0;u=this._client.calculateNonstreamingTimeout(c.max_tokens,m)}return this._client.post("/v1/messages?beta=true",{body:c,timeout:u??6e5,...r,headers:Fe([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},r==null?void 0:r.headers]),stream:a.stream??!1})}stream(a,r){return yl.createMessage(this,a,r)}countTokens(a,r){const{betas:i,...c}=a;return this._client.post("/v1/messages/count_tokens?beta=true",{body:c,...r,headers:Fe([{"anthropic-beta":[...i??[],"token-counting-2024-11-01"].toString()},r==null?void 0:r.headers])})}};Iu.Batches=vx;class Ln extends ja{constructor(){super(...arguments),this.models=new yx(this._client),this.messages=new Iu(this._client),this.files=new bx(this._client)}}Ln.Models=yx;Ln.Messages=Iu;Ln.Files=bx;class wx extends ja{create(a,r){const{betas:i,...c}=a;return this._client.post("/v1/complete",{body:c,timeout:this._client._options.timeout??6e5,...r,headers:Fe([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},r==null?void 0:r.headers]),stream:a.stream??!1})}}var Yt,Za,Sn,ll,wn,jn,cl,En,wa,Dn,ol,ul,lr,dl,fl,fu,Uh,mu,hu,xu,gu,Lh;const kh="__json_buf";function Vh(f){return f.type==="tool_use"||f.type==="server_tool_use"}class vl{constructor(){Yt.add(this),this.messages=[],this.receivedMessages=[],Za.set(this,void 0),this.controller=new AbortController,Sn.set(this,void 0),ll.set(this,()=>{}),wn.set(this,()=>{}),jn.set(this,void 0),cl.set(this,()=>{}),En.set(this,()=>{}),wa.set(this,{}),Dn.set(this,!1),ol.set(this,!1),ul.set(this,!1),lr.set(this,!1),dl.set(this,void 0),fl.set(this,void 0),mu.set(this,a=>{if(pe(this,ol,!0),On(a)&&(a=new Jt),a instanceof Jt)return pe(this,ul,!0),this._emit("abort",a);if(a instanceof Se)return this._emit("error",a);if(a instanceof Error){const r=new Se(a.message);return r.cause=a,this._emit("error",r)}return this._emit("error",new Se(String(a)))}),pe(this,Sn,new Promise((a,r)=>{pe(this,ll,a,"f"),pe(this,wn,r,"f")})),pe(this,jn,new Promise((a,r)=>{pe(this,cl,a,"f"),pe(this,En,r,"f")})),Q(this,Sn,"f").catch(()=>{}),Q(this,jn,"f").catch(()=>{})}get response(){return Q(this,dl,"f")}get request_id(){return Q(this,fl,"f")}async withResponse(){const a=await Q(this,Sn,"f");if(!a)throw new Error("Could not resolve a `Response` object");return{data:this,response:a,request_id:a.headers.get("request-id")}}static fromReadableStream(a){const r=new vl;return r._run(()=>r._fromReadableStream(a)),r}static createMessage(a,r,i){const c=new vl;for(const u of r.messages)c._addMessageParam(u);return c._run(()=>c._createMessage(a,{...r,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),c}_run(a){a().then(()=>{this._emitFinal(),this._emit("end")},Q(this,mu,"f"))}_addMessageParam(a){this.messages.push(a)}_addMessage(a,r=!0){this.receivedMessages.push(a),r&&this._emit("message",a)}async _createMessage(a,r,i){var m;const c=i==null?void 0:i.signal;let u;c&&(c.aborted&&this.controller.abort(),u=this.controller.abort.bind(this.controller),c.addEventListener("abort",u));try{Q(this,Yt,"m",hu).call(this);const{response:h,data:x}=await a.create({...r,stream:!0},{...i,signal:this.controller.signal}).withResponse();this._connected(h);for await(const g of x)Q(this,Yt,"m",xu).call(this,g);if((m=x.controller.signal)!=null&&m.aborted)throw new Jt;Q(this,Yt,"m",gu).call(this)}finally{c&&u&&c.removeEventListener("abort",u)}}_connected(a){this.ended||(pe(this,dl,a),pe(this,fl,a==null?void 0:a.headers.get("request-id")),Q(this,ll,"f").call(this,a),this._emit("connect"))}get ended(){return Q(this,Dn,"f")}get errored(){return Q(this,ol,"f")}get aborted(){return Q(this,ul,"f")}abort(){this.controller.abort()}on(a,r){return(Q(this,wa,"f")[a]||(Q(this,wa,"f")[a]=[])).push({listener:r}),this}off(a,r){const i=Q(this,wa,"f")[a];if(!i)return this;const c=i.findIndex(u=>u.listener===r);return c>=0&&i.splice(c,1),this}once(a,r){return(Q(this,wa,"f")[a]||(Q(this,wa,"f")[a]=[])).push({listener:r,once:!0}),this}emitted(a){return new Promise((r,i)=>{pe(this,lr,!0),a!=="error"&&this.once("error",i),this.once(a,r)})}async done(){pe(this,lr,!0),await Q(this,jn,"f")}get currentMessage(){return Q(this,Za,"f")}async finalMessage(){return await this.done(),Q(this,Yt,"m",fu).call(this)}async finalText(){return await this.done(),Q(this,Yt,"m",Uh).call(this)}_emit(a,...r){if(Q(this,Dn,"f"))return;a==="end"&&(pe(this,Dn,!0),Q(this,cl,"f").call(this));const i=Q(this,wa,"f")[a];if(i&&(Q(this,wa,"f")[a]=i.filter(c=>!c.once),i.forEach(({listener:c})=>c(...r))),a==="abort"){const c=r[0];!Q(this,lr,"f")&&!(i!=null&&i.length)&&Promise.reject(c),Q(this,wn,"f").call(this,c),Q(this,En,"f").call(this,c),this._emit("end");return}if(a==="error"){const c=r[0];!Q(this,lr,"f")&&!(i!=null&&i.length)&&Promise.reject(c),Q(this,wn,"f").call(this,c),Q(this,En,"f").call(this,c),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Q(this,Yt,"m",fu).call(this))}async _fromReadableStream(a,r){var u;const i=r==null?void 0:r.signal;let c;i&&(i.aborted&&this.controller.abort(),c=this.controller.abort.bind(this.controller),i.addEventListener("abort",c));try{Q(this,Yt,"m",hu).call(this),this._connected(null);const m=ia.fromReadableStream(a,this.controller);for await(const h of m)Q(this,Yt,"m",xu).call(this,h);if((u=m.controller.signal)!=null&&u.aborted)throw new Jt;Q(this,Yt,"m",gu).call(this)}finally{i&&c&&i.removeEventListener("abort",c)}}[(Za=new WeakMap,Sn=new WeakMap,ll=new WeakMap,wn=new WeakMap,jn=new WeakMap,cl=new WeakMap,En=new WeakMap,wa=new WeakMap,Dn=new WeakMap,ol=new WeakMap,ul=new WeakMap,lr=new WeakMap,dl=new WeakMap,fl=new WeakMap,mu=new WeakMap,Yt=new WeakSet,fu=function(){if(this.receivedMessages.length===0)throw new Se("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Uh=function(){if(this.receivedMessages.length===0)throw new Se("stream ended without producing a Message with role=assistant");const r=this.receivedMessages.at(-1).content.filter(i=>i.type==="text").map(i=>i.text);if(r.length===0)throw new Se("stream ended without producing a content block with type=text");return r.join(" ")},hu=function(){this.ended||pe(this,Za,void 0)},xu=function(r){if(this.ended)return;const i=Q(this,Yt,"m",Lh).call(this,r);switch(this._emit("streamEvent",r,i),r.type){case"content_block_delta":{const c=i.content.at(-1);switch(r.delta.type){case"text_delta":{c.type==="text"&&this._emit("text",r.delta.text,c.text||"");break}case"citations_delta":{c.type==="text"&&this._emit("citation",r.delta.citation,c.citations??[]);break}case"input_json_delta":{Vh(c)&&c.input&&this._emit("inputJson",r.delta.partial_json,c.input);break}case"thinking_delta":{c.type==="thinking"&&this._emit("thinking",r.delta.thinking,c.thinking);break}case"signature_delta":{c.type==="thinking"&&this._emit("signature",c.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(i),this._addMessage(i,!0);break}case"content_block_stop":{this._emit("contentBlock",i.content.at(-1));break}case"message_start":{pe(this,Za,i);break}}},gu=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const r=Q(this,Za,"f");if(!r)throw new Se("request ended without sending any chunks");return pe(this,Za,void 0),r},Lh=function(r){let i=Q(this,Za,"f");if(r.type==="message_start"){if(i)throw new Se(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!i)throw new Se(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return i;case"message_delta":return i.stop_reason=r.delta.stop_reason,i.stop_sequence=r.delta.stop_sequence,i.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(i.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(i.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(i.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(i.usage.server_tool_use=r.usage.server_tool_use),i;case"content_block_start":return i.content.push({...r.content_block}),i;case"content_block_delta":{const c=i.content.at(r.index);switch(r.delta.type){case"text_delta":{(c==null?void 0:c.type)==="text"&&(i.content[r.index]={...c,text:(c.text||"")+r.delta.text});break}case"citations_delta":{(c==null?void 0:c.type)==="text"&&(i.content[r.index]={...c,citations:[...c.citations??[],r.delta.citation]});break}case"input_json_delta":{if(c&&Vh(c)){let u=c[kh]||"";u+=r.delta.partial_json;const m={...c};Object.defineProperty(m,kh,{value:u,enumerable:!1,writable:!0}),u&&(m.input=Nx(u)),i.content[r.index]=m}break}case"thinking_delta":{(c==null?void 0:c.type)==="thinking"&&(i.content[r.index]={...c,thinking:c.thinking+r.delta.thinking});break}case"signature_delta":{(c==null?void 0:c.type)==="thinking"&&(i.content[r.index]={...c,signature:r.delta.signature});break}default:r.delta}return i}case"content_block_stop":return i}},Symbol.asyncIterator)](){const a=[],r=[];let i=!1;return this.on("streamEvent",c=>{const u=r.shift();u?u.resolve(c):a.push(c)}),this.on("end",()=>{i=!0;for(const c of r)c.resolve(void 0);r.length=0}),this.on("abort",c=>{i=!0;for(const u of r)u.reject(c);r.length=0}),this.on("error",c=>{i=!0;for(const u of r)u.reject(c);r.length=0}),{next:async()=>a.length?{value:a.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((u,m)=>r.push({resolve:u,reject:m})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ia(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class jx extends ja{create(a,r){return this._client.post("/v1/messages/batches",{body:a,...r})}retrieve(a,r){return this._client.get(Wt`/v1/messages/batches/${a}`,r)}list(a={},r){return this._client.getAPIList("/v1/messages/batches",Un,{query:a,...r})}delete(a,r){return this._client.delete(Wt`/v1/messages/batches/${a}`,r)}cancel(a,r){return this._client.post(Wt`/v1/messages/batches/${a}/cancel`,r)}async results(a,r){const i=await this.retrieve(a);if(!i.results_url)throw new Se(`No batch \`results_url\`; Has it finished processing? ${i.processing_status} - ${i.id}`);return this._client.get(i.results_url,{...r,headers:Fe([{Accept:"application/binary"},r==null?void 0:r.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((c,u)=>wl.fromResponse(u.response,u.controller))}}class Uu extends ja{constructor(){super(...arguments),this.batches=new jx(this._client)}create(a,r){a.model in $h&&console.warn(`The model '${a.model}' is deprecated and will reach end-of-life on ${$h[a.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let i=this._client._options.timeout;if(!a.stream&&i==null){const c=Sx[a.model]??void 0;i=this._client.calculateNonstreamingTimeout(a.max_tokens,c)}return this._client.post("/v1/messages",{body:a,timeout:i??6e5,...r,stream:a.stream??!1})}stream(a,r){return vl.createMessage(this,a,r)}countTokens(a,r){return this._client.post("/v1/messages/count_tokens",{body:a,...r})}}const $h={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};Uu.Batches=jx;class Ex extends ja{retrieve(a,r={},i){const{betas:c}=r??{};return this._client.get(Wt`/v1/models/${a}`,{...i,headers:Fe([{...(c==null?void 0:c.toString())!=null?{"anthropic-beta":c==null?void 0:c.toString()}:void 0},i==null?void 0:i.headers])})}list(a={},r){const{betas:i,...c}=a??{};return this._client.getAPIList("/v1/models",Un,{query:c,...r,headers:Fe([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},r==null?void 0:r.headers])})}}var pu={};const ml=f=>{var a,r,i,c;if(typeof globalThis.process<"u")return((a=pu==null?void 0:pu[f])==null?void 0:a.trim())??void 0;if(typeof globalThis.Deno<"u")return(c=(i=(r=globalThis.Deno.env)==null?void 0:r.get)==null?void 0:i.call(r,f))==null?void 0:c.trim()};var Ru,Lu,pl,Dx;class Qe{constructor({baseURL:a=ml("ANTHROPIC_BASE_URL"),apiKey:r=ml("ANTHROPIC_API_KEY")??null,authToken:i=ml("ANTHROPIC_AUTH_TOKEN")??null,...c}={}){Ru.add(this),pl.set(this,void 0);const u={apiKey:r,authToken:i,...c,baseURL:a||"https://api.anthropic.com"};if(!u.dangerouslyAllowBrowser&&my())throw new Se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=u.baseURL,this.timeout=u.timeout??Lu.DEFAULT_TIMEOUT,this.logger=u.logger??console;const m="warn";this.logLevel=m,this.logLevel=Dh(u.logLevel,"ClientOptions.logLevel",this)??Dh(ml("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??m,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??by(),pe(this,pl,vy),this._options=u,this.apiKey=r,this.authToken=i}withOptions(a){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...a})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:r}){if(!(this.apiKey&&a.get("x-api-key"))&&!r.has("x-api-key")&&!(this.authToken&&a.get("authorization"))&&!r.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(a){return Fe([await this.apiKeyAuth(a),await this.bearerAuth(a)])}async apiKeyAuth(a){if(this.apiKey!=null)return Fe([{"X-Api-Key":this.apiKey}])}async bearerAuth(a){if(this.authToken!=null)return Fe([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(a){return Object.entries(a).filter(([r,i])=>typeof i<"u").map(([r,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(r)}=`;throw new Se(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${or}`}defaultIdempotencyKey(){return`stainless-node-retry-${Jh()}`}makeStatusError(a,r,i,c){return mt.generate(a,r,i,c)}buildURL(a,r,i){const c=!Q(this,Ru,"m",Dx).call(this)&&i||this.baseURL,u=cy(a)?new URL(a):new URL(c+(c.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),m=this.defaultQuery();return oy(m)||(r={...m,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(u.search=this.stringifyQuery(r)),u.toString()}_calculateNonstreamingTimeout(a){if(3600*a/128e3>600)throw new Se("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(a){}async prepareRequest(a,{url:r,options:i}){}get(a,r){return this.methodRequest("get",a,r)}post(a,r){return this.methodRequest("post",a,r)}patch(a,r){return this.methodRequest("patch",a,r)}put(a,r){return this.methodRequest("put",a,r)}delete(a,r){return this.methodRequest("delete",a,r)}methodRequest(a,r,i){return this.request(Promise.resolve(i).then(c=>({method:a,path:r,...c})))}request(a,r=null){return new Sl(this,this.makeRequest(a,r,void 0))}async makeRequest(a,r,i){var X,L;const c=await a,u=c.maxRetries??this.maxRetries;r==null&&(r=u),await this.prepareOptions(c);const{req:m,url:h,timeout:x}=await this.buildRequest(c,{retryCount:u-r});await this.prepareRequest(m,{url:h,options:c});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=i===void 0?"":`, retryOf: ${i}`,w=Date.now();if(xt(this).debug(`[${g}] sending request`,ys({retryOfRequestLogID:i,method:c.method,url:h,options:c,headers:m.headers})),(X=c.signal)!=null&&X.aborted)throw new Jt;const D=new AbortController,b=await this.fetchWithTimeout(h,m,x,D).catch(wu),N=Date.now();if(b instanceof Error){const J=`retrying, ${r} attempts remaining`;if((L=c.signal)!=null&&L.aborted)throw new Jt;const B=On(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(r)return xt(this).info(`[${g}] connection ${B?"timed out":"failed"} - ${J}`),xt(this).debug(`[${g}] connection ${B?"timed out":"failed"} (${J})`,ys({retryOfRequestLogID:i,url:h,durationMs:N-w,message:b.message})),this.retryRequest(c,r,i??g);throw xt(this).info(`[${g}] connection ${B?"timed out":"failed"} - error; no more retries left`),xt(this).debug(`[${g}] connection ${B?"timed out":"failed"} (error; no more retries left)`,ys({retryOfRequestLogID:i,url:h,durationMs:N-w,message:b.message})),B?new Wh:new Nl({cause:b})}const E=[...b.headers.entries()].filter(([J])=>J==="request-id").map(([J,B])=>", "+J+": "+JSON.stringify(B)).join(""),A=`[${g}${y}${E}] ${m.method} ${h} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${N-w}ms`;if(!b.ok){const J=await this.shouldRetry(b);if(r&&J){const ee=`retrying, ${r} attempts remaining`;return await yy(b.body),xt(this).info(`${A} - ${ee}`),xt(this).debug(`[${g}] response error (${ee})`,ys({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,durationMs:N-w})),this.retryRequest(c,r,i??g,b.headers)}const B=J?"error; no more retries left":"error; not retryable";xt(this).info(`${A} - ${B}`);const K=await b.text().catch(ee=>wu(ee).message),ne=cx(K),he=ne?void 0:K;throw xt(this).debug(`[${g}] response error (${B})`,ys({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,message:he,durationMs:Date.now()-w})),this.makeStatusError(b.status,ne,he,b.headers)}return xt(this).info(A),xt(this).debug(`[${g}] response start`,ys({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,durationMs:N-w})),{response:b,options:c,controller:D,requestLogID:g,retryOfRequestLogID:i,startTime:w}}getAPIList(a,r,i){return this.requestAPIList(r,{method:"get",path:a,...i})}requestAPIList(a,r){const i=this.makeRequest(r,null,void 0);return new Ty(this,i,a)}async fetchWithTimeout(a,r,i,c){const{signal:u,method:m,...h}=r||{};u&&u.addEventListener("abort",()=>c.abort());const x=setTimeout(()=>c.abort(),i),g=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,y={signal:c.signal,...g?{duplex:"half"}:{},method:"GET",...h};m&&(y.method=m.toUpperCase());try{return await this.fetch.call(void 0,a,y)}finally{clearTimeout(x)}}async shouldRetry(a){const r=a.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:a.status===408||a.status===409||a.status===429||a.status>=500}async retryRequest(a,r,i,c){let u;const m=c==null?void 0:c.get("retry-after-ms");if(m){const x=parseFloat(m);Number.isNaN(x)||(u=x)}const h=c==null?void 0:c.get("retry-after");if(h&&!u){const x=parseFloat(h);Number.isNaN(x)?u=Date.parse(h)-Date.now():u=x*1e3}if(!(u&&0<=u&&u<60*1e3)){const x=a.maxRetries??this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(r,x)}return await fy(u),this.makeRequest(a,r-1,i)}calculateDefaultRetryTimeoutMillis(a,r){const u=r-a,m=Math.min(.5*Math.pow(2,u),8),h=1-Math.random()*.25;return m*h*1e3}calculateNonstreamingTimeout(a,r){if(36e5*a/128e3>6e5||r!=null&&a>r)throw new Se("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(a,{retryCount:r=0}={}){const i={...a},{method:c,path:u,query:m,defaultBaseURL:h}=i,x=this.buildURL(u,m,h);"timeout"in i&&dy("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:i}),w=await this.buildHeaders({options:a,method:c,bodyHeaders:g,retryCount:r});return{req:{method:c,headers:w,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"},...y&&{body:y},...this.fetchOptions??{},...i.fetchOptions??{}},url:x,timeout:i.timeout}}async buildHeaders({options:a,method:r,bodyHeaders:i,retryCount:c}){let u={};this.idempotencyHeader&&r!=="get"&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=a.idempotencyKey);const m=Fe([u,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(c),...a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{},...py(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(a),this._options.defaultHeaders,i,a.headers]);return this.validateHeaders(m),m.values}buildBody({options:{body:a,headers:r}}){if(!a)return{bodyHeaders:void 0,body:void 0};const i=Fe([r]);return ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||typeof a=="string"&&i.values.has("content-type")||a instanceof Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:a}:typeof a=="object"&&(Symbol.asyncIterator in a||Symbol.iterator in a&&"next"in a&&typeof a.next=="function")?{bodyHeaders:void 0,body:ux(a)}:Q(this,pl,"f").call(this,{body:a,headers:i})}}Lu=Qe,pl=new WeakMap,Ru=new WeakSet,Dx=function(){return this.baseURL!=="https://api.anthropic.com"};Qe.Anthropic=Lu;Qe.HUMAN_PROMPT=`

Human:`;Qe.AI_PROMPT=`

Assistant:`;Qe.DEFAULT_TIMEOUT=6e5;Qe.AnthropicError=Se;Qe.APIError=mt;Qe.APIConnectionError=Nl;Qe.APIConnectionTimeoutError=Wh;Qe.APIUserAbortError=Jt;Qe.NotFoundError=sx;Qe.ConflictError=rx;Qe.RateLimitError=ix;Qe.BadRequestError=ex;Qe.AuthenticationError=tx;Qe.InternalServerError=lx;Qe.PermissionDeniedError=ax;Qe.UnprocessableEntityError=nx;Qe.toFile=ky;class mr extends Qe{constructor(){super(...arguments),this.completions=new wx(this),this.messages=new Uu(this),this.models=new Ex(this),this.beta=new Ln(this)}}mr.Completions=wx;mr.Messages=Uu;mr.Models=Ex;mr.Beta=Ln;const{HUMAN_PROMPT:Uv,AI_PROMPT:Lv}=mr;var bu={exports:{}};const qy=Zp(db);var yu,Bh;function Hy(){if(Bh)return yu;Bh=1;var f=null;function a(c){let u={normalizeWhitespace:!1,disableCombineTextItems:!1};return c.getTextContent(u).then(function(m){let h,x="";for(let g of m.items)h==g.transform[5]||!h?x+=g.str:x+=`
`+g.str,h=g.transform[5];return x})}const r={pagerender:a,max:0,version:"v1.10.100"};async function i(c,u){let m={numpages:0,numrender:0,info:null,metadata:null,text:"",version:null};typeof u>"u"&&(u=r),typeof u.pagerender!="function"&&(u.pagerender=r.pagerender),typeof u.max!="number"&&(u.max=r.max),typeof u.version!="string"&&(u.version=r.version),u.version=="default"&&(u.version=r.version),f=f||Kh(`./pdf.js/${u.version}/build/pdf.js`),m.version=f.version,f.disableWorker=!0;let h=await f.getDocument(c);m.numpages=h.numPages;let x=await h.getMetadata().catch(function(w){return null});m.info=x?x.info:null,m.metadata=x?x.metadata:null;let g=u.max<=0?h.numPages:u.max;g=g>h.numPages?h.numPages:g,m.text="";for(var y=1;y<=g;y++){let w=await h.getPage(y).then(D=>u.pagerender(D)).catch(D=>{debugger;return""});m.text=`${m.text}

${w}`}return m.numrender=g,h.destroy(),m}return yu=i,yu}var Fh;function Yy(){return Fh||(Fh=1,function(f){const a=qy,r=Hy();if(f.exports=r,!f.parent){let c="./test/data/05-versions-space.pdf",u=a.readFileSync(c);r(u).then(function(m){a.writeFileSync(`${c}.txt`,m.text,{encoding:"utf8",flag:"w"});debugger}).catch(function(m){debugger})}}(bu)),bu.exports}var Gy=Yy();const Xy=Au(Gy);var Ky={};class Qy{constructor(){le(this,"anthropic");le(this,"isInitialized",!1);const a=Ky.ANTHROPIC_API_KEY||void 0;if(!a){console.warn("Claude API key not found. Document processing will be limited.");return}this.anthropic=new mr({apiKey:a}),this.isInitialized=!0}async processDocument(a,r={}){const i=Date.now();try{if(!this.isInitialized)throw new Error("Claude Vision processor not initialized. Check API key.");if(!this.anthropic)throw new Error("Claude API client not initialized.");let c,u;if(a.type==="application/pdf"){const m=await a.arrayBuffer(),h=Buffer.from(m),x=await Xy(h);return u="text/plain",c=Buffer.from(x.text).toString("base64"),await this.processTextDocument(x.text,r,i)}else if(a.type.startsWith("image/")){u=a.type;const m=await a.arrayBuffer();return c=Buffer.from(m).toString("base64"),await this.processImageDocument(c,u,r,i)}else throw new Error(`Unsupported file type: ${a.type}`)}catch(c){return console.error("Claude Vision processing error:",c),{success:!1,error:c instanceof Error?c.message:"Unknown processing error",processingTime:Date.now()-i}}}async processImageDocument(a,r,i,c){var m;const u=this.buildExtractionPrompt(i.expectedDocumentType);try{const h=await this.anthropic.messages.create({model:"claude-3-5-sonnet-20241022",max_tokens:2e3,messages:[{role:"user",content:[{type:"image",source:{type:"base64",media_type:r,data:a}},{type:"text",text:u}]}]}),x=((m=h.content[0])==null?void 0:m.type)==="text"?h.content[0].text:"";return{success:!0,data:this.parseClaudeResponse(x),processingTime:Date.now()-c}}catch(h){return console.error("Claude API error:",h),{success:!1,error:h instanceof Error?h.message:"Claude API error",processingTime:Date.now()-c}}}async processTextDocument(a,r,i){var u;const c=this.buildTextExtractionPrompt(a,r.expectedDocumentType);try{const m=await this.anthropic.messages.create({model:"claude-3-5-sonnet-20241022",max_tokens:2e3,messages:[{role:"user",content:c}]}),h=((u=m.content[0])==null?void 0:u.type)==="text"?m.content[0].text:"";return{success:!0,data:this.parseClaudeResponse(h),processingTime:Date.now()-i}}catch(m){return console.error("Claude API error:",m),{success:!1,error:m instanceof Error?m.message:"Claude API error",processingTime:Date.now()-i}}}buildExtractionPrompt(a){return`You are an expert document processor specializing in commercial trucking compliance documents with advanced edge case detection.

CRITICAL MISSION: Extract data while identifying conflicts, validation issues, and edge cases to minimize manual review.

Analyze this document image and extract all relevant information. The document could be:
- Vehicle registration
- Commercial insurance policy  
- DOT medical certificate
- CDL (Commercial Driver's License)
- DOT inspection report
- Operating permit
- Or any other trucking-related document

${a?`The user expects this to be a ${a} document.`:""}

Return your analysis as a JSON object with this EXACT structure:
{
  "documentType": "registration|insurance|medical_certificate|cdl_license|inspection|permit|unknown",
  "confidence": 0.95,
  "extractedData": {
    "vin": "string",
    "licensePlate": "string", 
    "make": "string",
    "model": "string",
    "year": "string",
    "driverName": "string",
    "licenseNumber": "string",
    "licenseClass": "string",
    "endorsements": ["array", "of", "strings"],
    "issueDate": "YYYY-MM-DD",
    "expirationDate": "YYYY-MM-DD", 
    "effectiveDate": "YYYY-MM-DD",
    "policyNumber": "string",
    "insuranceCompany": "string",
    "coverageAmount": "string",
    "medicalExaminerName": "string",
    "medicalCertificateNumber": "string",
    "restrictions": ["array", "of", "restrictions"],
    "registrationNumber": "string",
    "state": "string",
    "ownerName": "string",
    "documentNumber": "string",
    "authority": "string",
    "status": "string"
  },
  "fieldConfidence": {
    "vin": 0.95,
    "expirationDate": 0.90,
    "licensePlate": 0.85
  },
  "dataQuality": {
    "isComplete": true,
    "missingCriticalFields": ["vin", "expirationDate"],
    "invalidFields": [
      {"field": "vin", "issue": "Too short (12 chars, need 17)"},
      {"field": "year", "issue": "Year 2030 is unrealistic"}
    ],
    "qualityScore": 0.85
  },
  "conflicts": {
    "hasConflicts": false,
    "conflictDetails": [
      {
        "field": "expirationDate", 
        "values": ["2024-12-31", "2025-01-15"],
        "recommendation": "Use 2025-01-15 (clearer text, higher confidence)"
      }
    ]
  },
  "validationResults": {
    "vinValid": true,
    "datesRealistic": true,
    "documentsExpired": false,
    "requiresImmediateAction": false
  },
  "processingNotes": ["Document quality excellent", "All critical fields present"],
  "requiresReview": false,
  "autoApprovalRecommended": true
}

ENHANCED VALIDATION RULES:
1. **VIN Validation**: Must be exactly 17 characters, alphanumeric (no I, O, Q)
2. **Date Validation**: 
   - Issue dates should be in the past
   - Expiry dates should be future but realistic (not >10 years out)
   - Flag dates before 2020 or after 2030 as suspicious
3. **Data Completeness**:
   - Registration MUST have: VIN, licensePlate, expirationDate
   - Insurance MUST have: VIN or licensePlate, policyNumber, expirationDate
   - CDL MUST have: driverName, licenseNumber, expirationDate
   - Medical MUST have: driverName, expirationDate, medicalCertificateNumber

CONFLICT DETECTION:
- Multiple values for same field in document (choose most confident)
- Contradictory information (flag for review)
- Cross-field validation failures (VIN format vs year mismatch)

SMART AUTO-APPROVAL CRITERIA:
- Overall confidence > 90%
- No missing critical fields
- No validation failures  
- Document quality score > 80%
- No significant conflicts detected
→ Set autoApprovalRecommended: true

REQUIRE REVIEW IF:
- Confidence < 80%
- Missing critical fields
- Invalid VIN format
- Expired documents (unless insurance renewal)
- Conflicting data within document
- Poor image quality affecting extraction
→ Set requiresReview: true, autoApprovalRecommended: false

FIELD CONFIDENCE SCORING:
Rate each extracted field 0.0-1.0 based on:
- Text clarity in image
- Data validation success
- Cross-field consistency
- Format correctness

Only include fields actually present in document. Use null for missing fields.`}buildTextExtractionPrompt(a,r){return`You are an expert document processor specializing in commercial trucking compliance documents with advanced edge case detection.

CRITICAL MISSION: Extract data while identifying conflicts, validation issues, and edge cases to minimize manual review.

Analyze this document text and extract all relevant information:

DOCUMENT TEXT:
${a}

${r?`The user expects this to be a ${r} document.`:""}

Return your analysis as a JSON object with the EXACT same structure as the image processing prompt, including:
- Enhanced fieldConfidence scoring
- dataQuality assessment  
- conflicts detection
- validationResults
- autoApprovalRecommended flag

Apply the same ENHANCED VALIDATION RULES:
1. **VIN Validation**: Must be exactly 17 characters, alphanumeric (no I, O, Q)
2. **Date Validation**: Realistic date ranges, proper formatting
3. **Data Completeness**: All critical fields for document type
4. **Conflict Detection**: Multiple values, contradictory info
5. **Smart Auto-Approval**: High confidence + complete + valid data

Focus on:
- Identifying the document type accurately with confidence scoring
- Extracting all compliance-relevant dates with validation
- Finding vehicle and driver identification with format checking
- Detecting any internal conflicts or inconsistencies
- Providing field-level confidence for each extracted value
- Recommending auto-approval only for high-quality, complete documents`}parseClaudeResponse(a){var r,i,c,u,m,h,x,g,y,w;try{const D=a.match(/\{[\s\S]*\}/);if(!D)throw new Error("No JSON found in response");const b=JSON.parse(D[0]),N={documentType:b.documentType||"unknown",confidence:b.confidence||.5,extractedData:b.extractedData||{},fieldConfidence:b.fieldConfidence||{},dataQuality:{isComplete:((r=b.dataQuality)==null?void 0:r.isComplete)??!1,missingCriticalFields:((i=b.dataQuality)==null?void 0:i.missingCriticalFields)||[],invalidFields:((c=b.dataQuality)==null?void 0:c.invalidFields)||[],qualityScore:((u=b.dataQuality)==null?void 0:u.qualityScore)||.5},conflicts:{hasConflicts:((m=b.conflicts)==null?void 0:m.hasConflicts)??!1,conflictDetails:((h=b.conflicts)==null?void 0:h.conflictDetails)||[]},validationResults:{vinValid:((x=b.validationResults)==null?void 0:x.vinValid)??!0,datesRealistic:((g=b.validationResults)==null?void 0:g.datesRealistic)??!0,documentsExpired:((y=b.validationResults)==null?void 0:y.documentsExpired)??!1,requiresImmediateAction:((w=b.validationResults)==null?void 0:w.requiresImmediateAction)??!1},rawText:a,processingNotes:b.processingNotes||[],requiresReview:b.requiresReview||!1,autoApprovalRecommended:b.autoApprovalRecommended||!1};return N.requiresReview=this.shouldRequireReview(N),N.autoApprovalRecommended=this.shouldAutoApprove(N),N}catch(D){return console.error("Error parsing Claude response:",D),{documentType:"unknown",confidence:.1,extractedData:{},fieldConfidence:{},dataQuality:{isComplete:!1,missingCriticalFields:["ALL"],invalidFields:[{field:"parsing",issue:"Failed to parse Claude response"}],qualityScore:.1},conflicts:{hasConflicts:!1,conflictDetails:[]},validationResults:{vinValid:!1,datesRealistic:!1,documentsExpired:!1,requiresImmediateAction:!0},rawText:a,processingNotes:["Failed to parse structured response","Requires manual review"],requiresReview:!0,autoApprovalRecommended:!1}}}shouldRequireReview(a){return a.confidence>=.9&&a.dataQuality.isComplete&&a.dataQuality.qualityScore>=.8&&!a.conflicts.hasConflicts&&a.validationResults.vinValid&&a.validationResults.datesRealistic?!1:a.confidence<.8||a.dataQuality.missingCriticalFields.length>0||a.dataQuality.invalidFields.length>0||a.conflicts.hasConflicts||!a.validationResults.vinValid||!a.validationResults.datesRealistic||a.validationResults.documentsExpired||a.dataQuality.qualityScore<.6}shouldAutoApprove(a){return a.confidence>=.9&&a.dataQuality.isComplete&&a.dataQuality.invalidFields.length===0&&!a.conflicts.hasConflicts&&a.validationResults.vinValid&&a.validationResults.datesRealistic&&!a.validationResults.documentsExpired&&a.dataQuality.qualityScore>=.85&&!a.requiresReview}async processDocuments(a){const r=[];for(let c=0;c<a.length;c+=3){const u=a.slice(c,c+3),m=u.map(x=>this.processDocument(x));(await Promise.allSettled(m)).forEach((x,g)=>{x.status==="fulfilled"?r.push(x.value):r.push({success:!1,error:`Failed to process ${u[g].name}: ${x.reason}`})}),c+3<a.length&&await new Promise(x=>setTimeout(x,1e3))}return r}getProcessingStats(a){const r={total:a.length,successful:a.filter(c=>c.success).length,failed:a.filter(c=>!c.success).length,averageProcessingTime:0,documentTypes:{},requiresReview:0,autoApprovalRecommended:0,conflictsDetected:0,invalidDataFound:0,missingCriticalFields:0,expiredDocuments:0,averageConfidence:0,averageQualityScore:0,highQualityDocuments:0,vinValidationFailures:0,dateValidationFailures:0,completeDocuments:0,incompleteDocuments:0,reviewReasons:{lowConfidence:0,missingFields:0,invalidData:0,conflicts:0,expiredDocs:0,poorQuality:0}},i=a.filter(c=>c.success&&c.data);return i.length>0&&(r.averageProcessingTime=i.reduce((c,u)=>c+(u.processingTime||0),0)/i.length,r.averageConfidence=i.reduce((c,u)=>{var m;return c+(((m=u.data)==null?void 0:m.confidence)||0)},0)/i.length,r.averageQualityScore=i.reduce((c,u)=>{var m;return c+(((m=u.data)==null?void 0:m.dataQuality.qualityScore)||0)},0)/i.length,i.forEach(c=>{if(c.data){const u=c.data,m=u.documentType;r.documentTypes[m]=(r.documentTypes[m]||0)+1,u.requiresReview&&(r.requiresReview++,u.confidence<.8&&r.reviewReasons.lowConfidence++,u.dataQuality.missingCriticalFields.length>0&&r.reviewReasons.missingFields++,u.dataQuality.invalidFields.length>0&&r.reviewReasons.invalidData++,u.conflicts.hasConflicts&&r.reviewReasons.conflicts++,u.validationResults.documentsExpired&&r.reviewReasons.expiredDocs++,u.dataQuality.qualityScore<.6&&r.reviewReasons.poorQuality++),u.autoApprovalRecommended&&r.autoApprovalRecommended++,u.conflicts.hasConflicts&&r.conflictsDetected++,u.dataQuality.invalidFields.length>0&&r.invalidDataFound++,u.dataQuality.missingCriticalFields.length>0&&r.missingCriticalFields++,u.validationResults.documentsExpired&&r.expiredDocuments++,u.confidence>=.9&&u.dataQuality.isComplete&&r.highQualityDocuments++,u.validationResults.vinValid||r.vinValidationFailures++,u.validationResults.datesRealistic||r.dateValidationFailures++,u.dataQuality.isComplete?r.completeDocuments++:r.incompleteDocuments++}})),r}}const Ph=new Qy;class Zy{constructor(){le(this,"SUPPORTED_FORMATS",[".pdf",".jpg",".jpeg",".png",".tiff",".doc",".docx",".txt"])}async processBulkDocuments(a){console.log(`📁 Starting bulk document processing: ${a.length} files`),qt.clear(),qt.addStep({id:"classify",name:"Classifying Documents",details:`Analyzing ${a.length} files`}),qt.addStep({id:"extract",name:"Extracting Text with OCR",details:"Processing documents with AI"}),qt.addStep({id:"merge",name:"Merging Vehicle Data",details:"Combining related documents"});const r={vehicleData:[],driverData:[],unprocessedFiles:[],errors:[],summary:{totalFiles:a.length,processed:0,registrationDocs:0,insuranceDocs:0,medicalCertificates:0,cdlDocuments:0,duplicatesFound:0}};try{qt.startStep("classify",`Analyzing ${a.length} files...`);const i=await this.classifyDocuments(a);qt.completeStep("classify",`Classified ${i.length} supported documents`),qt.startStep("extract",`Processing ${i.length} documents...`);for(let c=0;c<i.length;c++){const u=i[c],m=c/i.length*100;qt.updateProgress("extract",m,`Processing ${u.fileName}...`);try{if(console.log(`🔍 Processing: ${u.fileName} (${u.type})`),u.type==="medical_certificate"||u.type==="cdl"){const h=await this.extractDriverDataFromDocument(u);h?(r.driverData.push(h),r.summary.processed++,h.documentType==="medical_certificate"?r.summary.medicalCertificates++:r.summary.cdlDocuments++):r.unprocessedFiles.push(u.fileName)}else{const h=await this.extractDataFromDocument(u);h?(r.vehicleData.push(h),r.summary.processed++,h.documentType==="registration"?r.summary.registrationDocs++:r.summary.insuranceDocs++):r.unprocessedFiles.push(u.fileName)}}catch(h){r.errors.push({fileName:u.fileName,error:h instanceof Error?h.message:String(h)})}}qt.completeStep("extract",`Processed ${r.summary.processed} documents successfully`),qt.startStep("merge","Merging related vehicle documents..."),r.vehicleData=this.mergeVehicleData(r.vehicleData),qt.completeStep("merge",`Merged data for ${r.vehicleData.length} vehicles`),console.log(`✅ Bulk processing complete: ${r.summary.processed}/${r.summary.totalFiles} files processed`),De.showSuccess(`Successfully processed ${r.summary.processed} documents!`)}catch(i){De.handleCriticalError(i,"Bulk document processing"),qt.failStep("extract",i instanceof Error?i.message:String(i))}return r}async classifyDocuments(a){const r=[];for(let i=0;i<a.length;i++){const c=a[i],u=c.name.toLowerCase();if(!this.SUPPORTED_FORMATS.some(g=>u.endsWith(g))){console.warn(`⚠️ Unsupported file format: ${c.name}`);continue}let h="unknown",x=.5;u.includes("medical")||u.includes("dot_medical")||u.includes("physical")||u.includes("med_cert")||u.includes("medical_certificate")||u.includes("med_card")||u.includes("dot_card")?(h="medical_certificate",x=.9):u.includes("cdl")||u.includes("license")||u.includes("driver_license")||u.includes("commercial_license")?(h="cdl",x=.9):u.includes("registration")||u.includes("reg")||u.includes("title")||u.includes("dmv")?(h="registration",x=.8):(u.includes("insurance")||u.includes("policy")||u.includes("coverage")||u.includes("certificate"))&&(h="insurance",x=.8);try{const g=await this.getDocumentPreview(c),y=this.classifyByContent(g);y.confidence>x&&(h=y.type,x=y.confidence)}catch(g){console.warn(`Could not preview ${c.name}:`,g)}r.push({file:c,fileName:c.name,type:h,confidence:x})}return r}async extractDataFromDocument(a){try{const r=await this.performOCR(a.file);return!r||r.trim().length<50?(console.warn(`⚠️ Could not extract meaningful text from ${a.fileName}`),null):a.type!=="registration"&&a.type!=="insurance"&&a.type!=="unknown"?(console.error(`Invalid document type for vehicle processing: ${a.type}`),null):await this.parseWithAI(r,a.type,a.fileName)}catch(r){return console.error(`Error processing ${a.fileName}:`,r),null}}async extractDriverDataFromDocument(a){try{const r=await this.performOCR(a.file);return!r||r.trim().length<50?(console.warn(`⚠️ Could not extract meaningful text from ${a.fileName}`),null):a.type!=="medical_certificate"&&a.type!=="cdl"?(console.error(`Invalid document type for driver processing: ${a.type}`),null):await this.parseDriverDataWithAI(r,a.type,a.fileName)}catch(r){return console.error(`Error processing driver document ${a.fileName}:`,r),null}}async performOCR(a){return a.type.startsWith("image/")?await this.extractTextFromImage(a):a.type==="application/pdf"?await this.extractTextFromPDF(a):await this.readAsText(a)}async extractTextFromImage(a){let r=null;try{console.log(`🔍 Starting OCR processing for image: ${a.name}`),De.showInfo(`Processing ${a.name} with OCR...`),r=await ph.createWorker("eng",1,{logger:c=>{c.status==="recognizing text"&&console.log(`OCR Progress: ${Math.round(c.progress*100)}%`)}}),await r.setParameters({tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,:-/#$%&()[]{}|"});const{data:{text:i}}=await r.recognize(a);return await r.terminate(),r=null,console.log(`✅ OCR completed for ${a.name}, extracted ${i.length} characters`),i.trim().length<50?(De.handleOCRError(new Error("Insufficient text extracted"),a.name,()=>this.extractTextFromImage(a)),console.log(`⚠️ OCR extracted too little text, using fallback mock data for ${a.name}`),this.generateRealisticOCRText(a.name)):(De.showSuccess(`Successfully processed ${a.name}`),i)}catch(i){if(r)try{await r.terminate()}catch(c){console.error("Failed to terminate OCR worker:",c)}return De.handleOCRError(i,a.name,()=>this.extractTextFromImage(a)),console.log(`🔄 Falling back to mock OCR data for ${a.name}`),this.generateRealisticOCRText(a.name)}}generateRealisticOCRText(a){const r=a.toLowerCase(),i=r.includes("medical")||r.includes("dot_medical")||r.includes("med_cert"),c=r.includes("cdl")||r.includes("license"),m=!(r.includes("insurance")||r.includes("policy"))&&!i&&!c,h=a.match(/(\d{3})/),x=h?h[1]:String(Math.floor(Math.random()*999)+1).padStart(3,"0");if(i){const g=[{first:"John",last:"Smith",dob:"03/15/1985"},{first:"Maria",last:"Rodriguez",dob:"07/22/1990"},{first:"David",last:"Johnson",dob:"11/08/1982"},{first:"Sarah",last:"Williams",dob:"05/12/1988"}],y=g[parseInt(x)%g.length],w=["Dr. Sarah Johnson","Dr. Michael Chen","Dr. Lisa Davis","Dr. Robert Wilson"],D=w[parseInt(x)%w.length];return`
DOT MEDICAL EXAMINER'S CERTIFICATE
U.S. Department of Transportation

DRIVER NAME: ${y.first} ${y.last}
DATE OF BIRTH: ${y.dob}
CERTIFICATE NUMBER: MED${x}${new Date().getFullYear()}

PHYSICAL EXAMINATION DATE: ${this.generateRecentDate()}
EXPIRATION DATE: ${this.generateMedicalExpirationDate()}

EXAMINER: ${D}
NATIONAL REGISTRY NUMBER: NR${x}456

MEDICAL EXAMINATION RESULTS:
☑ QUALIFIED
☐ QUALIFIED WITH RESTRICTIONS
☐ NOT QUALIFIED

RESTRICTIONS: NONE

This certificate is valid for operation of commercial motor vehicles
requiring a Commercial Driver's License.

DOT MEDICAL CARD - KEEP WITH LICENSE
      `.trim()}else if(c){const g=[{first:"John",last:"Smith",dob:"03/15/1985"},{first:"Maria",last:"Rodriguez",dob:"07/22/1990"},{first:"David",last:"Johnson",dob:"11/08/1982"},{first:"Sarah",last:"Williams",dob:"05/12/1988"}],y=g[parseInt(x)%g.length],w=["TX","CA","FL","NY","IL"],D=w[parseInt(x)%w.length],b=["A","B"],N=b[parseInt(x)%b.length],E=[["H","N"],["P","S"],["H","N","T"],["N"]],A=E[parseInt(x)%E.length];return`
COMMERCIAL DRIVER LICENSE
${D} DEPARTMENT OF MOTOR VEHICLES

LICENSE HOLDER: ${y.first} ${y.last}
DATE OF BIRTH: ${y.dob}
CDL NUMBER: CDL${D}${x}789

CLASS: ${N}
ENDORSEMENTS: ${A.join(", ")}
RESTRICTIONS: NONE

ISSUE DATE: ${this.generatePastDate()}
EXPIRATION DATE: ${this.generateCDLExpirationDate()}

STATE: ${D}

COMMERCIAL DRIVER LICENSE
FEDERAL LIMITS APPLY
      `.trim()}else{if(m)return`
VEHICLE REGISTRATION CERTIFICATE
State of Texas Department of Motor Vehicles

VEHICLE IDENTIFICATION NUMBER: 1HGBH41JXMN${x}186
MAKE: FREIGHTLINER
MODEL: CASCADIA
YEAR: 2022
LICENSE PLATE: TX${x}A

REGISTRATION NUMBER: REG-TX-${x}-2024
REGISTRATION EXPIRES: ${this.generateRandomDate()}
REGISTERED OWNER: SUNBELT TRUCKING LLC
REGISTRATION STATE: TX

TRUCK NUMBER: ${x}
DOT NUMBER: 12345678
      `.trim();{const g=["Progressive Commercial","State Farm Commercial","Nationwide Commercial","Liberty Mutual Commercial"];return`
COMMERCIAL AUTO LIABILITY CERTIFICATE
${g[parseInt(x)%g.length]}

VEHICLE IDENTIFICATION NUMBER: 1HGBH41JXMN${x}186
VEHICLE: 2022 FREIGHTLINER CASCADIA
LICENSE PLATE: TX${x}A

POLICY NUMBER: POL-${x}-2024
EXPIRATION DATE: ${this.generateRandomInsuranceDate()}
LIABILITY COVERAGE: $${parseInt(x)%2===0?"1,000,000":"2,000,000"}

INSURED: SUNBELT TRUCKING LLC
TRUCK NUMBER: ${x}
      `.trim()}}}generateRandomDate(){const a=["01","02","03","04","05","06","07","08","09","10","11","12"],r=a[Math.floor(Math.random()*a.length)],i=String(Math.floor(Math.random()*28)+1).padStart(2,"0"),c=Math.random()>.5?"2024":"2025";return`${r}/${i}/${c}`}generateRandomInsuranceDate(){const a=Math.random()>.3?"2024":"2025";return`${Math.random()>.5?"12":"06"}/30/${a}`}generateRecentDate(){const a=new Date;return new Date(a.getTime()-Math.random()*90*24*60*60*1e3).toLocaleDateString("en-US")}generateMedicalExpirationDate(){const a=new Date;return new Date(a.getTime()+(Math.random()*360+30)*24*60*60*1e3).toLocaleDateString("en-US")}generatePastDate(){const a=new Date;return new Date(a.getTime()-(Math.random()*1460+365)*24*60*60*1e3).toLocaleDateString("en-US")}generateCDLExpirationDate(){const a=new Date;return new Date(a.getTime()+(Math.random()*1095+365)*24*60*60*1e3).toLocaleDateString("en-US")}async extractTextFromPDF(a){let r=null;try{console.log(`🔍 Starting PDF processing: ${a.name}`),De.showInfo(`Processing PDF ${a.name}...`);const i=await this.readAsText(a);if(i&&i.length>50&&!i.includes("%PDF")&&!i.includes("PDF-"))return console.log(`✅ Direct text extraction successful for ${a.name}`),De.showSuccess(`Successfully extracted text from ${a.name}`),i;De.showInfo(`Direct text extraction failed, using OCR for ${a.name}...`),r=await ph.createWorker("eng",1,{logger:u=>{u.status==="recognizing text"&&console.log(`PDF OCR Progress: ${Math.round(u.progress*100)}%`)}}),await r.setParameters({tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,:-/#$%&()[]{}|"});const{data:{text:c}}=await r.recognize(a);return await r.terminate(),r=null,console.log(`✅ PDF OCR completed for ${a.name}, extracted ${c.length} characters`),c.trim().length<50?(De.handleOCRError(new Error("Insufficient text extracted from PDF"),a.name,()=>this.extractTextFromPDF(a)),console.log(`⚠️ PDF OCR extracted too little text, using fallback mock data for ${a.name}`),this.generateRealisticPDFText(a.name)):(De.showSuccess(`Successfully processed PDF ${a.name}`),c)}catch(i){if(r)try{await r.terminate()}catch(c){console.error("Failed to terminate PDF OCR worker:",c)}return De.handleOCRError(i,a.name,()=>this.extractTextFromPDF(a)),console.log(`🔄 Falling back to mock PDF data for ${a.name}`),this.generateRealisticPDFText(a.name)}}generateRealisticPDFText(a){const r=a.toLowerCase().includes("insurance")||a.toLowerCase().includes("policy"),i=a.match(/(\d{3})/),c=i?i[1]:String(Math.floor(Math.random()*999)+1).padStart(3,"0");if(r){const u=["Progressive Commercial","State Farm Commercial","Nationwide Commercial","GEICO Commercial"];return`
CERTIFICATE OF LIABILITY INSURANCE
${u[parseInt(c)%u.length]}
Policy Effective: 01/01/2024

VEHICLE INFORMATION:
VIN: 1HGBH41JXMN${c}186
Year/Make/Model: 2022 FREIGHTLINER CASCADIA
License Plate: TX${c}A

POLICY DETAILS:
Policy Number: POL-${c}-2024
Expiration Date: ${this.generateRandomInsuranceDate()}
Liability Limit: $${parseInt(c)%2===0?"1,000,000":"2,000,000"}

Named Insured: SUNBELT TRUCKING LLC
Fleet Unit: ${c}
DOT Number: 12345678
      `.trim()}else return`
MOTOR VEHICLE REGISTRATION
Texas Department of Motor Vehicles

Vehicle Identification Number: 1HGBH41JXMN${c}186
Make: FREIGHTLINER
Model: CASCADIA
Year: 2022
Body Style: TRUCK TRACTOR

Registration Information:
Certificate Number: REG-TX-${c}-2024
License Plate Number: TX${c}A
Expiration Date: ${this.generateRandomDate()}
Registration State: TX

Registered Owner:
SUNBELT TRUCKING LLC
Fleet Vehicle: ${c}
      `.trim()}async readAsText(a){return new Promise((r,i)=>{const c=new FileReader;c.onload=u=>{var m;return r(((m=u.target)==null?void 0:m.result)||"")},c.onerror=i,c.readAsText(a)})}async parseWithAI(a,r,i){const c={documentType:r==="unknown"?"registration":r,extractionConfidence:.5,sourceFileName:i,processingNotes:[],needsReview:!1},u=[/(?:VIN|VEHICLE\s+IDENTIFICATION\s+NUMBER|V\.I\.N\.?)\s*[#:]?\s*([A-HJ-NPR-Z0-9]{17})/gi,/\b([A-HJ-NPR-Z0-9]{17})\b/gi];for(const N of u){const E=a.match(N);if(E){let A=E[0].replace(/^(VIN|VEHICLE\s+IDENTIFICATION\s+NUMBER|V\.I\.N\.?)\s*[#:]?\s*/gi,"").trim().toUpperCase();if(A.length===17&&/^[A-HJ-NPR-Z0-9]{17}$/.test(A)){c.vin=A,c.extractionConfidence+=.25;break}}}const m=[/(?:PLATE|LICENSE\s+PLATE|LIC\s+PLATE|LICENSE)\s*[#:]?\s*([A-Z0-9\-\s]{2,10})/gi,/\b[A-Z]{2,3}[-\s]?[0-9]{3,4}[-\s]?[A-Z]?\b/g,/\b[0-9]{3}[-\s]?[A-Z]{3}\b/g,/\b[A-Z]{3}[-\s]?[0-9]{4}\b/g,/\b[A-Z]{1,3}[0-9]{1,6}[A-Z]{0,2}\b/g];for(const N of m){const E=a.match(N);if(E){let A=E[0].replace(/^(PLATE|LICENSE\s+PLATE|LIC\s+PLATE|LICENSE)\s*[#:]?\s*/gi,"").trim();if(A=A.replace(/\s+/g,"").replace(/-+/g,""),A.length>=2&&A.length<=8&&/^[A-Z0-9]+$/.test(A)){c.licensePlate=A,c.extractionConfidence+=.15;break}}}const h=[/(?:EXPIRES?|EXPIR|EXP|VALID\s+UNTIL|THROUGH|RENEWAL|DUE)\s*:?\s*(\d{1,2}[\/\-\.]\d{1,2}[\/\-\.]\d{2,4})/gi,/(?:EXPIRES?|EXPIR|EXP|VALID\s+UNTIL|THROUGH)\s*:?\s*((?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)[A-Z]*\.?\s+\d{1,2},?\s+\d{4})/gi,/(?:EXPIRES?|EXPIR|EXP|VALID\s+UNTIL|THROUGH)\s*:?\s*((?:JANUARY|FEBRUARY|MARCH|APRIL|MAY|JUNE|JULY|AUGUST|SEPTEMBER|OCTOBER|NOVEMBER|DECEMBER)\s+\d{1,2},?\s+\d{4})/gi,/\b(\d{1,2}[\/\-\.]\d{1,2}[\/\-\.]\d{4})\b/g,/\b((?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)[A-Z]*\.?\s+\d{1,2},?\s+\d{4})\b/gi,/\b(\d{4}[-\/]\d{1,2}[-\/]\d{1,2})\b/g],x=[];for(const N of h){const E=a.match(N);E&&E.forEach(A=>{const X=A.replace(/^(EXPIRES?|EXPIR|EXP|VALID\s+UNTIL|THROUGH)\s*:?\s*/gi,"");x.push(X)})}console.log(`📅 Date extraction for ${i} (${r}): found ${x.length} dates:`,x),x.length>0?(r==="registration"?(c.registrationExpiry=x[0],console.log(`📋 Assigned registration expiry: ${x[0]} to ${i}`)):r==="insurance"&&(c.insuranceExpiry=x[0],console.log(`🛡️ Assigned insurance expiry: ${x[0]} to ${i}`)),c.extractionConfidence+=.2):console.log(`⚠️ No dates found in ${i} (${r})`);const g=a.match(/\b(19|20)\d{2}\b/g);g&&(c.year=parseInt(g[0]),c.extractionConfidence+=.1);const y=a.match(/DOT\s*NUMBER:\s*(\d+)/gi);y&&(c.dotNumber=y[0].replace(/DOT\s*NUMBER:\s*/gi,"").trim(),c.extractionConfidence+=.1);const w=[/(?:MAKE|MFR|MANUFACTURER)\s*:?\s*([A-Z][A-Z\s]+)/gi,/\b(FREIGHTLINER|PETERBILT|KENWORTH|VOLVO|MACK|INTERNATIONAL|STERLING|WESTERN\s+STAR|ISUZU|HINO|FORD|CHEVROLET|CHEVY|GMC|DODGE|RAM)\b/gi,/\b(CASCADIA|CENTURY|CLASS|W900|VNL|ANTHEM|PINNACLE|9900I|COLUMBIA|M2|BUSINESS\s+CLASS)\b/gi];for(const N of w){const E=a.match(N);if(E){let A=E[0].replace(/^(MAKE|MFR|MANUFACTURER)\s*:?\s*/gi,"").trim();A.toUpperCase().includes("CHEVY")&&(A="CHEVROLET"),A.toUpperCase().includes("INTERNATIONAL")&&(A="INTERNATIONAL"),c.make=A.toUpperCase(),c.extractionConfidence+=.15;break}}if(c.make){const N=[/(?:MODEL)\s*:?\s*([A-Z0-9][A-Z0-9\s\-]+)/gi,/\b(CASCADIA|CENTURY|CLASS|W900|VNL|ANTHEM|PINNACLE|9900I|COLUMBIA|M2|BUSINESS\s+CLASS|F[0-9]{3}|SIERRA|SILVERADO)\b/gi];for(const E of N){const A=a.match(E);if(A){c.model=A[0].replace(/^(MODEL)\s*:?\s*/gi,"").trim().toUpperCase(),c.extractionConfidence+=.1;break}}}r==="registration"?this.extractRegistrationSpecificData(a,c):r==="insurance"&&this.extractInsuranceSpecificData(a,c),console.log(`🔍 Parsing truck number from document: ${i}`),console.log(`📄 Document text preview: ${a.substring(0,200)}...`);const D=vu.parseFromDocumentText(a);if(console.log("🚛 Truck number results:",D),D.length>0){const N=D.reduce((E,A)=>A.confidence==="high"?A:E);N.confidence!=="low"&&(c.truckNumber=N.truckNumber,c.extractionConfidence+=.15,c.processingNotes.push(`Auto-detected truck number from ${N.source}: ${N.originalValue}`),console.log(`✅ Truck number assigned: ${c.truckNumber}`))}else if(c.vin&&c.licensePlate){const N=vu.parseTruckNumber({vin:c.vin,licensePlate:c.licensePlate,registrationNumber:c.registrationNumber});N.confidence!=="low"&&(c.truckNumber=N.truckNumber,c.extractionConfidence+=.1,c.processingNotes.push(`Auto-detected truck number from ${N.source}: ${N.originalValue}`),N.needsReview&&c.processingNotes.push("Truck number detection needs review - please verify"))}const b=Zi.validateVehicleRecord(c);return b.isValid||(b.errors.forEach(N=>{c.processingNotes.push(`Validation error - ${N.field}: ${N.message}`)}),c.extractionConfidence*=.8),b.warnings.forEach(N=>{c.processingNotes.push(`Warning - ${N.field}: ${N.message}`)}),c.needsReview=c.extractionConfidence<.7||!c.vin||!b.isValid,c.needsReview&&c.processingNotes.push("Low confidence extraction - manual review recommended"),console.log(`📋 Vehicle validation for ${i}:`,b),c}async parseDriverDataWithAI(a,r,i){const c={documentType:r,extractionConfidence:.5,sourceFileName:i,processingNotes:[],needsReview:!1},u=[/(?:DRIVER\s+NAME|NAME|PATIENT\s+NAME)\s*[#:]?\s*([A-Z][a-z]+\s+[A-Z][a-z]+)/gi,/^([A-Z][a-z]+\s+[A-Z][a-z]+)/gm,/(?:LICENSE\s+HOLDER|DRIVER)\s*[#:]?\s*([A-Z][a-z]+\s+[A-Z][a-z]+)/gi];for(const x of u){const g=a.match(x);if(g){const y=g[0].replace(/^(DRIVER\s+NAME|NAME|PATIENT\s+NAME|LICENSE\s+HOLDER|DRIVER)\s*[#:]?\s*/gi,"").trim(),w=y.split(/\s+/);if(w.length>=2){c.firstName=w[0],c.lastName=w.slice(1).join(" "),c.extractionConfidence+=.2,c.processingNotes.push(`Extracted name: ${y}`);break}}}if(r==="medical_certificate"){const x=[/(?:Certificate\s+Number|CERTIFICATE\s+NUMBER|CERT\s+NO|CERTIFICATE\s+#)\s*[#:]?\s*([A-Z0-9\-]+)/gi,/(?:MED\s+CERT\s+#|MEDICAL\s+CERT\s+NUMBER)\s*[#:]?\s*([A-Z0-9\-]+)/gi,/Certificate\s+Number:\s*([A-Z0-9\-]+)/gi,/Certificate\s+No:\s*([A-Z0-9\-]+)/gi];for(const E of x){const A=a.match(E);if(A){c.medicalCertNumber=A[0].replace(/^[^A-Z0-9]*/,"").trim(),c.extractionConfidence+=.15;break}}const g=[/Medical\s+Examiner:\s*(Dr\.\s+[A-Z][a-z]+\s+[A-Z][a-z]+(?:,\s*MD)?)/gi,/(?:EXAMINER|PHYSICIAN|DOCTOR)\s*[#:]?\s*((?:Dr\.\s+)?[A-Z][a-z]+\s+[A-Z][a-z]+(?:,\s*MD)?)/gi,/(?:DR\.|DOCTOR)\s+([A-Z][a-z]+\s+[A-Z][a-z]+(?:,\s*MD)?)/gi,/Examiner\s+Signature:\s*(Dr\.\s+[A-Z][a-z]+\s+[A-Z][a-z]+(?:,\s*MD)?)/gi];for(const E of g){const A=a.match(E);if(A){c.examinerName=A[0].replace(/^(Medical\s+Examiner|EXAMINER|PHYSICIAN|DOCTOR|DR\.|Examiner\s+Signature)\s*[#:]?\s*/gi,"").trim(),c.extractionConfidence+=.1;break}}const y=[/National\s+Registry\s+Number:\s*([0-9]+)/gi,/National\s+Registry\s+ID:\s*([0-9]+)/gi,/Registry\s+Number:\s*([0-9]+)/gi,/(?:NR|NATIONAL\s+REGISTRY)\s*[#:]?\s*([0-9]+)/gi];for(const E of y){const A=a.match(E);if(A){c.examinerNationalRegistry=A[0].replace(/^[^0-9]*/,"").trim(),c.extractionConfidence+=.1;break}}const w=[/Issue\s+Date:\s*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/gi,/Date\s+Issued:\s*([A-Za-z]+\s+\d{1,2},\s+\d{4})/gi,/(?:ISSUE\s+DATE|ISSUED|DATE\s+OF\s+EXAM)\s*[#:]?\s*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/gi,/(?:EXAM\s+DATE|EXAMINATION\s+DATE)\s*[#:]?\s*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/gi],D=[/Expiration\s+Date:\s*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/gi,/(?:EXPIR[ES|ATION]|EXP\s+DATE|VALID\s+UNTIL)\s*[#:]?\s*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/gi,/(?:GOOD\s+UNTIL|EXPIRES\s+ON)\s*[#:]?\s*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/gi];for(const E of w){const A=a.match(E);if(A){c.medicalIssueDate=this.standardizeDate(A[0].replace(/^[^0-9]*/,"").trim()),c.extractionConfidence+=.15;break}}for(const E of D){const A=a.match(E);if(A){c.medicalExpirationDate=this.standardizeDate(A[0].replace(/^[^0-9]*/,"").trim()),c.extractionConfidence+=.15;break}}const b=[/Restrictions:\s*([A-Z\s]+REQUIRED)/gi,/Restrictions:\s*(NONE)/gi,/(?:RESTRICTIONS?|LIMITATIONS?)\s*[#:]?\s*([A-Z0-9\s,]+)/gi,/(?:CORRECTIVE\s+LENSES|HEARING\s+AID|PROSTHETIC)/gi,/CORRECTIVE\s+LENSES\s+REQUIRED/gi],N=[];for(const E of b){const A=a.match(E);A&&A.forEach(X=>{const L=X.replace(/^(RESTRICTIONS?|LIMITATIONS?)\s*[#:]?\s*/gi,"").trim();L&&L.length>1&&N.push(L)})}N.length>0&&(c.medicalRestrictions=N,c.extractionConfidence+=.1)}else if(r==="cdl"){const x=[/(?:CDL\s+Number|License\s+Number|CDL\s+#)\s*[#:]?\s*([A-Z]{2}-CDL-[0-9]{8}|[A-Z0-9\-]+)/gi,/(?:COMMERCIAL\s+DRIVER\s+LICENSE)\s*[#:]?\s*([A-Z]{2}-CDL-[0-9]{8}|[A-Z0-9\-]+)/gi];for(const B of x){const K=[...a.matchAll(B)];if(K.length>0){const ne=K[0][1].trim();if(ne.length>=8&&/[A-Z0-9\-]/.test(ne)){c.cdlNumber=ne,c.extractionConfidence+=.2;break}}}const g=[/Class:\s*([ABC])(?:\s*-\s*[\w\s/]+)?/gi,/(?:CDL\s+CLASS|LICENSE\s+CLASSIFICATION[^:]*Class)\s*[#:]?\s*([ABC])(?:\s*-\s*[\w\s/]+)?/gi];for(const B of g){const K=[...a.matchAll(B)];if(K.length>0){const ne=K[0][1].trim().toUpperCase();if(["A","B","C"].includes(ne)){c.cdlClass=ne,c.extractionConfidence+=.15;break}}}const y=[/(?:STATE|ISSUED\s+BY)\s*[#:]?\s*([A-Z]{2})/gi,/([A-Z]{2})\s+DEPARTMENT\s+OF\s+MOTOR\s+VEHICLES/gi];for(const B of y){const K=a.match(B);if(K){c.cdlState=K[0].replace(/^[^A-Z]*/,"").trim().toUpperCase().slice(0,2),c.extractionConfidence+=.1;break}}const w=[/(?:Issue\s+Date|Original\s+Issue)\s*[#:]?\s*(\d{1,2}\/\d{1,2}\/\d{4})/gi,/(?:ISSUED)\s*[#:]?\s*(\d{1,2}\/\d{1,2}\/\d{4})/gi],D=[/(?:Expiration\s+Date|Current\s+Expiration)\s*[#:]?\s*(\d{1,2}\/\d{1,2}\/\d{4})/gi,/(?:EXPIRES?)\s*[#:]?\s*(\d{1,2}\/\d{1,2}\/\d{4})/gi];for(const B of w){const K=[...a.matchAll(B)];if(K.length>0){c.cdlIssueDate=this.standardizeDate(K[0][1].trim()),c.extractionConfidence+=.1;break}}for(const B of D){const K=[...a.matchAll(B)];if(K.length>0){c.cdlExpirationDate=this.standardizeDate(K[0][1].trim()),c.extractionConfidence+=.15;break}}const b=[],N=/(?:COMMERCIAL\s+)?ENDORSEMENTS([^]*?)(?=RESTRICTIONS|MEDICAL|DRIVER RECORD|$)/i,E=a.match(N);if(E){const B=E[1],K=/([A-Z])\s*[-–]\s*([^\n\r]+)/g;[...B.matchAll(K)].forEach(he=>{const ie=he[1].trim();["H","N","P","S","T","X","W"].includes(ie)&&b.push(ie)})}const A=[/(?:ENDORSEMENTS?)\s*[#:]?\s*([HNTPSX\s,]+)/gi,/(?:ENDORSE)\s*[#:]?\s*([HNTPSX\s,]+)/gi];if(b.length===0)for(const B of A)[...a.matchAll(B)].forEach(ne=>{const ie=ne[1].trim().match(/[HNTPSX]/g);ie&&b.push(...ie)});b.length>0&&(c.cdlEndorsements=[...new Set(b)],c.extractionConfidence+=.15);const X=[],L=/RESTRICTIONS([^]*?)(?=MEDICAL|DRIVER RECORD|California DMV|Texas DPS|$)/i,J=a.match(L);if(J){const B=J[1];if(!B.includes("NONE")){const K=/([A-Z])\s*[-–]\s*([^\n\r]+)/g;[...B.matchAll(K)].forEach(he=>{const ie=he[1].trim(),ee=he[2].trim();X.push(`${ie} - ${ee}`)})}}X.length>0&&(c.cdlRestrictions=X,c.extractionConfidence+=.1)}const m=[/(?:DATE\s+OF\s+BIRTH|DOB|BIRTH\s+DATE)\s*[#:]?\s*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/gi,/(?:BORN)\s*[#:]?\s*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/gi];for(const x of m){const g=a.match(x);if(g){c.dateOfBirth=this.standardizeDate(g[0].replace(/^[^0-9]*/,"").trim()),c.extractionConfidence+=.1;break}}const h=Zi.validateDriverInfo(c);if(r==="medical_certificate"){const x=Zi.validateMedicalCertificate({certificateNumber:c.medicalCertNumber,issuedDate:c.medicalIssueDate,expirationDate:c.medicalExpirationDate,examinerName:c.examinerName,examinerNationalRegistry:c.examinerNationalRegistry,restrictions:c.medicalRestrictions});h.errors.push(...x.errors),h.warnings.push(...x.warnings),h.isValid=h.isValid&&x.isValid}if(r==="cdl"){const x=Zi.validateCDL({cdlNumber:c.cdlNumber,cdlClass:c.cdlClass,cdlState:c.cdlState,cdlIssueDate:c.cdlIssueDate,cdlExpirationDate:c.cdlExpirationDate,cdlEndorsements:c.cdlEndorsements});h.errors.push(...x.errors),h.warnings.push(...x.warnings),h.isValid=h.isValid&&x.isValid}return h.isValid||(h.errors.forEach(x=>{c.processingNotes.push(`Validation error - ${x.field}: ${x.message}`)}),c.extractionConfidence*=.8),h.warnings.forEach(x=>{c.processingNotes.push(`Warning - ${x.field}: ${x.message}`)}),c.needsReview=c.extractionConfidence<.7||!c.firstName||!c.lastName||!h.isValid,c.needsReview&&c.processingNotes.push("Low confidence extraction - manual review recommended"),console.log(`👤 Driver validation for ${i}:`,h),c}standardizeDate(a){try{const i=a.replace(/[^\d\/\-]/g,"").split(/[\/\-]/);if(i.length===3){let c=parseInt(i[2]),u=parseInt(i[0]),m=parseInt(i[1]);return c<100&&(c+=c<50?2e3:1900),`${c}-${u.toString().padStart(2,"0")}-${m.toString().padStart(2,"0")}`}return a}catch(r){return console.warn("Error standardizing date:",a,r),a}}extractRegistrationSpecificData(a,r){const i=[/(?:REG|REGISTRATION)\s*(?:NUMBER|NO|#)?\s*[:#]?\s*([A-Z0-9\-]+)/gi,/(?:CERTIFICATE|CERT)\s*(?:NUMBER|NO|#)?\s*[:#]?\s*([A-Z0-9\-]+)/gi,/\b([A-Z]{2,3}[-\s]?[0-9]{6,8}[-\s]?[A-Z0-9]*)\b/g];for(const m of i){const h=a.match(m);if(h){r.registrationNumber=h[0].replace(/^(REG|REGISTRATION|CERTIFICATE|CERT)\s*(?:NUMBER|NO|#)?\s*[:#]?\s*/gi,"").trim();break}}const c=[/\b(AL|AK|AZ|AR|CA|CO|CT|DE|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY)\b/g,/\b(TEXAS|CALIFORNIA|FLORIDA|NEW\s+YORK|PENNSYLVANIA|ILLINOIS|OHIO|GEORGIA|NORTH\s+CAROLINA|MICHIGAN)\b/gi];for(const m of c){const h=a.match(m);if(h){let x=h[0].toUpperCase();const g={TEXAS:"TX",CALIFORNIA:"CA",FLORIDA:"FL","NEW YORK":"NY",PENNSYLVANIA:"PA",ILLINOIS:"IL",OHIO:"OH",GEORGIA:"GA","NORTH CAROLINA":"NC",MICHIGAN:"MI"};r.registrationState=g[x]||x;break}}const u=[/(?:OWNER|REGISTERED\s+TO|REGISTRANT)\s*:?\s*([A-Z][A-Z\s,\.&]+(?:LLC|INC|CORP|CO|COMPANY|TRUCKING)*)/gi,/(?:NAME)\s*:?\s*([A-Z][A-Z\s,\.&]+(?:LLC|INC|CORP|CO|COMPANY|TRUCKING)*)/gi];for(const m of u){const h=a.match(m);if(h){r.registeredOwner=h[0].replace(/^(OWNER|REGISTERED\s+TO|REGISTRANT|NAME)\s*:?\s*/gi,"").trim();break}}}extractInsuranceSpecificData(a,r){console.log(`🛡️ Extracting insurance data from: ${r.sourceFileName}`);const i=[/(?:CARRIER|COMPANY|INSURER)\s*:?\s*([A-Z\s&]+)/gi,/\b(STATE\s+FARM|GEICO|PROGRESSIVE|ALLSTATE|FARMERS|LIBERTY\s+MUTUAL|NATIONWIDE|USAA)\b/gi];for(const m of i){const h=a.match(m);if(h){r.insuranceCarrier=h[0].replace(/^(CARRIER|COMPANY|INSURER)\s*:?\s*/gi,"").trim();break}}const c=a.match(/(?:POLICY|POL)\s*[#:]?\s*([A-Z0-9\-]+)/gi);c&&(r.policyNumber=c[0].replace(/^(POLICY|POL)\s*[#:]?\s*/gi,""));const u=a.match(/\$[\d,]+/g);if(u){const m=u[0].replace(/[$,]/g,"");r.coverageAmount=parseInt(m)}console.log(`🛡️ Insurance extraction complete for ${r.sourceFileName}:`,{carrier:r.insuranceCarrier,policy:r.policyNumber,expiry:r.insuranceExpiry,coverage:r.coverageAmount})}async getDocumentPreview(a){return a.type.startsWith("image/")?`IMAGE_${a.name}`:(await this.readAsText(a)).substring(0,1e3)}classifyByContent(a){const r=a.toLowerCase(),i=["registration","department of motor vehicles","dmv","vehicle title","license plate"],c=i.reduce((h,x)=>h+(r.includes(x)?1:0),0)/i.length,u=["insurance","policy","coverage","premium","certificate","liability"],m=u.reduce((h,x)=>h+(r.includes(x)?1:0),0)/u.length;return c>m&&c>.3?{type:"registration",confidence:c}:m>.3?{type:"insurance",confidence:m}:{type:"unknown",confidence:.1}}mergeVehicleData(a){const r={};return a.forEach(i=>{const c=i.vin||i.licensePlate||i.sourceFileName;if(r[c]){const u=r[c];r[c]={...u,...i,processingNotes:[...u.processingNotes,...i.processingNotes],extractionConfidence:Math.max(u.extractionConfidence,i.extractionConfidence),needsReview:u.needsReview||i.needsReview}}else r[c]=i}),Object.values(r)}async processDocumentsWithClaude(a,r){const i=Date.now(),c=a.length;try{r==null||r(10,"Initializing Claude Vision processor...");const u=Array.from(a);r==null||r(20,`Processing ${c} documents with Claude Vision...`);const m=await Ph.processDocuments(u);r==null||r(70,"Converting Claude results to TruckBo format...");const h=[],x=[];m.forEach((y,w)=>{var D,b;if(y.success&&y.data){const N=y.data,E=u[w].name;if(["registration","insurance","inspection"].includes(N.documentType)){const A={vin:N.extractedData.vin||"",licensePlate:N.extractedData.licensePlate||"",make:N.extractedData.make||"",model:N.extractedData.model||"",year:parseInt(N.extractedData.year||"0")||0,registrationNumber:N.extractedData.registrationNumber||"",registrationState:N.extractedData.state||"",registrationExpiry:N.extractedData.expirationDate||"",insurancePolicyNumber:N.extractedData.policyNumber||"",insuranceCompany:N.extractedData.insuranceCompany||"",insuranceExpiry:N.extractedData.expirationDate||"",coverageAmount:parseFloat(N.extractedData.coverageAmount||"0")||0,sourceFileName:E,extractionConfidence:N.confidence,needsReview:N.requiresReview||!1,processingNotes:N.processingNotes||[],documentType:N.documentType,lastUpdated:new Date().toISOString()};h.push(A)}if(["medical_certificate","cdl_license"].includes(N.documentType)){const A={firstName:((D=N.extractedData.driverName)==null?void 0:D.split(" ")[0])||"",lastName:((b=N.extractedData.driverName)==null?void 0:b.split(" ").slice(1).join(" "))||"",cdlNumber:N.extractedData.licenseNumber||"",cdlState:N.extractedData.state||"",cdlClass:N.extractedData.licenseClass,cdlExpirationDate:N.extractedData.expirationDate||"",cdlEndorsements:N.extractedData.endorsements||[],medicalCertNumber:N.extractedData.medicalCertificateNumber||"",examinerName:N.extractedData.medicalExaminerName||"",medicalExpirationDate:N.extractedData.expirationDate||"",medicalRestrictions:N.extractedData.restrictions||[],sourceFileName:E,extractionConfidence:N.confidence,needsReview:N.requiresReview||!1,processingNotes:N.processingNotes||[],documentType:N.documentType};x.push(A)}}}),r==null||r(90,"Finalizing results...");const g={totalFiles:c,processedFiles:m.filter(y=>y.success).length,failedFiles:m.filter(y=>!y.success).length,vehiclesFound:h.length,driversFound:x.length,processingTime:Date.now()-i,claudeStats:Ph.getProcessingStats(m),averageConfidence:m.filter(y=>y.success&&y.data).reduce((y,w)=>{var D;return y+(((D=w.data)==null?void 0:D.confidence)||0)},0)/m.filter(y=>y.success).length,documentsRequiringReview:m.filter(y=>{var w;return y.success&&((w=y.data)==null?void 0:w.requiresReview)}).length};return r==null||r(100,`Processing complete! Found ${h.length} vehicles and ${x.length} drivers`),{vehicleData:this.mergeVehicleData(h),driverData:x,processingStats:g,claudeResults:m}}catch(u){throw console.error("Claude document processing error:",u),new Error(`Document processing failed: ${u instanceof Error?u.message:"Unknown error"}`)}}async processDocumentsHybrid(a,r){try{r==null||r(0,"Attempting Claude Vision processing...");const c=await this.processDocumentsWithClaude(a,(u,m)=>{r==null||r(u*.8,m)});if(c.vehicleData.length>0||c.driverData.length>0)return{vehicleData:c.vehicleData,driverData:c.driverData,processingStats:c.processingStats}}catch(c){console.warn("Claude processing failed, falling back to Tesseract:",c)}r==null||r(80,"Claude processing incomplete, using Tesseract OCR fallback...");const i=await this.processBulkDocuments(a);return{vehicleData:i.vehicleData,driverData:i.driverData,processingStats:{...i.summary||{},usedFallback:!0,fallbackReason:"Claude processing failed or returned no results"}}}}const Qt=new Zy,Rx=({isOpen:f,onClose:a,onDocumentsProcessed:r})=>{const[i,c]=G.useState("upload"),[u,m]=G.useState(null),[h,x]=G.useState(null),[g,y]=G.useState(!1),[w,D]=G.useState(0),[b,N]=G.useState(null),E=G.useRef(null),A=G.useRef(null),X=()=>{c("upload"),m(null),x(null),y(!1),D(0),N(null)},L=()=>{X(),a()},J=ee=>{ee&&ee.length>0&&(m(ee),N(null),console.log(`📁 Selected ${ee.length} files for processing`))},B=ee=>{J(ee.target.files)},K=ee=>{J(ee.target.files)},ne=async()=>{if(!u){N("Please select files to process");return}y(!0),c("processing"),D(0);try{const ee=setInterval(()=>{D(W=>Math.min(W+10,90))},500);console.log(`🚀 Starting AI document processing for ${u.length} files`);const Ce=await Qt.processBulkDocuments(u);clearInterval(ee),D(100),x(Ce),c("review"),console.log(`✅ Processing complete: ${Ce.summary.processed} files processed`)}catch(ee){N(ee instanceof Error?ee.message:"Processing failed"),c("upload")}finally{y(!1)}},he=()=>{h&&(r(h.vehicleData),c("complete"),setTimeout(()=>{L()},2e3))},ie=ee=>{switch(ee.toLowerCase().split(".").pop()){case"pdf":return"📄";case"jpg":case"jpeg":case"png":return"🖼️";case"doc":case"docx":return"📝";default:return"📋"}};return f?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black",children:"🤖 AI Document Processing"}),n.jsx("p",{className:"text-purple-100 mt-1",children:"Upload registration & insurance documents for automatic processing"})]}),n.jsx("button",{onClick:L,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors duration-200",children:n.jsx("span",{className:"text-xl",children:"✕"})})]})}),n.jsxs("div",{className:"p-6",children:[b&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-red-500 text-xl mr-3",children:"❌"}),n.jsx("span",{className:"text-red-700 font-medium",children:b})]})}),i==="upload"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-blue-600 text-2xl",children:"🤖"})})}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"AI-Powered Document Processing"}),n.jsx("p",{className:"text-blue-700 text-sm mb-3",children:"Our AI can automatically extract vehicle information from:"}),n.jsxs("ul",{className:"text-blue-700 text-sm space-y-1 mb-4",children:[n.jsx("li",{children:"✅ Vehicle registration documents"}),n.jsx("li",{children:"✅ Insurance certificates and policies"}),n.jsx("li",{children:"✅ Title documents"}),n.jsx("li",{children:"✅ PDF, JPG, PNG, and DOC files"})]}),n.jsx("div",{className:"bg-blue-100 rounded-lg p-3",children:n.jsx("p",{className:"text-blue-800 text-xs font-medium",children:'💡 Pro Tip: Organize your files with clear names like "truck_123_registration.pdf" or "insurance_policy_2024.pdf"'})})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"border-2 border-dashed border-purple-300 rounded-xl p-8 text-center hover:border-purple-400 transition-colors duration-200",children:[n.jsx("input",{ref:A,type:"file",multiple:!0,webkitdirectory:"",onChange:B,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.tiff,.doc,.docx,.txt"}),n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4",children:"📁"}),n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload Entire Folder"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Select a folder containing all your vehicle documents"}),n.jsx("button",{onClick:()=>{var ee;return(ee=A.current)==null?void 0:ee.click()},className:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 hover:scale-105 active:scale-95",children:"📁 Select Folder"})]}),n.jsxs("div",{className:"border-2 border-dashed border-indigo-300 rounded-xl p-8 text-center hover:border-indigo-400 transition-colors duration-200",children:[n.jsx("input",{ref:E,type:"file",multiple:!0,onChange:K,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.tiff,.doc,.docx,.txt"}),n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4",children:"📄"}),n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select Multiple Files"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Choose individual documents from different locations"}),n.jsx("button",{onClick:()=>{var ee;return(ee=E.current)==null?void 0:ee.click()},className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 hover:scale-105 active:scale-95",children:"📄 Select Files"})]})]}),u&&n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsxs("h4",{className:"font-bold text-gray-900 mb-4",children:["Selected Files (",u.length,")"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-6",children:[Array.from(u).slice(0,12).map((ee,Ce)=>n.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg border",children:[n.jsx("span",{className:"text-2xl mr-3",children:ie(ee.name)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:ee.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(ee.size/1024).toFixed(1)," KB"]})]})]},Ce)),u.length>12&&n.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-100 rounded-lg border-2 border-dashed",children:n.jsxs("span",{className:"text-gray-500 text-sm",children:["+",u.length-12," more files"]})})]}),n.jsx("button",{onClick:ne,disabled:g,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-8 py-4 rounded-2xl font-black text-lg shadow-xl shadow-purple-900/20 hover:shadow-2xl hover:shadow-purple-900/30 transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:"🤖 Start AI Processing"})]})]}),i==="processing"&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin text-6xl mb-6",children:"🤖"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"AI Processing Documents"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Extracting vehicle information, registration dates, and insurance details..."}),n.jsxs("div",{className:"max-w-md mx-auto mb-6",children:[n.jsx("div",{className:"bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:`${w}%`}})}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[w,"% complete"]})]}),n.jsx("div",{className:"bg-blue-50 rounded-xl p-4 max-w-md mx-auto",children:n.jsx("p",{className:"text-blue-700 text-sm",children:"🔍 Using AI to identify VINs, license plates, expiry dates, and insurance details"})})]}),i==="review"&&h&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-green-500 text-2xl mr-3",children:"✅"}),n.jsx("h3",{className:"text-xl font-bold text-green-800",children:"Processing Complete!"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.summary.totalFiles}),n.jsx("div",{className:"text-sm text-green-700",children:"Files Uploaded"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.summary.processed}),n.jsx("div",{className:"text-sm text-blue-700",children:"Successfully Processed"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:h.summary.registrationDocs}),n.jsx("div",{className:"text-sm text-purple-700",children:"Registration Docs"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:h.summary.insuranceDocs}),n.jsx("div",{className:"text-sm text-indigo-700",children:"Insurance Docs"})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsx("h4",{className:"font-bold text-gray-900",children:"Extracted Vehicle Data"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Review and verify the AI-extracted information"})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:h.vehicleData.map((ee,Ce)=>n.jsx("div",{className:`p-4 border-b border-gray-100 ${ee.needsReview?"bg-yellow-50":"bg-white"}`,children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("span",{className:"text-lg mr-2",children:ee.documentType==="registration"?"📋":"🛡️"}),n.jsxs("h5",{className:"font-bold text-gray-900",children:[ee.year," ",ee.make," ",ee.model||"Unknown Model"]}),ee.needsReview&&n.jsx("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full",children:"Needs Review"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"VIN:"}),n.jsx("div",{className:"font-mono font-bold",children:ee.vin||"—"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"License Plate:"}),n.jsx("div",{className:"font-bold",children:ee.licensePlate||"—"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Expiry Date:"}),n.jsx("div",{className:"font-bold",children:ee.registrationExpiry||ee.insuranceExpiry||"—"})]})]}),n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Source: ",ee.sourceFileName," | Confidence: ",Math.round(ee.extractionConfidence*100),"%"]})]})})},Ce))})]}),(h.errors.length>0||h.unprocessedFiles.length>0)&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[n.jsx("h4",{className:"font-bold text-amber-800 mb-2",children:"Attention Required"}),h.unprocessedFiles.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm text-amber-700 mb-1",children:"Unprocessed files:"}),n.jsx("ul",{className:"text-xs text-amber-600 list-disc list-inside",children:h.unprocessedFiles.map((ee,Ce)=>n.jsx("li",{children:ee},Ce))})]}),h.errors.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-amber-700 mb-1",children:"Processing errors:"}),n.jsx("ul",{className:"text-xs text-amber-600 list-disc list-inside",children:h.errors.map((ee,Ce)=>n.jsxs("li",{children:[ee.fileName,": ",ee.error]},Ce))})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>c("upload"),className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold transition-colors duration-200",children:"← Process More Files"}),n.jsxs("button",{onClick:he,className:"flex-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-bold transition-all duration-200 hover:scale-105 active:scale-95",children:["✅ Add ",h.vehicleData.length," Vehicles to Fleet"]})]})]}),i==="complete"&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),n.jsx("h3",{className:"text-2xl font-bold text-green-600 mb-2",children:"Documents Processed Successfully!"}),n.jsx("p",{className:"text-gray-600",children:"Vehicle data has been extracted and added to your fleet management system."}),n.jsx("div",{className:"mt-6",children:n.jsxs("div",{className:"inline-flex items-center text-green-600",children:[n.jsx("span",{className:"animate-spin mr-2",children:"⏳"}),"Closing automatically..."]})})]})]})]})}):null};class Jy{constructor(){le(this,"STORAGE_KEY","truckbo_document_batches");le(this,"listeners",[])}getProcessingState(){try{const a=localStorage.getItem(this.STORAGE_KEY);if(a)return JSON.parse(a)}catch(a){console.error("Error loading document processing state:",a)}return{batches:[],allExtractedData:[],reconciliationResult:null,totalDocumentsProcessed:0,lastProcessedAt:""}}saveProcessingState(a){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a)),this.notifyListeners(a)}catch(r){console.error("Error saving document processing state:",r)}}async processBatch(a){console.log(`📁 Processing new document batch: ${a.length} files`);const r=await Qt.processBulkDocuments(a),i={id:`batch_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),totalFiles:a.length,processedFiles:r.summary.processed,registrationDocs:r.summary.registrationDocs,insuranceDocs:r.summary.insuranceDocs,extractedData:r.vehicleData,errors:r.errors},c=this.getProcessingState(),u={batches:[...c.batches,i],allExtractedData:[...c.allExtractedData,...i.extractedData],reconciliationResult:null,totalDocumentsProcessed:c.totalDocumentsProcessed+i.processedFiles,lastProcessedAt:i.timestamp};return u.reconciliationResult=this.reconcileVehicleData(u.allExtractedData),this.saveProcessingState(u),console.log(`✅ Batch processed: ${i.processedFiles} documents, ${i.registrationDocs} registration, ${i.insuranceDocs} insurance`),i}reconcileVehicleData(a){console.log(`🔄 Reconciling vehicle data from ${a.length} extracted records`),a.forEach((y,w)=>{console.log(`📋 Record ${w+1}: VIN=${y.vin}, Type=${y.documentType}, File=${y.sourceFileName}`),console.log(`   Registration Fields: ${y.registrationNumber?"✅":"❌"} regNum, ${y.registrationExpiry?"✅":"❌"} regExp`),console.log(`   Insurance Fields: ${y.insuranceCarrier?"✅":"❌"} carrier, ${y.policyNumber?"✅":"❌"} policy`)});const r={};a.forEach(y=>{const w=y.vin;w&&(r[w]||(r[w]={sources:[]}),y.documentType==="registration"?(console.log(`📋 Assigning ${w} as REGISTRATION from ${y.sourceFileName}`),r[w].registration=y,r[w].sources.push(`Registration: ${y.sourceFileName}`)):y.documentType==="insurance"?(console.log(`🛡️ Assigning ${w} as INSURANCE from ${y.sourceFileName}`),r[w].insurance=y,r[w].sources.push(`Insurance: ${y.sourceFileName}`)):console.log(`⚠️ Unknown document type '${y.documentType}' for ${w} from ${y.sourceFileName}`))});const i=[],c=[],u=[],m=[];Object.entries(r).forEach(([y,w])=>{const D=!!w.registration,b=!!w.insurance,N=this.createMergedVehicleRecord(y,w.registration,w.insurance);w.sources.length>2&&m.push({vin:y,sources:w.sources}),D&&b?i.push(N):D?c.push(N):b&&u.push(N)});const h=i.length+c.length+u.length,x=h>0?Math.round(i.length/h*100):0,g={completeVehicles:i,registrationOnly:c,insuranceOnly:u,duplicates:m,summary:{totalVehicles:h,fullyDocumented:i.length,missingInsurance:c.length,missingRegistration:u.length,reconciliationScore:x}};return console.log(`✅ Reconciliation complete: ${g.summary.fullyDocumented}/${g.summary.totalVehicles} vehicles fully documented (${x}%)`),g}createMergedVehicleRecord(a,r,i){console.log(`🔗 Merging vehicle record for VIN: ${a}`),console.log(`   Registration data available: ${r?"✅":"❌"}`,r?{file:r.sourceFileName,regNum:r.registrationNumber,regExp:r.registrationExpiry,regState:r.registrationState}:"none"),console.log(`   Insurance data available: ${i?"✅":"❌"}`,i?{file:i.sourceFileName,carrier:i.insuranceCarrier,policy:i.policyNumber,insExp:i.insuranceExpiry}:"none");const c=r||i,u=r?i:void 0,m={id:`vehicle_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,vin:a,make:c.make||(u==null?void 0:u.make)||"Unknown",model:c.model||(u==null?void 0:u.model)||"Unknown",year:c.year||(u==null?void 0:u.year)||new Date().getFullYear(),licensePlate:c.licensePlate||(u==null?void 0:u.licensePlate)||"Unknown",dotNumber:c.dotNumber||(u==null?void 0:u.dotNumber),truckNumber:c.truckNumber||(u==null?void 0:u.truckNumber)||"",status:"active",dateAdded:new Date().toISOString(),lastUpdated:new Date().toISOString(),registrationNumber:r==null?void 0:r.registrationNumber,registrationState:r==null?void 0:r.registrationState,registrationExpiry:r==null?void 0:r.registrationExpiry,registeredOwner:r==null?void 0:r.registeredOwner,insuranceCarrier:i==null?void 0:i.insuranceCarrier,policyNumber:i==null?void 0:i.policyNumber,insuranceExpiry:i==null?void 0:i.insuranceExpiry,coverageAmount:i==null?void 0:i.coverageAmount};return console.log(`✅ Created merged record for ${a}:`,{regFields:{registrationNumber:m.registrationNumber,registrationExpiry:m.registrationExpiry,registrationState:m.registrationState},insFields:{insuranceCarrier:m.insuranceCarrier,policyNumber:m.policyNumber,insuranceExpiry:m.insuranceExpiry,coverageAmount:m.coverageAmount}}),m.insuranceExpiry==="12/31/2024"&&(console.log(`🚨 DUPLICATE INSURANCE DATE DETECTED for ${a}! All showing 12/31/2024`),console.log(`   Insurance source file: ${i==null?void 0:i.sourceFileName}`),console.log("   Insurance raw extracted data:",i)),m}async applyReconciliation(){const a=this.getProcessingState();if(!a.reconciliationResult)throw new Error("No reconciliation data available - process documents first");console.log(`📄 Applying reconciliation: ${a.reconciliationResult.summary.totalVehicles} vehicles`);const i=[...a.reconciliationResult.completeVehicles,...a.reconciliationResult.registrationOnly,...a.reconciliationResult.insuranceOnly].map(u=>{const{id:m,dateAdded:h,lastUpdated:x,...g}=u;return g}),c=ze.addVehicles(i);return console.log(`✅ Applied reconciliation: ${c.successful.length} successful, ${c.failed.length} failed`),c}clearProcessingData(){const a={batches:[],allExtractedData:[],reconciliationResult:null,totalDocumentsProcessed:0,lastProcessedAt:""};this.saveProcessingState(a),console.log("🗑️ Cleared all document processing data")}subscribe(a){return this.listeners.push(a),()=>{this.listeners=this.listeners.filter(r=>r!==a)}}notifyListeners(a){this.listeners.forEach(r=>{try{r(a)}catch(i){console.error("Error in multi-batch processor listener:",i)}})}}const Ot=new Jy,Wy=({isOpen:f,onClose:a,onDocumentsReconciled:r})=>{var ee,Ce;const[i,c]=G.useState("overview"),[u,m]=G.useState(null),[h,x]=G.useState(null),[g,y]=G.useState(!1),[w,D]=G.useState(0),[b,N]=G.useState(null),E=G.useRef(null);G.useEffect(()=>{if(f){const W=Ot.getProcessingState();x(W),c(W.batches.length===0?"upload":"overview")}},[f]),G.useEffect(()=>Ot.subscribe(ve=>{x(ve)}),[]);const A=()=>{c("overview"),m(null),y(!1),D(0),N(null)},X=()=>{A(),a()},L=W=>{W&&W.length>0&&(m(W),N(null),console.log(`📁 Selected ${W.length} files for processing`))},J=W=>{L(W.target.files)},B=async()=>{if(!u){N("Please select files to process");return}y(!0),c("processing"),D(0);try{const W=setInterval(()=>{D(ve=>Math.min(ve+10,90))},300);console.log(`🚀 Starting batch processing for ${u.length} files`),await Ot.processBatch(u),clearInterval(W),D(100),c("reconciliation"),console.log("✅ Batch processing complete")}catch(W){N(W instanceof Error?W.message:"Batch processing failed"),c("upload")}finally{y(!1)}},K=async()=>{if(!(h!=null&&h.reconciliationResult)){N("No reconciliation data available");return}y(!0);try{const W=await Ot.applyReconciliation();console.log(`✅ Applied reconciliation: ${W.successful.length} vehicles added to fleet`),r(W.successful.length),c("complete"),setTimeout(()=>{X()},3e3)}catch(W){N(W instanceof Error?W.message:"Failed to apply reconciliation")}finally{y(!1)}},ne=()=>{Ot.clearProcessingData(),c("upload")},he=W=>{switch(W.toLowerCase().split(".").pop()){case"pdf":return"📄";case"jpg":case"jpeg":case"png":return"🖼️";case"doc":case"docx":return"📝";case"txt":return"📋";default:return"📋"}},ie=W=>new Date(W).toLocaleString();return f?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black",children:"🔄 Multi-Batch Document Processing"}),n.jsx("p",{className:"text-purple-100 mt-1",children:"Upload registration and insurance documents separately, then reconcile data"})]}),n.jsx("button",{onClick:X,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors duration-200",children:n.jsx("span",{className:"text-xl",children:"✕"})})]})}),n.jsxs("div",{className:"p-6",children:[b&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-red-500 text-xl mr-3",children:"❌"}),n.jsx("span",{className:"text-red-700 font-medium",children:b})]})}),i==="overview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-blue-600 text-2xl",children:"📊"})})}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Multi-Batch Processing Overview"}),n.jsx("p",{className:"text-blue-700 text-sm mb-3",children:"This advanced document processor allows you to upload documents in multiple batches and intelligently reconcile the data:"}),n.jsxs("ul",{className:"text-blue-700 text-sm space-y-1",children:[n.jsx("li",{children:"✅ Upload registration documents in one batch"}),n.jsx("li",{children:"✅ Upload insurance documents in another batch"}),n.jsx("li",{children:"✅ Automatic data reconciliation by VIN"}),n.jsx("li",{children:"✅ Complete compliance data merging"})]})]})]})}),h&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h4",{className:"font-bold text-gray-900",children:"Processing Status"})}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.batches.length}),n.jsx("div",{className:"text-sm text-blue-700",children:"Batches Processed"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.totalDocumentsProcessed}),n.jsx("div",{className:"text-sm text-green-700",children:"Total Documents"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((ee=h.reconciliationResult)==null?void 0:ee.summary.fullyDocumented)||0}),n.jsx("div",{className:"text-sm text-purple-700",children:"Complete Vehicles"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[((Ce=h.reconciliationResult)==null?void 0:Ce.summary.reconciliationScore)||0,"%"]}),n.jsx("div",{className:"text-sm text-indigo-700",children:"Data Completeness"})]})]}),h.batches.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Recent Batches:"}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:h.batches.slice(-3).map(W=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-lg mr-3",children:"📁"}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium",children:[W.registrationDocs," registration, ",W.insuranceDocs," insurance"]}),n.jsx("div",{className:"text-xs text-gray-500",children:ie(W.timestamp)})]})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[W.processedFiles,"/",W.totalFiles," files"]})]},W.id))})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>c("upload"),className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl font-bold transition-all duration-200 hover:scale-105 active:scale-95",children:"📁 Upload More Documents"}),(h==null?void 0:h.reconciliationResult)&&n.jsx("button",{onClick:()=>c("reconciliation"),className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-bold transition-all duration-200 hover:scale-105 active:scale-95",children:"🔄 View Reconciliation"}),(h==null?void 0:h.batches)&&h.batches.length>0&&n.jsx("button",{onClick:ne,className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-xl font-bold transition-all duration-200",children:"🗑️ Clear All"})]})]}),i==="upload"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-green-600 text-2xl",children:"📂"})})}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("h3",{className:"font-bold text-green-800 mb-2",children:"Upload Document Batch"}),n.jsx("p",{className:"text-green-700 text-sm mb-3",children:"You can upload documents in separate batches (e.g., all registration documents first, then all insurance documents). The system will automatically reconcile the data by VIN."}),n.jsx("div",{className:"bg-green-100 rounded-lg p-3",children:n.jsx("p",{className:"text-green-800 text-xs font-medium",children:"💡 Pro Tip: Upload one document type at a time for better organization and reconciliation"})})]})]})}),n.jsxs("div",{className:"border-2 border-dashed border-purple-300 rounded-xl p-8 text-center hover:border-purple-400 transition-colors duration-200",children:[n.jsx("input",{ref:E,type:"file",multiple:!0,onChange:J,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.tiff,.doc,.docx,.txt"}),n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4",children:"📁"}),n.jsx("h5",{className:"text-lg font-semibold text-gray-900 mb-2",children:u?`Selected: ${u.length} files`:"Select Document Batch"}),n.jsx("p",{className:"text-gray-500 mb-4",children:u?"Click process to continue":"Choose registration documents, insurance documents, or mixed batch"}),n.jsx("button",{onClick:()=>{var W;return(W=E.current)==null?void 0:W.click()},className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 hover:scale-105 active:scale-95",children:u?"📄 Change Files":"📁 Browse Files"})]}),u&&n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsxs("h4",{className:"font-bold text-gray-900 mb-4",children:["Selected Files (",u.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-6 max-h-60 overflow-y-auto",children:Array.from(u).map((W,ve)=>n.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg border",children:[n.jsx("span",{className:"text-2xl mr-3",children:he(W.name)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:W.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(W.size/1024).toFixed(1)," KB"]})]})]},ve))}),n.jsx("button",{onClick:B,disabled:g,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-8 py-4 rounded-2xl font-black text-lg shadow-xl shadow-purple-900/20 hover:shadow-2xl hover:shadow-purple-900/30 transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:"🚀 Process Batch"})]})]}),i==="processing"&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin text-6xl mb-6",children:"🔄"}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Processing Document Batch"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Extracting vehicle information and preparing for reconciliation..."}),n.jsxs("div",{className:"max-w-md mx-auto mb-6",children:[n.jsx("div",{className:"bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:`${w}%`}})}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[w,"% complete"]})]})]}),i==="reconciliation"&&(h==null?void 0:h.reconciliationResult)&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-green-500 text-2xl mr-3",children:"✅"}),n.jsx("h3",{className:"text-xl font-bold text-green-800",children:"Data Reconciliation Complete!"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.reconciliationResult.summary.totalVehicles}),n.jsx("div",{className:"text-sm text-green-700",children:"Total Vehicles"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.reconciliationResult.summary.fullyDocumented}),n.jsx("div",{className:"text-sm text-blue-700",children:"Complete Records"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:h.reconciliationResult.summary.missingInsurance}),n.jsx("div",{className:"text-sm text-orange-700",children:"Missing Insurance"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.reconciliationResult.summary.missingRegistration}),n.jsx("div",{className:"text-sm text-red-700",children:"Missing Registration"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Data Completeness"}),n.jsxs("span",{className:"text-sm font-bold text-purple-600",children:[h.reconciliationResult.summary.reconciliationScore,"%"]})]}),n.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 h-2 rounded-full transition-all duration-500",style:{width:`${h.reconciliationResult.summary.reconciliationScore}%`}})})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h4",{className:"font-bold text-gray-900",children:"Reconciliation Breakdown"})}),n.jsxs("div",{className:"p-4 space-y-4 max-h-60 overflow-y-auto",children:[h.reconciliationResult.completeVehicles.length>0&&n.jsxs("div",{children:[n.jsxs("h5",{className:"font-semibold text-green-700 mb-2",children:["✅ Complete Records (",h.reconciliationResult.completeVehicles.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:h.reconciliationResult.completeVehicles.slice(0,4).map((W,ve)=>n.jsxs("div",{className:"p-2 bg-green-50 rounded border-l-4 border-green-500",children:[n.jsx("div",{className:"text-sm font-medium",children:W.truckNumber||`#${W.vin.slice(-3)}`}),n.jsxs("div",{className:"text-xs text-gray-600",children:[W.make," ",W.model," • ",W.vin.slice(-6)]})]},ve))}),h.reconciliationResult.completeVehicles.length>4&&n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["... and ",h.reconciliationResult.completeVehicles.length-4," more"]})]}),h.reconciliationResult.registrationOnly.length>0&&n.jsxs("div",{children:[n.jsxs("h5",{className:"font-semibold text-orange-700 mb-2",children:["⚠️ Missing Insurance (",h.reconciliationResult.registrationOnly.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:h.reconciliationResult.registrationOnly.slice(0,4).map((W,ve)=>n.jsxs("div",{className:"p-2 bg-orange-50 rounded border-l-4 border-orange-500",children:[n.jsx("div",{className:"text-sm font-medium",children:W.truckNumber||`#${W.vin.slice(-3)}`}),n.jsxs("div",{className:"text-xs text-gray-600",children:[W.make," ",W.model," • ",W.vin.slice(-6)]})]},ve))})]}),h.reconciliationResult.insuranceOnly.length>0&&n.jsxs("div",{children:[n.jsxs("h5",{className:"font-semibold text-red-700 mb-2",children:["❌ Missing Registration (",h.reconciliationResult.insuranceOnly.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:h.reconciliationResult.insuranceOnly.slice(0,4).map((W,ve)=>n.jsxs("div",{className:"p-2 bg-red-50 rounded border-l-4 border-red-500",children:[n.jsx("div",{className:"text-sm font-medium",children:W.truckNumber||`#${W.vin.slice(-3)}`}),n.jsxs("div",{className:"text-xs text-gray-600",children:[W.make," ",W.model," • ",W.vin.slice(-6)]})]},ve))})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>c("upload"),className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold transition-colors duration-200",children:"📁 Upload More Documents"}),n.jsx("button",{onClick:K,disabled:g,className:"flex-2 px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-bold transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"⏳ Applying...":`🚛 Add ${h.reconciliationResult.summary.totalVehicles} Vehicles to Fleet`})]})]}),i==="complete"&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),n.jsx("h3",{className:"text-2xl font-bold text-green-600 mb-2",children:"Fleet Data Reconciled Successfully!"}),n.jsx("p",{className:"text-gray-600",children:"All vehicles have been processed and added to your fleet with complete compliance data."}),n.jsx("div",{className:"mt-6",children:n.jsxs("div",{className:"inline-flex items-center text-green-600",children:[n.jsx("span",{className:"animate-spin mr-2",children:"⏳"}),"Closing automatically..."]})})]})]})]})}):null};class ev{constructor(){le(this,"testSuites",new Map);le(this,"isRunning",!1)}async generateTestDocument(a,r){let i="",c="";a==="registration"?(i=`
VEHICLE REGISTRATION DOCUMENT
=============================

VEHICLE IDENTIFICATION NUMBER (VIN): ${r.vin}
MAKE: ${r.make}
MODEL: ${r.model}
YEAR: ${r.year}
LICENSE PLATE: ${r.licensePlate}

REGISTRATION NUMBER: ${r.registrationNumber||"REG-"+r.vin.slice(-6)}
REGISTRATION STATE: ${r.registrationState||"TX"}
REGISTRATION EXPIRES: ${r.registrationExpiry||"12/31/2024"}
REGISTERED OWNER: SUNBELT TRUCKING LLC

TRUCK NUMBER: ${r.truckNumber}
DOT NUMBER: 12345678
      `.trim(),c=`test_${r.truckNumber}_registration.txt`):(i=`
COMMERCIAL VEHICLE INSURANCE CERTIFICATE
=======================================

VEHICLE IDENTIFICATION NUMBER: ${r.vin}
VEHICLE: ${r.year} ${r.make} ${r.model}
LICENSE PLATE: ${r.licensePlate}

INSURANCE CARRIER: ${r.insuranceCarrier||"Progressive Commercial"}
POLICY NUMBER: ${r.policyNumber||"POL-"+r.vin.slice(-6)}
EXPIRATION DATE: ${r.insuranceExpiry||"12/31/2024"}
LIABILITY COVERAGE: $${r.coverageAmount||1e6}

INSURED: SUNBELT TRUCKING LLC
TRUCK NUMBER: ${r.truckNumber}
      `.trim(),c=`test_${r.truckNumber}_insurance.txt`);const u=new Blob([i],{type:"text/plain"});return new File([u],c,{type:"text/plain"})}async generateTestDocumentSet(a){const r=[],i=[],c=[];for(let u=1;u<=a;u++){const m=String(u).padStart(3,"0"),x={vin:`1HGBH41JXMN${String(1e5+u).slice(-6)}`,make:"FREIGHTLINER",model:"CASCADIA",year:2022,licensePlate:`TX${String(1e3+u)}`,truckNumber:m,registrationNumber:`REG-TX-${m}-2024`,registrationExpiry:`${String(u%12+1).padStart(2,"0")}/15/2024`,registrationState:"TX",insuranceCarrier:["Progressive Commercial","State Farm Commercial","Nationwide Commercial"][u%3],policyNumber:`POL-${m}-${String(2024+u%2)}`,insuranceExpiry:`12/31/${2024+u%2}`,coverageAmount:u%2===0?1e6:2e6},g=await this.generateTestDocument("registration",x),y=await this.generateTestDocument("insurance",x);r.push(g),i.push(y),c.push(x)}return{registrationFiles:r,insuranceFiles:i,expectedData:c}}async testDocumentProcessingAccuracy(a,r){const i=[];for(let c=0;c<a.length;c++){const u=a[c],m=r[c],h=Date.now();try{const x=this.createFileList([u]),g=await Qt.processBulkDocuments(x),y=Date.now()-h;if(g.vehicleData.length===0){i.push({testId:`DOC-ACC-${c+1}`,passed:!1,executionTime:y,actualResult:null,expectedResult:m,errorMessage:"No vehicle data extracted"});continue}const w=g.vehicleData[0],D=this.calculateExtractionAccuracy(w,m);i.push({testId:`DOC-ACC-${c+1}`,passed:D>=.9,executionTime:y,actualResult:{extracted:w,accuracy:D},expectedResult:m,details:{accuracy:D,processingResult:g}})}catch(x){i.push({testId:`DOC-ACC-${c+1}`,passed:!1,executionTime:Date.now()-h,actualResult:null,expectedResult:m,errorMessage:x instanceof Error?x.message:String(x)})}}return i}async testMultiBatchProcessing(a,r,i){const c=Date.now();try{Ot.clearProcessingData();const u=this.createFileList(a);await Ot.processBatch(u);const m=this.createFileList(r);await Ot.processBatch(m);const x=Ot.getProcessingState().reconciliationResult;if(!x)throw new Error("No reconciliation result available");const g=Date.now()-c,y=x.summary.totalVehicles,w=x.summary.fullyDocumented,D=x.summary.reconciliationScore;return{testId:"MULTI-BATCH-001",passed:y===i.length&&D>=90,executionTime:g,actualResult:{totalVehicles:y,fullyDocumented:w,reconciliationScore:D,completeVehicles:x.completeVehicles.length,registrationOnly:x.registrationOnly.length,insuranceOnly:x.insuranceOnly.length},expectedResult:{totalVehicles:i.length,reconciliationScore:100,completeVehicles:i.length},details:x}}catch(u){return{testId:"MULTI-BATCH-001",passed:!1,executionTime:Date.now()-c,actualResult:null,expectedResult:{totalVehicles:i.length},errorMessage:u instanceof Error?u.message:String(u)}}}async testPerformance(a){var i,c;const r=Date.now();try{console.log(`🚀 Starting performance test with ${a} documents...`),Ot.clearProcessingData();const u=await this.generateTestDocumentSet(a),m=Date.now(),h=performance.memory?performance.memory.usedJSHeapSize:null;console.log(`📋 Processing ${a} registration documents...`);const x=Date.now(),g=this.createFileList(u.registrationFiles);await Ot.processBatch(g);const y=Date.now()-x;console.log(`🛡️ Processing ${a} insurance documents...`);const w=Date.now(),D=this.createFileList(u.insuranceFiles);await Ot.processBatch(D);const b=Date.now()-w;console.log("🔄 Performing data reconciliation...");const N=Date.now(),E=Ot.getProcessingState(),A=Date.now()-N,X=Date.now()-m,L=Date.now()-r,J=performance.memory?performance.memory.usedJSHeapSize:null,B=h&&J?J-h:null,K=a*2,ne=X/K,he=K/(X/1e3),ie={timePerDocumentMs:a<=25?1e3:a<=50?1500:2e3,maxMemoryMB:a<=25?100:a<=50?200:500},ee=ne<ie.timePerDocumentMs&&(!B||B<ie.maxMemoryMB*1024*1024);return{testId:`PERF-${a}`,passed:ee,executionTime:L,actualResult:{totalDocuments:K,totalProcessingTime:X,registrationProcessingTime:y,insuranceProcessingTime:b,reconciliationTime:A,timePerDocument:Math.round(ne),documentsPerSecond:Math.round(he*100)/100,initialMemoryMB:h?Math.round(h/1024/1024):null,finalMemoryMB:J?Math.round(J/1024/1024):null,memoryIncreaseMB:B?Math.round(B/1024/1024):null,vehiclesReconciled:((i=E.reconciliationResult)==null?void 0:i.summary.totalVehicles)||0,reconciliationScore:((c=E.reconciliationResult)==null?void 0:c.summary.reconciliationScore)||0},expectedResult:{timePerDocument:`<${ie.timePerDocumentMs}ms`,memoryIncrease:`<${ie.maxMemoryMB}MB`,reconciliationScore:">90%"},details:{generationTime:m-r,breakdown:{registration:y,insurance:b,reconciliation:A},thresholds:ie}}}catch(u){return{testId:`PERF-${a}`,passed:!1,executionTime:Date.now()-r,actualResult:null,expectedResult:{documentCount:a},errorMessage:u instanceof Error?u.message:String(u)}}}async testErrorHandling(){var r,i,c,u,m,h,x,g;const a=[];console.log("🚨 Starting comprehensive error handling tests...");try{console.log("📁 Testing empty file handling...");const y=new File([""],"empty.txt",{type:"text/plain"}),w=this.createFileList([y]),D=await Qt.processBulkDocuments(w),b=D.errors.length>0||D.unprocessedFiles.length>0||D.vehicleData.length===0;a.push({testId:"ERROR-001-EMPTY",passed:b,executionTime:0,actualResult:{vehicleDataCount:D.vehicleData.length,errorsCount:D.errors.length,unprocessedCount:D.unprocessedFiles.length,summary:D.summary},expectedResult:"Should handle empty file gracefully with no vehicle data extracted",details:{processingResult:D}}),console.log(`📁 Empty file test: ${b?"✅ PASSED":"❌ FAILED"}`)}catch(y){a.push({testId:"ERROR-001-EMPTY",passed:!0,executionTime:0,actualResult:{errorThrown:!0,message:y instanceof Error?y.message:String(y)},expectedResult:"Error handling for empty file"}),console.log("📁 Empty file test: ✅ PASSED (error thrown, which is acceptable)")}try{console.log("📄 Testing file with no vehicle data...");const y="This is just random text with no vehicle information at all. Lorem ipsum dolor sit amet.",w=new File([y],"no_data.txt",{type:"text/plain"}),D=this.createFileList([w]),b=await Qt.processBulkDocuments(D),N=b.vehicleData.length===0||b.vehicleData.length>0&&b.vehicleData[0].needsReview===!0||b.unprocessedFiles.includes("no_data.txt");a.push({testId:"ERROR-002-NO-DATA",passed:N,executionTime:0,actualResult:{vehicleDataCount:b.vehicleData.length,needsReview:(r=b.vehicleData[0])==null?void 0:r.needsReview,extractionConfidence:(i=b.vehicleData[0])==null?void 0:i.extractionConfidence,unprocessedFiles:b.unprocessedFiles},expectedResult:"Should handle files with no vehicle data by not extracting data or flagging for review",details:{processingResult:b}}),console.log(`📄 No vehicle data test: ${N?"✅ PASSED":"❌ FAILED"}`)}catch(y){a.push({testId:"ERROR-002-NO-DATA",passed:!1,executionTime:0,actualResult:null,expectedResult:"Should handle files with no vehicle data",errorMessage:y instanceof Error?y.message:String(y)}),console.log("📄 No vehicle data test: ❌ FAILED (unexpected error)")}try{console.log("🔢 Testing malformed VIN handling...");const y=`
VEHICLE REGISTRATION
VIN: INVALID_VIN_TOO_SHORT
MAKE: FORD
MODEL: F150
LICENSE PLATE: ABC123
REGISTRATION EXPIRES: 12/31/2024
      `,w=new File([y],"malformed_vin.txt",{type:"text/plain"}),D=this.createFileList([w]),b=await Qt.processBulkDocuments(D),N=b.vehicleData.length===0||b.vehicleData.length>0&&(!b.vehicleData[0].vin||b.vehicleData[0].needsReview===!0);a.push({testId:"ERROR-003-MALFORMED-VIN",passed:N,executionTime:0,actualResult:{vehicleDataCount:b.vehicleData.length,extractedVin:(c=b.vehicleData[0])==null?void 0:c.vin,needsReview:(u=b.vehicleData[0])==null?void 0:u.needsReview,extractionConfidence:(m=b.vehicleData[0])==null?void 0:m.extractionConfidence,processingNotes:(h=b.vehicleData[0])==null?void 0:h.processingNotes},expectedResult:"Should reject malformed VIN or flag for review",details:{processingResult:b}}),console.log(`🔢 Malformed VIN test: ${N?"✅ PASSED":"❌ FAILED"}`)}catch(y){a.push({testId:"ERROR-003-MALFORMED-VIN",passed:!1,executionTime:0,actualResult:null,expectedResult:"Should handle malformed VIN gracefully",errorMessage:y instanceof Error?y.message:String(y)}),console.log("🔢 Malformed VIN test: ❌ FAILED (unexpected error)")}try{console.log("🚫 Testing invalid VIN format handling...");const y=`VEHICLE REGISTRATION
INVALID VIN: THISISNOTAVALIDVIN
MAKE: CHEVROLET
MODEL: SILVERADO`,w=new File([y],"invalid_vin.txt",{type:"text/plain"}),D=this.createFileList([w]),b=await Qt.processBulkDocuments(D),N=b.vehicleData.length===0||b.vehicleData.length>0&&(!b.vehicleData[0].vin||b.vehicleData[0].needsReview===!0);a.push({testId:"ERROR-004-INVALID-VIN",passed:N,executionTime:0,actualResult:{vehicleDataCount:b.vehicleData.length,extractedVin:(x=b.vehicleData[0])==null?void 0:x.vin,needsReview:(g=b.vehicleData[0])==null?void 0:g.needsReview},expectedResult:"Should flag invalid VIN for review"}),console.log(`🚫 Invalid VIN test: ${N?"✅ PASSED":"❌ FAILED"}`)}catch(y){a.push({testId:"ERROR-004-INVALID-VIN",passed:!1,executionTime:0,actualResult:null,expectedResult:"Should handle invalid VIN gracefully",errorMessage:y instanceof Error?y.message:String(y)}),console.log("🚫 Invalid VIN test: ❌ FAILED (unexpected error)")}try{console.log("🔧 Testing unsupported file format handling...");const y=`VIN: 1HGBH41JXMN109186
MAKE: HONDA
MODEL: CIVIC`,w=new File([y],"test.xyz",{type:"application/unknown"}),D=this.createFileList([w]),b=await Qt.processBulkDocuments(D),N=b.vehicleData.length===0&&(b.unprocessedFiles.includes("test.xyz")||b.summary.totalFiles===0);a.push({testId:"ERROR-005-UNSUPPORTED-FORMAT",passed:N,executionTime:0,actualResult:{vehicleDataCount:b.vehicleData.length,unprocessedFiles:b.unprocessedFiles,totalFiles:b.summary.totalFiles},expectedResult:"Should skip unsupported file formats"}),console.log(`🔧 Unsupported format test: ${N?"✅ PASSED":"❌ FAILED"}`)}catch(y){a.push({testId:"ERROR-005-UNSUPPORTED-FORMAT",passed:!1,executionTime:0,actualResult:null,expectedResult:"Should handle unsupported formats gracefully",errorMessage:y instanceof Error?y.message:String(y)}),console.log("🔧 Unsupported format test: ❌ FAILED (unexpected error)")}try{console.log("🔄 Testing error recovery with mixed file quality...");const y=`
VEHICLE REGISTRATION
VIN: 1HGBH41JXMN109186
MAKE: HONDA
MODEL: CIVIC
LICENSE PLATE: ABC123
REGISTRATION EXPIRES: 12/31/2024
      `,w="",D=`
INSURANCE CERTIFICATE
VIN: 1HGBH41JXMN109187
MAKE: TOYOTA
MODEL: CAMRY
POLICY NUMBER: POL-12345
EXPIRATION DATE: 06/30/2025
      `,b=new File([y],"good1.txt",{type:"text/plain"}),N=new File([w],"bad.txt",{type:"text/plain"}),E=new File([D],"good2.txt",{type:"text/plain"}),A=this.createFileList([b,N,E]),X=await Qt.processBulkDocuments(A),L=X.vehicleData.length>=2&&X.summary.processed>=2;a.push({testId:"ERROR-006-RECOVERY",passed:L,executionTime:0,actualResult:{vehicleDataCount:X.vehicleData.length,processed:X.summary.processed,errors:X.errors.length,unprocessed:X.unprocessedFiles.length},expectedResult:"Should continue processing good files after encountering bad ones"}),console.log(`🔄 Error recovery test: ${L?"✅ PASSED":"❌ FAILED"}`)}catch(y){a.push({testId:"ERROR-006-RECOVERY",passed:!1,executionTime:0,actualResult:null,expectedResult:"Should handle mixed file quality gracefully",errorMessage:y instanceof Error?y.message:String(y)}),console.log("🔄 Error recovery test: ❌ FAILED (unexpected error)")}return console.log("🚨 Error handling tests completed."),a}calculateExtractionAccuracy(a,r){const i=["vin","make","model","year","licensePlate","truckNumber"];let c=0,u=0;for(const m of i)r[m]!==void 0&&(u++,a[m]===r[m]&&c++);if(a.documentType==="registration"){const m=["registrationNumber","registrationExpiry","registrationState"];for(const h of m)r[h]!==void 0&&(u++,a[h]===r[h]&&c++)}else if(a.documentType==="insurance"){const m=["insuranceCarrier","policyNumber","insuranceExpiry","coverageAmount"];for(const h of m)r[h]!==void 0&&(u++,a[h]===r[h]&&c++)}return u>0?c/u:0}createFileList(a){const r=new DataTransfer;return a.forEach(i=>r.items.add(i)),r.files}async testDocumentFormats(){var c,u,m;const a=[],r=[{format:"MM/DD/YYYY",date:"12/31/2024",expected:"12/31/2024"},{format:"DD/MM/YYYY",date:"31/12/2024",expected:"31/12/2024"},{format:"Month DD, YYYY",date:"December 31, 2024",expected:"December 31, 2024"},{format:"DD-MMM-YYYY",date:"31-Dec-2024",expected:"31-Dec-2024"}];for(const h of r)try{const x=`
VEHICLE REGISTRATION
VIN: 1HGBH41JXMN109186
REGISTRATION EXPIRES: ${h.date}
MAKE: FORD
MODEL: F150
        `,g=new File([x],`date_test_${h.format}.txt`,{type:"text/plain"}),y=this.createFileList([g]),w=await Qt.processBulkDocuments(y),D=w.vehicleData.length>0&&w.vehicleData[0].registrationExpiry!==void 0;a.push({testId:`FORMAT-DATE-${h.format}`,passed:D,executionTime:0,actualResult:(c=w.vehicleData[0])==null?void 0:c.registrationExpiry,expectedResult:h.expected,details:{format:h.format,extractedDate:(u=w.vehicleData[0])==null?void 0:u.registrationExpiry}})}catch(x){a.push({testId:`FORMAT-DATE-${h.format}`,passed:!1,executionTime:0,actualResult:null,expectedResult:h.expected,errorMessage:x instanceof Error?x.message:String(x)})}const i=["VIN: 1HGBH41JXMN109186","VEHICLE IDENTIFICATION NUMBER: 1HGBH41JXMN109186","V.I.N.: 1HGBH41JXMN109186","1HGBH41JXMN109186 (VIN)"];for(let h=0;h<i.length;h++)try{const x=`
VEHICLE REGISTRATION
${i[h]}
MAKE: FORD
MODEL: F150
        `,g=new File([x],`vin_test_${h}.txt`,{type:"text/plain"}),y=this.createFileList([g]),w=await Qt.processBulkDocuments(y),D=w.vehicleData.length>0&&w.vehicleData[0].vin==="1HGBH41JXMN109186";a.push({testId:`FORMAT-VIN-${h+1}`,passed:D,executionTime:0,actualResult:(m=w.vehicleData[0])==null?void 0:m.vin,expectedResult:"1HGBH41JXMN109186",details:{vinFormat:i[h]}})}catch(x){a.push({testId:`FORMAT-VIN-${h+1}`,passed:!1,executionTime:0,actualResult:null,expectedResult:"1HGBH41JXMN109186",errorMessage:x instanceof Error?x.message:String(x)})}return a}async runFullTestSuite(){console.log("🧪 Starting comprehensive test suite..."),this.isRunning=!0;const a={name:"TruckBo Fleet Management - Full Test Suite",description:"Comprehensive testing of document processing and fleet management features",tests:[],results:[],summary:{total:0,passed:0,failed:0,successRate:0,totalExecutionTime:0}},r=Date.now();try{console.log("📄 Generating test documents...");const i=await this.generateTestDocumentSet(10);console.log("🔍 Testing document processing accuracy...");const c=[...i.registrationFiles,...i.insuranceFiles],u=[...i.expectedData,...i.expectedData],m=await this.testDocumentProcessingAccuracy(c,u);a.results.push(...m),console.log("📋 Testing document format variations...");const h=await this.testDocumentFormats();a.results.push(...h),console.log("🔄 Testing multi-batch processing...");const x=await this.testMultiBatchProcessing(i.registrationFiles,i.insuranceFiles,i.expectedData);a.results.push(x),console.log("⚡ Testing performance with progressively larger document sets...");const g=[];console.log("📊 Testing small batch performance (25 documents)..."),g.push(await this.testPerformance(25)),console.log("📊 Testing medium batch performance (50 documents)..."),g.push(await this.testPerformance(50)),console.log("📊 Testing large batch performance (100 documents)..."),g.push(await this.testPerformance(100)),a.results.push(...g),console.log("🚨 Testing error handling and recovery scenarios...");const y=await this.testErrorHandling();a.results.push(...y),a.summary.total=a.results.length,a.summary.passed=a.results.filter(w=>w.passed).length,a.summary.failed=a.summary.total-a.summary.passed,a.summary.successRate=a.summary.passed/a.summary.total*100,a.summary.totalExecutionTime=Date.now()-r,console.log("✅ Test suite completed!"),console.log(`📊 Results: ${a.summary.passed}/${a.summary.total} passed (${a.summary.successRate.toFixed(1)}%)`)}catch(i){console.error("❌ Test suite failed:",i),a.results.push({testId:"SUITE-ERROR",passed:!1,executionTime:Date.now()-r,actualResult:null,expectedResult:"Complete test suite",errorMessage:i instanceof Error?i.message:String(i)})}return this.isRunning=!1,this.testSuites.set("full-suite",a),a}getTestResults(){return this.testSuites}isTestRunning(){return this.isRunning}}const tv=new ev,av=({isOpen:f,onClose:a})=>{const[r,i]=G.useState("idle"),[c,u]=G.useState(null),[m,h]=G.useState(""),[x,g]=G.useState(0),y=async()=>{i("running"),g(0),h("Initializing test suite...");try{const N=setInterval(()=>{g(A=>Math.min(A+2,90))},500),E=await tv.runFullTestSuite();clearInterval(N),g(100),u(E),i("completed"),h("Test suite completed")}catch(N){i("error"),h(`Test failed: ${N instanceof Error?N.message:String(N)}`)}},w=()=>{i("idle"),u(null),h(""),g(0)},D=N=>N.passed?"text-green-600":"text-red-600",b=N=>N.passed?"✅":"❌";return f?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black",children:"🧪 System Test Runner"}),n.jsx("p",{className:"text-blue-100 mt-1",children:"Comprehensive testing of document processing and fleet management"})]}),n.jsx("button",{onClick:a,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors duration-200",children:n.jsx("span",{className:"text-xl",children:"✕"})})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Test Status"}),n.jsxs("div",{className:"flex gap-3",children:[r==="idle"&&n.jsx("button",{onClick:y,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-bold transition-all duration-200 hover:scale-105 active:scale-95",children:"🚀 Run Test Suite"}),r==="completed"&&n.jsx("button",{onClick:w,className:"px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white rounded-xl font-bold transition-all duration-200",children:"🔄 Reset Tests"})]})]}),r==="running"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin text-4xl mb-4",children:"🧪"}),n.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Running Comprehensive Tests"}),n.jsx("p",{className:"text-gray-600",children:m})]}),n.jsxs("div",{className:"max-w-md mx-auto",children:[n.jsx("div",{className:"bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:`${x}%`}})}),n.jsxs("p",{className:"text-sm text-gray-600 mt-2 text-center",children:[x,"% complete"]})]})]}),r==="error"&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:"❌"}),n.jsx("h4",{className:"text-xl font-bold text-red-600 mb-2",children:"Test Suite Failed"}),n.jsx("p",{className:"text-red-700",children:m})]}),r==="completed"&&c&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:c.summary.successRate>=90?"🎉":c.summary.successRate>=70?"⚠️":"❌"}),n.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"Test Suite Complete"}),n.jsxs("p",{className:"text-gray-600",children:["Executed ",c.summary.total," tests in ",(c.summary.totalExecutionTime/1e3).toFixed(2)," seconds"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.summary.total}),n.jsx("div",{className:"text-sm text-blue-700",children:"Total Tests"})]}),n.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.summary.passed}),n.jsx("div",{className:"text-sm text-green-700",children:"Passed"})]}),n.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:c.summary.failed}),n.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]}),n.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[c.summary.successRate.toFixed(1),"%"]}),n.jsx("div",{className:"text-sm text-purple-700",children:"Success Rate"})]})]})]})]}),c&&c.results.length>0&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsx("h4",{className:"font-bold text-gray-900",children:"Detailed Test Results"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Click on a test to view detailed information"})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.results.map((N,E)=>{var A,X;return n.jsxs("div",{className:"p-4 border-b border-gray-100 last:border-b-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:b(N)}),n.jsxs("div",{children:[n.jsx("h5",{className:`font-semibold ${D(N)}`,children:N.testId}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Execution time: ",N.executionTime,"ms"]})]})]}),n.jsx("div",{className:"text-right",children:N.passed?n.jsx("span",{className:"text-green-600 font-medium",children:"PASSED"}):n.jsx("span",{className:"text-red-600 font-medium",children:"FAILED"})})]}),N.errorMessage&&n.jsxs("div",{className:"mt-3 p-3 bg-red-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Error:"}),n.jsx("p",{className:"text-sm text-red-600",children:N.errorMessage})]}),N.testId.startsWith("PERF-")&&N.actualResult&&n.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Performance Metrics:"}),n.jsxs("div",{className:"text-sm text-blue-600 space-y-2 mt-2",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:["📄 Documents: ",N.actualResult.totalDocuments]}),n.jsxs("div",{children:["⏱️ Time/Doc: ",N.actualResult.timePerDocument,"ms"]}),n.jsxs("div",{children:["🚀 Docs/Sec: ",N.actualResult.documentsPerSecond]}),n.jsxs("div",{children:["🔄 Reconciliation: ",N.actualResult.reconciliationScore,"%"]})]}),N.actualResult.memoryIncreaseMB&&n.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-blue-200",children:[n.jsxs("div",{children:["💾 Memory Used: ",N.actualResult.memoryIncreaseMB,"MB"]}),n.jsxs("div",{children:["🎯 Vehicles: ",N.actualResult.vehiclesReconciled]})]}),((A=N.details)==null?void 0:A.breakdown)&&n.jsxs("div",{className:"pt-2 border-t border-blue-200",children:[n.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"Processing Breakdown:"}),n.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[n.jsxs("div",{children:["📋 Reg: ",N.details.breakdown.registration,"ms"]}),n.jsxs("div",{children:["🛡️ Ins: ",N.details.breakdown.insurance,"ms"]}),n.jsxs("div",{children:["🔗 Recon: ",N.details.breakdown.reconciliation,"ms"]})]})]})]})]}),N.testId.startsWith("DOC-ACC-")&&N.actualResult&&n.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Extraction Accuracy:"}),n.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[(N.actualResult.accuracy*100).toFixed(1),"% field accuracy"]})]}),N.testId==="MULTI-BATCH-001"&&N.actualResult&&n.jsxs("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-purple-700 font-medium",children:"Reconciliation Results:"}),n.jsxs("div",{className:"text-sm text-purple-600 grid grid-cols-2 gap-2 mt-1",children:[n.jsxs("div",{children:["Total Vehicles: ",N.actualResult.totalVehicles]}),n.jsxs("div",{children:["Complete Records: ",N.actualResult.fullyDocumented]}),n.jsxs("div",{children:["Reconciliation Score: ",N.actualResult.reconciliationScore,"%"]}),n.jsxs("div",{children:["Missing Data: ",N.actualResult.registrationOnly+N.actualResult.insuranceOnly]})]})]}),N.testId.startsWith("ERROR-")&&N.actualResult&&n.jsxs("div",{className:"mt-3 p-3 bg-orange-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-orange-700 font-medium",children:"Error Handling Results:"}),n.jsxs("div",{className:"text-sm text-orange-600 mt-1",children:[N.testId==="ERROR-001-EMPTY"&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:["Vehicle Data Extracted: ",N.actualResult.vehicleDataCount||0]}),n.jsxs("div",{children:["Errors Recorded: ",N.actualResult.errorsCount||0]}),n.jsxs("div",{children:["Files Skipped: ",N.actualResult.unprocessedCount||0]})]}),N.testId==="ERROR-002-NO-DATA"&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:["Vehicle Data Count: ",N.actualResult.vehicleDataCount||0]}),n.jsxs("div",{children:["Needs Review: ",N.actualResult.needsReview?"Yes":"No"]}),n.jsxs("div",{children:["Confidence: ",N.actualResult.extractionConfidence?(N.actualResult.extractionConfidence*100).toFixed(1)+"%":"N/A"]})]}),(N.testId==="ERROR-003-MALFORMED-VIN"||N.testId==="ERROR-004-INVALID-VIN")&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:["VIN Extracted: ",N.actualResult.extractedVin||"None"]}),n.jsxs("div",{children:["Flagged for Review: ",N.actualResult.needsReview?"Yes":"No"]}),n.jsxs("div",{children:["Confidence: ",N.actualResult.extractionConfidence?(N.actualResult.extractionConfidence*100).toFixed(1)+"%":"N/A"]})]}),N.testId==="ERROR-005-UNSUPPORTED-FORMAT"&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:["Vehicle Data: ",N.actualResult.vehicleDataCount||0]}),n.jsxs("div",{children:["Skipped Files: ",((X=N.actualResult.unprocessedFiles)==null?void 0:X.length)||0]}),n.jsxs("div",{children:["Total Processed: ",N.actualResult.totalFiles||0]})]}),N.testId==="ERROR-006-RECOVERY"&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:["Successfully Processed: ",N.actualResult.processed||0]}),n.jsxs("div",{children:["Vehicle Records: ",N.actualResult.vehicleDataCount||0]}),n.jsxs("div",{children:["Errors Encountered: ",N.actualResult.errors||0]}),n.jsxs("div",{children:["Files Skipped: ",N.actualResult.unprocessed||0]})]})]})]})]},E)})})]}),r==="idle"&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[n.jsx("h4",{className:"font-bold text-blue-800 mb-3",children:"Test Categories"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-blue-700 mb-2",children:"📄 Document Processing"}),n.jsxs("ul",{className:"text-blue-600 space-y-1",children:[n.jsx("li",{children:"• Single document accuracy"}),n.jsx("li",{children:"• Multi-batch reconciliation"}),n.jsx("li",{children:"• File format support"}),n.jsx("li",{children:"• VIN and date extraction"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-blue-700 mb-2",children:"⚡ Performance & Reliability"}),n.jsxs("ul",{className:"text-blue-600 space-y-1",children:[n.jsx("li",{children:"• Large batch processing"}),n.jsx("li",{children:"• Memory usage monitoring"}),n.jsx("li",{children:"• Error handling & recovery"}),n.jsx("li",{children:"• Malformed data detection"}),n.jsx("li",{children:"• File format validation"})]})]})]}),n.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:n.jsxs("p",{className:"text-blue-800 text-sm",children:[n.jsx("span",{className:"font-semibold",children:"💡 Tip:"})," Tests will generate synthetic documents with known data to validate extraction accuracy and system performance."]})})]})]})]})}):null},hl=({status:f})=>{const a=()=>{switch(f){case"compliant":return"bg-green-500";case"warning":return"bg-yellow-500";case"expired":return"bg-red-500";default:return"bg-gray-400"}};return n.jsx("div",{className:`w-2 h-2 rounded-full ${a()}`})},sv=({vehicle:f,compliance:a,onViewDetails:r,onScheduleService:i,onEditVehicle:c})=>{var h,x;const u=((h=f.truckNumber)==null?void 0:h.replace("Truck #",""))||((x=f.vin)==null?void 0:x.slice(-3))||"???",m=()=>{switch(f.status){case"active":return"text-green-600 bg-green-50";case"inactive":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}};return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg hover:border-gray-300 transition-colors duration-200 p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",u]}),n.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${m()}`,children:f.status})]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[a.overall.score,"%"]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[f.year," ",f.make," ",f.model]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[f.licensePlate," • VIN: ...",f.vin.slice(-6)]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(hl,{status:a.registration.status}),n.jsx("span",{className:"text-xs text-gray-600",children:"REG"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(hl,{status:a.insurance.status}),n.jsx("span",{className:"text-xs text-gray-600",children:"INS"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(hl,{status:a.dotInspection.status}),n.jsx("span",{className:"text-xs text-gray-600",children:"DOT"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(hl,{status:a.ifta.status}),n.jsx("span",{className:"text-xs text-gray-600",children:"IFTA"})]})]}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("button",{onClick:r,className:"flex-1 text-xs px-2 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded border border-blue-200 hover:border-blue-300 transition-colors duration-150",children:"View"}),n.jsx("button",{onClick:i,className:"flex-1 text-xs px-2 py-1 bg-gray-50 hover:bg-gray-100 text-gray-700 rounded border border-gray-200 hover:border-gray-300 transition-colors duration-150",children:"Service"}),n.jsx("button",{onClick:c,className:"text-xs px-2 py-1 bg-gray-50 hover:bg-gray-100 text-gray-700 rounded border border-gray-200 hover:border-gray-300 transition-colors duration-150",children:"⋯"})]})]})};function rv(){const[f,a]=G.useState([]),[r,i]=G.useState([]),[c,u]=G.useState(!0),[m,h]=G.useState(!1),[x,g]=G.useState("all");G.useEffect(()=>(y(),ze.subscribe(()=>{y()})),[]);const y=()=>{try{const L=ze.getDrivers();a(L);const J=w(L);i(J),u(!1),console.log(`📋 Loaded ${L.length} drivers with ${J.length} alerts`)}catch(L){console.error("Error loading drivers:",L),u(!1)}},w=L=>{const J=[];return L.forEach(B=>{const K=`${B.firstName} ${B.lastName}`;B.medicalCertificate.status==="expired"?J.push({driverId:B.id,driverName:K,alertType:"medical_expired",daysUntilExpiry:B.medicalCertificate.daysUntilExpiry,expirationDate:B.medicalCertificate.expirationDate,priority:"critical"}):B.medicalCertificate.status==="expiring_soon"&&J.push({driverId:B.id,driverName:K,alertType:"medical_expires_soon",daysUntilExpiry:B.medicalCertificate.daysUntilExpiry,expirationDate:B.medicalCertificate.expirationDate,priority:B.medicalCertificate.daysUntilExpiry<=7?"critical":"high"}),B.cdlInfo.status==="expired"?J.push({driverId:B.id,driverName:K,alertType:"cdl_expired",daysUntilExpiry:B.cdlInfo.daysUntilExpiry,expirationDate:B.cdlInfo.expirationDate,priority:"critical"}):B.cdlInfo.status==="expiring_soon"&&J.push({driverId:B.id,driverName:K,alertType:"cdl_expires_soon",daysUntilExpiry:B.cdlInfo.daysUntilExpiry,expirationDate:B.cdlInfo.expirationDate,priority:"high"})}),J.sort((B,K)=>{const ne={critical:0,high:1,medium:2};return ne[B.priority]!==ne[K.priority]?ne[B.priority]-ne[K.priority]:B.daysUntilExpiry-K.daysUntilExpiry})},D=()=>{switch(x){case"active":return f.filter(L=>L.status==="active");case"expiring":return f.filter(L=>L.medicalCertificate.status==="expiring_soon"||L.cdlInfo.status==="expiring_soon");case"expired":return f.filter(L=>L.medicalCertificate.status==="expired"||L.cdlInfo.status==="expired");default:return f}},b=(L,J)=>{switch(L){case"valid":return n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["✅ Valid (",J," days)"]});case"expiring_soon":return n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["⚠️ Expires in ",J," days"]});case"expired":return n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:["🔴 Expired (",Math.abs(J)," days ago)"]});case"invalid":return n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"❓ Invalid"})}},N=L=>{switch(L){case"medical_expired":return"🚨 Medical Certificate EXPIRED";case"medical_expires_soon":return"⚠️ Medical Certificate Expiring Soon";case"cdl_expired":return"🚨 CDL EXPIRED";case"cdl_expires_soon":return"⚠️ CDL Expiring Soon"}},E=D(),A=r.filter(L=>L.priority==="critical").length,X=r.filter(L=>L.priority==="high").length;return c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Loading drivers..."})]})}):n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Driver Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Track medical certificates, CDL renewals, and compliance"})]}),n.jsx("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2",children:"➕ Add Driver"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:"👨‍💼"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Drivers"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:f.length})]})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center text-red-600",children:"🚨"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Critical Alerts"}),n.jsx("p",{className:"text-2xl font-semibold text-red-600",children:A})]})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center text-yellow-600",children:"⚠️"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Expiring Soon"}),n.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:X})]})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center text-green-600",children:"✅"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Compliant"}),n.jsx("p",{className:"text-2xl font-semibold text-green-600",children:f.filter(L=>L.medicalCertificate.status==="valid"&&L.cdlInfo.status==="valid").length})]})]})})]}),r.length>0&&n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🔔 Active Alerts"}),n.jsxs("div",{className:"space-y-3",children:[r.slice(0,5).map((L,J)=>n.jsx("div",{className:`p-3 rounded-lg border-l-4 ${L.priority==="critical"?"bg-red-50 border-red-400":"bg-yellow-50 border-yellow-400"}`,children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:N(L.alertType)}),n.jsxs("p",{className:"text-sm text-gray-600",children:[L.driverName," - Expires: ",L.expirationDate]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:`text-sm font-medium ${L.priority==="critical"?"text-red-600":"text-yellow-600"}`,children:L.daysUntilExpiry<0?`${Math.abs(L.daysUntilExpiry)} days overdue`:`${L.daysUntilExpiry} days remaining`})})]})},J)),r.length>5&&n.jsxs("p",{className:"text-sm text-gray-500 text-center pt-2",children:["... and ",r.length-5," more alerts"]})]})]}),n.jsx("div",{className:"flex gap-2 mb-4",children:["all","active","expiring","expired"].map(L=>n.jsx("button",{onClick:()=>g(L),className:`px-3 py-1 rounded-lg text-sm font-medium capitalize ${x===L?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:L==="all"?"All Drivers":L},L))}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CDL Info"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medical Certificate"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx("p",{className:"text-lg",children:"👤 No drivers found"}),n.jsx("p",{className:"text-sm mt-1",children:x==="all"?"Add your first driver to get started":`No drivers match the "${x}" filter`})]})})}):E.map(L=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:n.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:n.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[L.firstName.charAt(0),L.lastName.charAt(0)]})})}),n.jsxs("div",{className:"ml-4",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[L.firstName," ",L.lastName]}),n.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",L.employeeId]})]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsxs("div",{className:"text-sm text-gray-900",children:["Class ",L.cdlInfo.class," • ",L.cdlInfo.cdlState]}),n.jsx("div",{className:"text-sm text-gray-500",children:L.cdlInfo.cdlNumber}),n.jsx("div",{className:"mt-1",children:b(L.cdlInfo.status,L.cdlInfo.daysUntilExpiry)})]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsxs("div",{className:"text-sm text-gray-900",children:["Expires: ",L.medicalCertificate.expirationDate]}),n.jsx("div",{className:"text-sm text-gray-500",children:L.medicalCertificate.certificateNumber}),n.jsx("div",{className:"mt-1",children:b(L.medicalCertificate.status,L.medicalCertificate.daysUntilExpiry)})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),n.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:"View"})]})]},L.id))})]})})}),m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Driver"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Driver management modal will be implemented in the next step."}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Close"})})]})})]})}class nv{generateVehicleComplianceReport(a){const r=ze.getFleet(),i=new Date().toISOString(),c=[],u=[],m=[],h=[],x=[];r.forEach(y=>{let w=!0,D=!1;if(y.registrationExpiry){const b=new Date(y.registrationExpiry),N=new Date,E=Math.ceil((b.getTime()-N.getTime())/(1e3*60*60*24));E<0?(w=!1,h.push(`${y.truckNumber}: Registration expired ${Math.abs(E)} days ago`)):E<=30&&(D=!0,x.push(`${y.truckNumber}: Registration expires in ${E} days - schedule renewal`))}else w=!1,h.push(`${y.truckNumber}: Missing registration expiry date`);if(y.insuranceExpiry){const b=new Date(y.insuranceExpiry),N=new Date,E=Math.ceil((b.getTime()-N.getTime())/(1e3*60*60*24));E<0?(w=!1,h.push(`${y.truckNumber}: Insurance expired ${Math.abs(E)} days ago`)):E<=15&&(D=!0,x.push(`${y.truckNumber}: Insurance expires in ${E} days - renew immediately`))}else w=!1,h.push(`${y.truckNumber}: Missing insurance information`);y.vin||(w=!1,h.push(`${y.truckNumber}: Missing VIN`)),w?D?m.push(y):c.push(y):u.push(y)});const g={totalVehicles:r.length,compliantCount:c.length,nonCompliantCount:u.length,expiringCount:m.length,criticalIssues:h.slice(0,10),recommendations:x.slice(0,10)};return{id:`vehicle_compliance_${Date.now()}`,title:"Vehicle Compliance Report",type:"vehicle_compliance",generatedAt:i,generatedBy:"TruckBo System",dateRange:a||{from:new Date().toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]},data:{compliantVehicles:c,nonCompliantVehicles:u,expiringVehicles:m,totalVehicles:r.length},summary:g,exportFormats:["PDF","Excel","CSV"]}}generateDriverComplianceReport(a){const r=ze.getDrivers(),i=new Date().toISOString(),c=[],u=[],m=[],h=[],x=[];r.forEach(y=>{let w=!0,D=!1;const b=`${y.firstName} ${y.lastName}`;y.medicalCertificate?y.medicalCertificate.status==="expired"?(w=!1,h.push(`${b}: Medical certificate expired ${Math.abs(y.medicalCertificate.daysUntilExpiry)} days ago`)):y.medicalCertificate.status==="expiring_soon"&&(D=!0,x.push(`${b}: Medical certificate expires in ${y.medicalCertificate.daysUntilExpiry} days`)):(w=!1,h.push(`${b}: Missing medical certificate`)),y.cdlInfo?y.cdlInfo.status==="expired"?(w=!1,h.push(`${b}: CDL expired ${Math.abs(y.cdlInfo.daysUntilExpiry)} days ago`)):y.cdlInfo.status==="expiring_soon"&&(D=!0,x.push(`${b}: CDL expires in ${y.cdlInfo.daysUntilExpiry} days`)):(w=!1,h.push(`${b}: Missing CDL information`)),y.employeeId||(w=!1,h.push(`${b}: Missing employee ID`)),w?D?m.push(y):c.push(y):u.push(y)});const g={totalDrivers:r.length,compliantCount:c.length,nonCompliantCount:u.length,expiringCount:m.length,criticalIssues:h.slice(0,10),recommendations:x.slice(0,10)};return{id:`driver_compliance_${Date.now()}`,title:"Driver Compliance Report",type:"driver_compliance",generatedAt:i,generatedBy:"TruckBo System",dateRange:a||{from:new Date().toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]},data:{compliantDrivers:c,nonCompliantDrivers:u,expiringDrivers:m,totalDrivers:r.length},summary:g,exportFormats:["PDF","Excel","CSV"]}}generateExpirationSummaryReport(a=90){const r=ze.getFleet(),i=ze.getDrivers(),c=new Date().toISOString(),u=[];r.forEach(g=>{const y=new Date;if(g.registrationExpiry){const w=new Date(g.registrationExpiry),D=Math.ceil((w.getTime()-y.getTime())/(1e3*60*60*24));D<=a&&u.push({type:"vehicle",id:g.id,name:`${g.truckNumber} (${g.make} ${g.model})`,documentType:"registration",expirationDate:g.registrationExpiry,daysUntilExpiry:D,status:D<0?"expired":D<=30?"critical":"expires_soon",priority:D<0||D<=15?"critical":D<=30?"high":"medium"})}if(g.insuranceExpiry){const w=new Date(g.insuranceExpiry),D=Math.ceil((w.getTime()-y.getTime())/(1e3*60*60*24));D<=a&&u.push({type:"vehicle",id:g.id,name:`${g.truckNumber} (${g.make} ${g.model})`,documentType:"insurance",expirationDate:g.insuranceExpiry,daysUntilExpiry:D,status:D<0?"expired":D<=15?"critical":"expires_soon",priority:D<0||D<=7?"critical":D<=15?"high":"medium"})}}),i.forEach(g=>{const y=`${g.firstName} ${g.lastName}`;g.medicalCertificate&&g.medicalCertificate.daysUntilExpiry<=a&&u.push({type:"driver",id:g.id,name:y,documentType:"medical_certificate",expirationDate:g.medicalCertificate.expirationDate,daysUntilExpiry:g.medicalCertificate.daysUntilExpiry,status:g.medicalCertificate.status,priority:g.medicalCertificate.daysUntilExpiry<0?"critical":g.medicalCertificate.daysUntilExpiry<=30?"high":"medium"}),g.cdlInfo&&g.cdlInfo.daysUntilExpiry<=a&&u.push({type:"driver",id:g.id,name:y,documentType:"cdl",expirationDate:g.cdlInfo.expirationDate,daysUntilExpiry:g.cdlInfo.daysUntilExpiry,status:g.cdlInfo.status,priority:g.cdlInfo.daysUntilExpiry<0?"critical":g.cdlInfo.daysUntilExpiry<=60?"high":"medium"})}),u.sort((g,y)=>{const w={critical:0,high:1,medium:2};return w[g.priority]!==w[y.priority]?w[g.priority]-w[y.priority]:g.daysUntilExpiry-y.daysUntilExpiry});const m=u.filter(g=>g.priority==="critical"),h=u.filter(g=>g.priority==="high"),x={totalVehicles:r.length,totalDrivers:i.length,compliantCount:r.length+i.length-u.length,nonCompliantCount:m.length,expiringCount:u.length-m.length,criticalIssues:m.slice(0,10).map(g=>`${g.name}: ${g.documentType} ${g.status} (${Math.abs(g.daysUntilExpiry)} days)`),recommendations:h.slice(0,10).map(g=>`Schedule renewal for ${g.name}: ${g.documentType} expires in ${g.daysUntilExpiry} days`)};return{id:`expiration_summary_${Date.now()}`,title:`Expiration Summary Report (Next ${a} Days)`,type:"expiration_summary",generatedAt:c,generatedBy:"TruckBo System",dateRange:{from:new Date().toISOString().split("T")[0],to:new Date(Date.now()+a*24*60*60*1e3).toISOString().split("T")[0]},data:{alerts:u,daysAhead:a,criticalAlerts:m.length,highPriorityAlerts:h.length,totalAlerts:u.length},summary:x,exportFormats:["PDF","Excel","CSV"]}}generateFullAuditReport(){const a=this.generateVehicleComplianceReport(),r=this.generateDriverComplianceReport(),i=this.generateExpirationSummaryReport(90),c=this.calculateComplianceMetrics(),u=new Date().toISOString(),m=[...a.summary.criticalIssues,...r.summary.criticalIssues,...i.summary.criticalIssues],h=[...a.summary.recommendations,...r.summary.recommendations,...i.summary.recommendations],x={totalVehicles:a.summary.totalVehicles,totalDrivers:r.summary.totalDrivers,compliantCount:a.summary.compliantCount+r.summary.compliantCount,nonCompliantCount:a.summary.nonCompliantCount+r.summary.nonCompliantCount,expiringCount:a.summary.expiringCount+r.summary.expiringCount,criticalIssues:m.slice(0,15),recommendations:h.slice(0,15)};return{id:`full_audit_${Date.now()}`,title:"Comprehensive Fleet Compliance Audit",type:"full_audit",generatedAt:u,generatedBy:"TruckBo System",dateRange:{from:new Date().toISOString().split("T")[0],to:new Date(Date.now()+2160*60*60*1e3).toISOString().split("T")[0]},data:{vehicleCompliance:a.data,driverCompliance:r.data,expirationAlerts:i.data,metrics:c},summary:x,exportFormats:["PDF","Excel"]}}calculateComplianceMetrics(){const a=ze.getFleet(),r=ze.getDrivers();let i=0,c=0,u=0,m=0,h=0;const x={registration:{total:0,compliant:0,expiring:0,expired:0},insurance:{total:0,compliant:0,expiring:0,expired:0},medical_certificate:{total:0,compliant:0,expiring:0,expired:0},cdl:{total:0,compliant:0,expiring:0,expired:0}};a.forEach(N=>{if(N.registrationExpiry){x.registration.total++,c++;const E=new Date(N.registrationExpiry),A=Math.ceil((E.getTime()-Date.now())/(1e3*60*60*24));A<0?(x.registration.expired++,u++):A<=30?(x.registration.expiring++,h++,A<=15&&m++):(x.registration.compliant++,i++)}if(N.insuranceExpiry){x.insurance.total++,c++;const E=new Date(N.insuranceExpiry),A=Math.ceil((E.getTime()-Date.now())/(1e3*60*60*24));A<0?(x.insurance.expired++,u++):A<=15?(x.insurance.expiring++,h++,m++):(x.insurance.compliant++,i++)}}),r.forEach(N=>{N.medicalCertificate&&(x.medical_certificate.total++,c++,N.medicalCertificate.status==="expired"?(x.medical_certificate.expired++,u++):N.medicalCertificate.status==="expiring_soon"?(x.medical_certificate.expiring++,h++,N.medicalCertificate.daysUntilExpiry<=30&&m++):(x.medical_certificate.compliant++,i++)),N.cdlInfo&&(x.cdl.total++,c++,N.cdlInfo.status==="expired"?(x.cdl.expired++,u++):N.cdlInfo.status==="expiring_soon"?(x.cdl.expiring++,h++,N.cdlInfo.daysUntilExpiry<=60&&m++):(x.cdl.compliant++,i++))});const g=c>0?i/c*100:100,y=x.registration.total+x.insurance.total,w=x.registration.compliant+x.insurance.compliant,D=x.medical_certificate.total+x.cdl.total,b=x.medical_certificate.compliant+x.cdl.compliant;return{overallComplianceRate:Number(g.toFixed(1)),vehicleComplianceRate:y>0?Number((w/y*100).toFixed(1)):100,driverComplianceRate:D>0?Number((b/D*100).toFixed(1)):100,criticalAlerts:u,highPriorityAlerts:m,expiringSoon:h,totalDocuments:c,documentTypes:x}}async exportToPDF(a){try{const r=this.generatePDFContent(a),i=new Blob([r],{type:"text/html"}),c=URL.createObjectURL(i),u=document.createElement("a");u.href=c,u.download=`${a.title.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.html`,u.click(),URL.revokeObjectURL(c),De.showSuccess("Report exported successfully!")}catch(r){De.handleCriticalError(r,"PDF export")}}async exportToExcel(a){try{const r=this.generateCSVContent(a),i=new Blob([r],{type:"text/csv"}),c=URL.createObjectURL(i),u=document.createElement("a");u.href=c,u.download=`${a.title.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,u.click(),URL.revokeObjectURL(c),De.showSuccess("Report exported to CSV successfully!")}catch(r){De.handleCriticalError(r,"Excel export")}}generatePDFContent(a){return`
<!DOCTYPE html>
<html>
<head>
    <title>${a.title}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .header { text-align: center; margin-bottom: 30px; }
        .summary { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .metrics { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0; }
        .metric { background: white; padding: 15px; border: 1px solid #dee2e6; border-radius: 4px; text-align: center; }
        .alerts { margin: 20px 0; }
        .alert { padding: 10px; margin: 5px 0; border-left: 4px solid #dc3545; background: #f8d7da; }
        .recommendation { padding: 10px; margin: 5px 0; border-left: 4px solid #ffc107; background: #fff3cd; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #dee2e6; padding: 8px; text-align: left; }
        th { background: #e9ecef; }
        .footer { margin-top: 30px; text-align: center; color: #666; font-size: 12px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>${a.title}</h1>
        <p>Generated: ${new Date(a.generatedAt).toLocaleString()}</p>
        <p>Report Period: ${a.dateRange.from} to ${a.dateRange.to}</p>
    </div>

    <div class="summary">
        <h2>Executive Summary</h2>
        <div class="metrics">
            <div class="metric">
                <h3>${a.summary.compliantCount}</h3>
                <p>Compliant</p>
            </div>
            <div class="metric">
                <h3>${a.summary.nonCompliantCount}</h3>
                <p>Non-Compliant</p>
            </div>
            <div class="metric">
                <h3>${a.summary.expiringCount}</h3>
                <p>Expiring Soon</p>
            </div>
        </div>
    </div>

    ${a.summary.criticalIssues.length>0?`
    <div class="alerts">
        <h2>Critical Issues</h2>
        ${a.summary.criticalIssues.map(r=>`<div class="alert">${r}</div>`).join("")}
    </div>
    `:""}

    ${a.summary.recommendations.length>0?`
    <div class="alerts">
        <h2>Recommendations</h2>
        ${a.summary.recommendations.map(r=>`<div class="recommendation">${r}</div>`).join("")}
    </div>
    `:""}

    <div class="footer">
        <p>Generated by TruckBo Pro Fleet Management System</p>
        <p>This report contains confidential information. Handle according to company policy.</p>
    </div>
</body>
</html>`}generateCSVContent(a){let r=`Report Title,${a.title}
`;return r+=`Generated At,${new Date(a.generatedAt).toLocaleString()}
`,r+=`Date Range,${a.dateRange.from} to ${a.dateRange.to}

`,r+=`Summary
`,r+=`Metric,Value
`,r+=`Compliant,${a.summary.compliantCount}
`,r+=`Non-Compliant,${a.summary.nonCompliantCount}
`,r+=`Expiring Soon,${a.summary.expiringCount}

`,a.summary.criticalIssues.length>0&&(r+=`Critical Issues
`,a.summary.criticalIssues.forEach(i=>{r+=`"${i}"
`}),r+=`
`),a.summary.recommendations.length>0&&(r+=`Recommendations
`,a.summary.recommendations.forEach(i=>{r+=`"${i}"
`})),r}scheduleAutomaticReports(a){setInterval(()=>{try{const i=this.generateExpirationSummaryReport(30);i.summary.criticalIssues.length>0&&De.showInfo(`Scheduled Report: ${i.summary.criticalIssues.length} critical compliance issues found`,1e4)}catch(i){console.error("Scheduled report generation failed:",i)}},{daily:864e5,weekly:6048e5,monthly:2592e6}[a]),De.showSuccess(`Automatic ${a} reports scheduled successfully!`)}}const na=new nv;function iv(){const[f,a]=G.useState(null),[r,i]=G.useState([]),[c,u]=G.useState(null),[m,h]=G.useState(!1),[x,g]=G.useState("dashboard");G.useEffect(()=>{y()},[]);const y=async()=>{try{h(!0);const E=na.calculateComplianceMetrics();a(E)}catch(E){De.handleCriticalError(E,"Loading compliance metrics")}finally{h(!1)}},w=async E=>{try{h(!0);let A;switch(E){case"vehicle":A=na.generateVehicleComplianceReport();break;case"driver":A=na.generateDriverComplianceReport();break;case"expiration":A=na.generateExpirationSummaryReport(90);break;case"full_audit":A=na.generateFullAuditReport();break;default:throw new Error("Invalid report type")}i(X=>[A,...X]),u(A),De.showSuccess(`${A.title} generated successfully!`)}catch(A){De.handleCriticalError(A,"Generating report")}finally{h(!1)}},D=async(E,A)=>{try{A==="pdf"?await na.exportToPDF(E):await na.exportToExcel(E)}catch(X){De.handleCriticalError(X,`Exporting report to ${A.toUpperCase()}`)}},b=E=>E>=95?"text-green-600":E>=85?"text-yellow-600":"text-red-600",N=E=>E>=95?"bg-green-50 border-green-200":E>=85?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200";return m&&!f?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(Mn,{message:"Loading compliance data..."})}):n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Compliance Reporting"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor fleet compliance and generate regulatory reports"})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"dashboard",label:"Dashboard",icon:"📊"},{id:"reports",label:"Reports",icon:"📋"},{id:"schedule",label:"Schedule",icon:"⏰"}].map(E=>n.jsxs("button",{onClick:()=>g(E.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${x===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx("span",{className:"mr-2",children:E.icon}),E.label]},E.id))})}),x==="dashboard"&&f&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:`p-6 rounded-lg border ${N(f.overallComplianceRate)}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:"📈"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Overall Compliance"}),n.jsxs("p",{className:`text-2xl font-semibold ${b(f.overallComplianceRate)}`,children:[f.overallComplianceRate,"%"]})]})]})}),n.jsx("div",{className:`p-6 rounded-lg border ${N(f.vehicleComplianceRate)}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:"🚛"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Vehicle Compliance"}),n.jsxs("p",{className:`text-2xl font-semibold ${b(f.vehicleComplianceRate)}`,children:[f.vehicleComplianceRate,"%"]})]})]})}),n.jsx("div",{className:`p-6 rounded-lg border ${N(f.driverComplianceRate)}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:"👨‍💼"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Driver Compliance"}),n.jsxs("p",{className:`text-2xl font-semibold ${b(f.driverComplianceRate)}`,children:[f.driverComplianceRate,"%"]})]})]})}),n.jsx("div",{className:"p-6 bg-white rounded-lg border border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center text-red-600",children:"🚨"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Critical Alerts"}),n.jsx("p",{className:"text-2xl font-semibold text-red-600",children:f.criticalAlerts})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document Compliance Breakdown"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(f.documentTypes).map(([E,A])=>n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 capitalize mb-2",children:E.replace("_"," ")}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total:"}),n.jsx("span",{className:"font-medium",children:A.total})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-green-600",children:"Compliant:"}),n.jsx("span",{className:"font-medium",children:A.compliant})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-yellow-600",children:"Expiring:"}),n.jsx("span",{className:"font-medium",children:A.expiring})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-red-600",children:"Expired:"}),n.jsx("span",{className:"font-medium",children:A.expired})]})]})]},E))})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("button",{onClick:()=>w("expiration"),disabled:m,className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[n.jsx("span",{className:"mr-2",children:"⏰"}),"Expiration Report"]}),n.jsxs("button",{onClick:()=>w("vehicle"),disabled:m,className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[n.jsx("span",{className:"mr-2",children:"🚛"}),"Vehicle Report"]}),n.jsxs("button",{onClick:()=>w("driver"),disabled:m,className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[n.jsx("span",{className:"mr-2",children:"👨‍💼"}),"Driver Report"]}),n.jsxs("button",{onClick:()=>w("full_audit"),disabled:m,className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[n.jsx("span",{className:"mr-2",children:"📋"}),"Full Audit"]})]})]})]}),x==="reports"&&n.jsxs("div",{className:"space-y-6",children:[m&&n.jsx("div",{className:"flex justify-center",children:n.jsx(Mn,{message:"Generating report..."})}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generate New Report"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("button",{onClick:()=>w("vehicle"),disabled:m,className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 text-left",children:[n.jsx("div",{className:"text-2xl mb-2",children:"🚛"}),n.jsx("h4",{className:"font-medium",children:"Vehicle Compliance"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Registration & insurance status"})]}),n.jsxs("button",{onClick:()=>w("driver"),disabled:m,className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 text-left",children:[n.jsx("div",{className:"text-2xl mb-2",children:"👨‍💼"}),n.jsx("h4",{className:"font-medium",children:"Driver Compliance"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Medical certs & CDL status"})]}),n.jsxs("button",{onClick:()=>w("expiration"),disabled:m,className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 text-left",children:[n.jsx("div",{className:"text-2xl mb-2",children:"⏰"}),n.jsx("h4",{className:"font-medium",children:"Expiration Summary"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming renewals"})]}),n.jsxs("button",{onClick:()=>w("full_audit"),disabled:m,className:"p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 disabled:opacity-50 text-left",children:[n.jsx("div",{className:"text-2xl mb-2",children:"📋"}),n.jsx("h4",{className:"font-medium",children:"Full Audit"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive report"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generated Reports"})}),n.jsx("div",{className:"divide-y divide-gray-200",children:r.length===0?n.jsx("div",{className:"px-6 py-12 text-center",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx("p",{className:"text-lg",children:"📄 No reports generated yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Generate your first compliance report above"})]})}):r.map(E=>n.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:E.title}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Generated: ",new Date(E.generatedAt).toLocaleString()]}),n.jsxs("div",{className:"flex items-center mt-2 space-x-4 text-xs text-gray-500",children:[n.jsxs("span",{children:["Compliant: ",E.summary.compliantCount]}),n.jsxs("span",{children:["Non-compliant: ",E.summary.nonCompliantCount]}),n.jsxs("span",{children:["Expiring: ",E.summary.expiringCount]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>u(E),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"View"}),n.jsx("button",{onClick:()=>D(E,"pdf"),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Export PDF"}),n.jsx("button",{onClick:()=>D(E,"excel"),className:"px-3 py-1 text-sm bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Export CSV"})]})]})},E.id))})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-screen overflow-hidden",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold",children:c.title}),n.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),n.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.summary.compliantCount}),n.jsx("div",{className:"text-sm text-gray-600",children:"Compliant"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:c.summary.nonCompliantCount}),n.jsx("div",{className:"text-sm text-gray-600",children:"Non-compliant"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:c.summary.expiringCount}),n.jsx("div",{className:"text-sm text-gray-600",children:"Expiring"})]})]}),c.summary.criticalIssues.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"🚨 Critical Issues"}),n.jsx("ul",{className:"space-y-1",children:c.summary.criticalIssues.map((E,A)=>n.jsx("li",{className:"text-sm text-red-700 bg-red-50 p-2 rounded",children:E},A))})]}),c.summary.recommendations.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"💡 Recommendations"}),n.jsx("ul",{className:"space-y-1",children:c.summary.recommendations.map((E,A)=>n.jsx("li",{className:"text-sm text-yellow-700 bg-yellow-50 p-2 rounded",children:E},A))})]})]})}),n.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-2",children:[n.jsx("button",{onClick:()=>D(c,"pdf"),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Export PDF"}),n.jsx("button",{onClick:()=>D(c,"excel"),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Export CSV"})]})]})})]}),x==="schedule"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Schedule Automatic Reports"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Set up regular compliance reports to stay on top of expiring documents."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>na.scheduleAutomaticReports("daily"),className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 text-left",children:[n.jsx("div",{className:"text-2xl mb-2",children:"📅"}),n.jsx("h4",{className:"font-medium",children:"Daily Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Critical compliance alerts"})]}),n.jsxs("button",{onClick:()=>na.scheduleAutomaticReports("weekly"),className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 text-left",children:[n.jsx("div",{className:"text-2xl mb-2",children:"📊"}),n.jsx("h4",{className:"font-medium",children:"Weekly Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive status updates"})]}),n.jsxs("button",{onClick:()=>na.scheduleAutomaticReports("monthly"),className:"p-4 border border-gray-300 rounded-lg hover:bg-gray-50 text-left",children:[n.jsx("div",{className:"text-2xl mb-2",children:"📋"}),n.jsx("h4",{className:"font-medium",children:"Monthly Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Full audit and planning"})]})]})]})})]})}function Mt({label:f,value:a,onChange:r,validator:i,placeholder:c,required:u=!1,type:m="text",helpText:h}){const[x,g]=G.useState({isValid:!0,errors:[],warnings:[]}),[y,w]=G.useState(!1);G.useEffect(()=>{if(i&&y){const E=i(a);g(E)}},[a,i,y]);const D=()=>{if(w(!0),i){const E=i(a);g(E)}},b=()=>y?x.isValid?x.warnings.length>0?"border-yellow-500 focus:border-yellow-500":"border-green-500 focus:border-green-500":"border-red-500 focus:border-red-500":"border-gray-300 focus:border-blue-500",N=()=>y?x.isValid?x.warnings.length>0?"⚠️":"✅":"❌":null;return n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f,u&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:m,value:a,onChange:E=>r(E.target.value),onBlur:D,placeholder:c,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-opacity-50 ${b()}`}),N()&&n.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:n.jsx("span",{className:"text-sm",children:N()})})]}),h&&!y&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h}),y&&n.jsxs("div",{className:"mt-1",children:[x.errors.map((E,A)=>n.jsxs("p",{className:"text-xs text-red-600 flex items-center",children:[n.jsx("span",{className:"mr-1",children:"❌"}),E.message]},A)),x.warnings.map((E,A)=>n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center",children:[n.jsx("span",{className:"mr-1",children:"⚠️"}),E.message,E.suggestion&&n.jsxs("span",{className:"ml-1 text-gray-500",children:["(",E.suggestion,")"]})]},A))]})]})}function xl({title:f,children:a,collapsible:r=!1,defaultCollapsed:i=!1}){const[c,u]=G.useState(i);return n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:`flex items-center justify-between p-4 bg-gray-50 rounded-t-lg border ${r?"cursor-pointer hover:bg-gray-100":""}`,onClick:r?()=>u(!c):void 0,children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f}),r&&n.jsx("span",{className:"text-gray-500",children:c?"▼":"▲"})]}),!c&&n.jsx("div",{className:"p-4 border border-t-0 rounded-b-lg bg-white",children:a})]})}function Ax(f,a){const[r,i]=G.useState(f),[c,u]=G.useState({isValid:!0,errors:[],warnings:[]}),[m,h]=G.useState({});return{data:r,validation:c,touched:m,updateField:(w,D)=>{const b={...r,[w]:D};i(b),h(E=>({...E,[w]:!0}));const N=a(b);u(N)},validateAll:()=>{const w=a(r);u(w);const b=Object.keys(r).reduce((N,E)=>(N[E]=!0,N),{});return h(b),w},reset:()=>{i(f),u({isValid:!0,errors:[],warnings:[]}),h({})},isValid:c.isValid}}function lv({onLoginSuccess:f,onSwitchToRegister:a}){const[r,i]=G.useState(!1),{data:c,updateField:u,validateAll:m,isValid:h}=Ax({email:"",password:""},g=>{const y={isValid:!!g.email,errors:[],warnings:[]},w={isValid:g.password.length>=1,errors:g.password.length<1?[{field:"password",message:"Password is required",value:g.password,severity:"error"}]:[],warnings:[]};return{isValid:y.isValid&&w.isValid,errors:[...y.errors,...w.errors],warnings:[...y.warnings,...w.warnings]}}),x=async g=>{if(g.preventDefault(),!!m().isValid){i(!0);try{await ot.login(c),f()}catch{}finally{i(!1)}}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-2xl font-bold text-white mb-4",children:"T"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome to TruckBo Pro"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Fleet Compliance Management System"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Demo Accounts Available:"}),n.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Sunbelt Trucking:"})," admin@sunbelttrucking.com"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Lone Star Logistics:"})," admin@lonestarlogistics.com"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Password:"})," TruckBo2025!"]}),n.jsx("div",{className:"text-xs text-amber-600 mt-1",children:"⚠️ Demo only - Use strong passwords in production"})]})]}),n.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx(Mt,{label:"Email Address",type:"email",value:c.email,onChange:g=>u("email",g),validator:g=>({isValid:!!g,errors:[],warnings:[]}),placeholder:"admin@yourcompany.com",required:!0}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),n.jsx("input",{type:"password",value:c.password,onChange:g=>u("password",g.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",disabled:r||!h,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?n.jsx(Mn,{size:"sm",message:""}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:"🔐"}),"Sign In"]})})}),n.jsx("div",{className:"text-center",children:n.jsx("button",{type:"button",onClick:a,className:"text-sm text-blue-600 hover:text-blue-500",children:"New company? Register here"})})]})]})})}const cv=f=>{const r=/[A-Z]/.test(f),i=/[a-z]/.test(f),c=/\d/.test(f),u=/[!@#$%^&*(),.?":{}|<>]/.test(f);return f.length<12?{isValid:!1,message:"Password must be at least 12 characters long"}:r?i?c?u?{isValid:!0,message:"Password is strong"}:{isValid:!1,message:'Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'}:{isValid:!1,message:"Password must contain at least one number"}:{isValid:!1,message:"Password must contain at least one lowercase letter"}:{isValid:!1,message:"Password must contain at least one uppercase letter"}};function ov({onRegistrationSuccess:f,onSwitchToLogin:a}){const[r,i]=G.useState(!1),[c,u]=G.useState(1),m=3,{data:h,validation:x,updateField:g,validateAll:y}=Ax({companyName:"",contactEmail:"",contactPhone:"",dotNumber:"",mcNumber:"",street:"",city:"",state:"",zipCode:"",firstName:"",lastName:"",email:"",password:"",confirmPassword:"",plan:"professional"},b=>{const N=[],E=[];if(b.companyName||N.push({field:"companyName",message:"Company name is required",value:b.companyName,severity:"error"}),b.contactEmail&&!b.contactEmail.includes("@")&&N.push({field:"contactEmail",message:"Invalid email format",value:b.contactEmail,severity:"error"}),b.email&&!b.email.includes("@")&&N.push({field:"email",message:"Invalid email format",value:b.email,severity:"error"}),b.password){const A=cv(b.password);A.isValid||N.push({field:"password",message:A.message,value:b.password,severity:"error"})}return b.password&&b.confirmPassword&&b.password!==b.confirmPassword&&N.push({field:"confirmPassword",message:"Passwords do not match",value:b.confirmPassword,severity:"error"}),c>=1&&(b.companyName||N.push({field:"companyName",message:"Required",value:b.companyName,severity:"error"}),b.contactEmail||N.push({field:"contactEmail",message:"Required",value:b.contactEmail,severity:"error"}),b.contactPhone||N.push({field:"contactPhone",message:"Required",value:b.contactPhone,severity:"error"})),c>=2&&(b.street||N.push({field:"street",message:"Required",value:b.street,severity:"error"}),b.city||N.push({field:"city",message:"Required",value:b.city,severity:"error"}),b.state||N.push({field:"state",message:"Required",value:b.state,severity:"error"}),b.zipCode||N.push({field:"zipCode",message:"Required",value:b.zipCode,severity:"error"})),c>=3&&(b.firstName||N.push({field:"firstName",message:"Required",value:b.firstName,severity:"error"}),b.lastName||N.push({field:"lastName",message:"Required",value:b.lastName,severity:"error"}),b.email||N.push({field:"email",message:"Required",value:b.email,severity:"error"}),b.password||N.push({field:"password",message:"Required",value:b.password,severity:"error"})),{isValid:N.length===0,errors:N,warnings:E}}),w=async b=>{if(b.preventDefault(),c<m){u(c+1);return}if(y().isValid){i(!0);try{const E={companyName:h.companyName,contactEmail:h.contactEmail,contactPhone:h.contactPhone,dotNumber:h.dotNumber||void 0,mcNumber:h.mcNumber||void 0,address:{street:h.street,city:h.city,state:h.state,zipCode:h.zipCode},adminUser:{firstName:h.firstName,lastName:h.lastName,email:h.email,password:h.password},subscription:{plan:h.plan}};await ot.registerCompany(E),f()}catch{}finally{i(!1)}}},D=()=>x.errors.filter(N=>c===1?["companyName","contactEmail","contactPhone"].includes(N.field):c===2?["street","city","state","zipCode"].includes(N.field):c===3?["firstName","lastName","email","password","confirmPassword"].includes(N.field):!1).length===0;return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-2xl font-bold text-white mb-4",children:"T"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Register Your Fleet"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Get started with TruckBo Pro compliance management"})]}),n.jsx("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[1,2,3].map(b=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b<=c?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}`,children:b}),b<3&&n.jsx("div",{className:`w-12 h-1 ${b<c?"bg-blue-600":"bg-gray-200"}`})]},b))}),n.jsxs("form",{onSubmit:w,className:"space-y-6",children:[c===1&&n.jsx(xl,{title:"Company Information",children:n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsx(Mt,{label:"Company Name",value:h.companyName,onChange:b=>g("companyName",b),placeholder:"Sunbelt Trucking LLC",required:!0}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Mt,{label:"Contact Email",type:"email",value:h.contactEmail,onChange:b=>g("contactEmail",b),placeholder:"admin@yourcompany.com",required:!0}),n.jsx(Mt,{label:"Contact Phone",type:"tel",value:h.contactPhone,onChange:b=>g("contactPhone",b),placeholder:"214-555-0123",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Mt,{label:"DOT Number (Optional)",value:h.dotNumber,onChange:b=>g("dotNumber",b),placeholder:"12345678",helpText:"Federal DOT registration number"}),n.jsx(Mt,{label:"MC Number (Optional)",value:h.mcNumber,onChange:b=>g("mcNumber",b),placeholder:"MC-123456",helpText:"Motor Carrier authority number"})]})]})}),c===2&&n.jsx(xl,{title:"Company Address",children:n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsx(Mt,{label:"Street Address",value:h.street,onChange:b=>g("street",b),placeholder:"123 Industrial Blvd",required:!0}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Mt,{label:"City",value:h.city,onChange:b=>g("city",b),placeholder:"Dallas",required:!0}),n.jsx(Mt,{label:"State",value:h.state,onChange:b=>g("state",b),placeholder:"TX",required:!0,helpText:"2-letter state code"}),n.jsx(Mt,{label:"ZIP Code",value:h.zipCode,onChange:b=>g("zipCode",b),placeholder:"75201",required:!0})]})]})}),c===3&&n.jsxs("div",{className:"space-y-6",children:[n.jsx(xl,{title:"Admin User Account",children:n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Mt,{label:"First Name",value:h.firstName,onChange:b=>g("firstName",b),placeholder:"Sarah",required:!0}),n.jsx(Mt,{label:"Last Name",value:h.lastName,onChange:b=>g("lastName",b),placeholder:"Johnson",required:!0})]}),n.jsx(Mt,{label:"Admin Email",type:"email",value:h.email,onChange:b=>g("email",b),placeholder:"sarah@yourcompany.com",required:!0,helpText:"This will be your login email"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),n.jsx("input",{type:"password",value:h.password,onChange:b=>g("password",b.target.value),placeholder:"Min 12 chars, uppercase, lowercase, number, special char",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),n.jsx("input",{type:"password",value:h.confirmPassword,onChange:b=>g("confirmPassword",b.target.value),placeholder:"Confirm your password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]})]})}),n.jsx(xl,{title:"Subscription Plan",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{id:"basic",name:"Basic",price:"$49/month",vehicles:"10 vehicles",drivers:"20 drivers"},{id:"professional",name:"Professional",price:"$99/month",vehicles:"50 vehicles",drivers:"100 drivers"},{id:"enterprise",name:"Enterprise",price:"$199/month",vehicles:"500 vehicles",drivers:"1000 drivers"}].map(b=>n.jsx("div",{className:`p-4 border rounded-lg cursor-pointer ${h.plan===b.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>g("plan",b.id),children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"font-medium",children:b.name}),n.jsx("p",{className:"text-2xl font-bold text-blue-600 my-2",children:b.price}),n.jsx("p",{className:"text-sm text-gray-600",children:b.vehicles}),n.jsx("p",{className:"text-sm text-gray-600",children:b.drivers}),n.jsx("p",{className:"text-xs text-green-600 mt-2",children:"30-day free trial"})]})},b.id))})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{children:c>1&&n.jsx("button",{type:"button",onClick:()=>u(c-1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"← Back"})}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-blue-600 hover:text-blue-500",children:"Already have an account?"}),n.jsx("button",{type:"submit",disabled:r||!D(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?n.jsx(Mn,{size:"sm",message:""}):c<m?"Next →":"Create Company"})]})]})]})]})})}function uv({children:f}){const[a,r]=G.useState(!1),[i,c]=G.useState(!1),[u,m]=G.useState(!0);return G.useEffect(()=>((async()=>{try{await ot.initializeDemo(),r(ot.isAuthenticated())}catch(g){console.error("Failed to initialize authentication:",g)}finally{m(!1)}})(),ot.subscribeToSession(g=>{r(!!g)})),[]),u?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(Mn,{message:"Loading TruckBo Pro..."})}):a?n.jsx(n.Fragment,{children:f}):i?n.jsx(ov,{onRegistrationSuccess:()=>r(!0),onSwitchToLogin:()=>c(!1)}):n.jsx(lv,{onLoginSuccess:()=>r(!0),onSwitchToRegister:()=>c(!0)})}class dv{constructor(){le(this,"NHTSA_VIN_API","https://vpic.nhtsa.dot.gov/api/vehicles");le(this,"FMCSA_API_BASE","https://mobile.fmcsa.dot.gov/qc/services/carriers");le(this,"IFTA_API_BASE","https://api.iftach.org/v1");le(this,"FMCSA_API_KEY",window.REACT_APP_FMCSA_API_KEY||"demo-key");le(this,"IFTA_API_KEY",window.REACT_APP_IFTA_API_KEY||"demo-key")}async decodeVIN(a){try{const r=await fetch(`${this.NHTSA_VIN_API}/DecodeVin/${a}?format=json`);if(!r.ok)throw new Error(`NHTSA API error: ${r.status}`);const c=(await r.json()).Results||[],u=m=>{const h=c.find(x=>x.Variable===m);return(h==null?void 0:h.Value)||""};return{Make:u("Make"),Model:u("Model"),ModelYear:u("Model Year"),VehicleType:u("Vehicle Type"),FuelTypePrimary:u("Fuel Type - Primary"),GVWR:u("Gross Vehicle Weight Rating From"),VehicleClass:u("Vehicle Class"),Results:c}}catch(r){return console.error("VIN decode error:",r),null}}async getCarrierInfo(a){try{const r=await fetch(`${this.FMCSA_API_BASE}/${a}?webKey=${this.FMCSA_API_KEY}`);if(!r.ok)throw new Error(`FMCSA API error: ${r.status}`);const i=await r.json();return{dotNumber:i.dotNumber||a,legalName:i.legalName||"",dbaName:i.dbaName||"",carrierOperation:i.carrierOperation||"",hm:i.hm||"",pc:i.pc||"",safetyRating:i.safetyRating||"",safetyRatingDate:i.safetyRatingDate||"",reviewDate:i.reviewDate||"",outOfServiceDate:i.outOfServiceDate||""}}catch(r){return console.error("FMCSA API error:",r),this.getMockCarrierInfo(a)}}async getIFTAFilingData(a,r,i){try{const c=await fetch(`${this.IFTA_API_BASE}/filings/${a}/${i}/${r}`,{headers:{Authorization:`Bearer ${this.IFTA_API_KEY}`,"Content-Type":"application/json"}});if(!c.ok)throw new Error(`IFTA API error: ${c.status}`);return await c.json()}catch(c){return console.error("IFTA API error:",c),this.getMockIFTAData(r,i)}}async getDOTInspectionHistory(a){try{return this.getMockInspectionData(a)}catch(r){return console.error("DOT inspection API error:",r),[]}}async getRegistrationStatus(a,r){try{return this.getMockRegistrationData(a,r)}catch(i){return console.error("Registration API error:",i),null}}async getInsuranceStatus(a,r){try{return this.getMockInsuranceData(a)}catch(i){return console.error("Insurance API error:",i),null}}async getEmissionsStatus(a){try{return this.getMockEmissionsData(a)}catch(r){return console.error("Emissions API error:",r),null}}getMockCarrierInfo(a){return{dotNumber:a,legalName:"Demo Trucking Company LLC",dbaName:"Demo Trucking",carrierOperation:"Interstate",hm:"No",pc:"Yes",safetyRating:"Satisfactory",safetyRatingDate:"2024-06-15",reviewDate:"2024-06-15",outOfServiceDate:""}}getMockIFTAData(a,r){const i=this.calculateIFTADueDate(a,r);return{quarter:a,year:r,dueDate:i,jurisdictions:[{code:"CA",miles:2500,gallons:625,taxRate:.47,taxDue:293.75},{code:"NV",miles:1200,gallons:300,taxRate:.52,taxDue:156},{code:"AZ",miles:800,gallons:200,taxRate:.47,taxDue:94}],totalTaxDue:543.75,filingStatus:new Date(i)<new Date?"overdue":"pending"}}getMockInspectionData(a){return[{inspectionDate:"2024-06-15",inspectionType:"Annual DOT Inspection",inspectionLevel:"Level I",violations:[{code:"393.9",description:"Inoperative brake lamps",severity:"minor"}],outOfService:!1,nextInspectionDue:"2025-06-15"}]}getMockRegistrationData(a,r){return{isValid:!0,expiryDate:"2025-03-31",registrationNumber:`CA${a.slice(-6)}`}}getMockInsuranceData(a){return{isActive:!0,expiryDate:"2024-12-31",coverageAmount:1e6,provider:"Commercial Insurance Co."}}getMockEmissionsData(a){return{isCompliant:!0,lastTestDate:"2024-01-15",nextTestDue:"2025-01-15",emissionStandard:"EPA 2010"}}calculateIFTADueDate(a,r){return{Q1:`${r}-04-30`,Q2:`${r}-07-31`,Q3:`${r}-10-31`,Q4:`${r+1}-01-31`}[a]||`${r}-12-31`}async getComprehensiveComplianceData(a,r){try{const[i,c,u,m,h,x]=await Promise.allSettled([this.decodeVIN(a),r?this.getCarrierInfo(r):Promise.resolve(null),this.getDOTInspectionHistory(a),this.getRegistrationStatus(a,"CA"),this.getInsuranceStatus(a),this.getEmissionsStatus(a)]);return{vin:a,vehicleData:i.status==="fulfilled"?i.value:null,carrierData:c.status==="fulfilled"?c.value:null,inspections:u.status==="fulfilled"?u.value:[],registration:m.status==="fulfilled"?m.value:null,insurance:h.status==="fulfilled"?h.value:null,emissions:x.status==="fulfilled"?x.value:null,lastUpdated:new Date().toISOString()}}catch(i){throw console.error("Comprehensive compliance check error:",i),i}}}const fv=new dv;class mv{constructor(){le(this,"cache",new Map);le(this,"rateLimits",new Map);le(this,"defaultRetryConfig",{maxRetries:3,delayMs:1e3,backoffMultiplier:2});le(this,"API_RATE_LIMITS",{nhtsa:{requests:5,windowMs:1e3},fmcsa:{requests:10,windowMs:6e4},ifta:{requests:30,windowMs:6e4},default:{requests:20,windowMs:6e4}});le(this,"CACHE_TTL",{vinDecoding:1440*60*1e3,carrierInfo:3600*1e3,inspectionHistory:1800*1e3,registrationStatus:3600*1e3,insuranceStatus:1800*1e3,emissionsStatus:3600*1e3,iftaData:900*1e3,default:3600*1e3})}async executeApiCall(a,r,i={}){const{cacheType:c="default",rateLimitKey:u="default",retryConfig:m={},skipCache:h=!1}=i;if(!h){const y=this.getFromCache(a);if(y)return console.log(`Cache hit for: ${a}`),y}await this.enforceRateLimit(u);const x={...this.defaultRetryConfig,...m},g=await this.executeWithRetry(r,x);return!h&&g&&this.setCache(a,g,this.CACHE_TTL[c]||this.CACHE_TTL.default),g}getFromCache(a){const r=this.cache.get(a);return r?Date.now()-r.timestamp>r.ttl?(this.cache.delete(a),null):r.data:null}setCache(a,r,i){this.cache.set(a,{data:r,timestamp:Date.now(),ttl:i}),this.cache.size>1e3&&this.cleanupCache()}cleanupCache(){const a=Date.now();for(const[r,i]of this.cache.entries())a-i.timestamp>i.ttl&&this.cache.delete(r)}async enforceRateLimit(a){const r=this.API_RATE_LIMITS[a]||this.API_RATE_LIMITS.default;if(!r)return;const i=Date.now();let c=this.rateLimits.get(a);if((!c||i-c.windowStart>r.windowMs)&&(c={requests:r.requests,windowMs:r.windowMs,currentCount:0,windowStart:i},this.rateLimits.set(a,c)),c.currentCount>=c.requests){const u=c.windowMs-(i-c.windowStart);console.log(`Rate limit reached for ${a}, waiting ${u}ms`),await this.sleep(u),c.currentCount=0,c.windowStart=Date.now()}c.currentCount++}async executeWithRetry(a,r){let i,c=r.delayMs;for(let u=0;u<=r.maxRetries;u++)try{const m=await a();return u>0&&console.log(`API call succeeded on attempt ${u+1}`),m}catch(m){if(i=m instanceof Error?m:new Error(String(m)),u===r.maxRetries)throw console.error(`API call failed after ${r.maxRetries+1} attempts:`,i),i;if(!this.isRetryableError(i))throw console.error("Non-retryable error:",i),i;console.warn(`API call failed (attempt ${u+1}), retrying in ${c}ms:`,i.message),await this.sleep(c),c*=r.backoffMultiplier}throw i}isRetryableError(a){const r=a.message.toLowerCase();return r.includes("network")||r.includes("timeout")||r.includes("connection")||r.includes("500")||r.includes("502")||r.includes("503")||r.includes("504")||r.includes("429")?!0:!(r.includes("400")||r.includes("401")||r.includes("403")||r.includes("404"))}sleep(a){return new Promise(r=>setTimeout(r,a))}clearCache(){this.cache.clear(),console.log("API cache cleared")}clearCachePattern(a){const r=new RegExp(a);for(const i of this.cache.keys())r.test(i)&&this.cache.delete(i);console.log(`Cache cleared for pattern: ${a}`)}getCacheStats(){const a=this.cache.size;let r=0;for(const[i,c]of this.cache.entries())r+=i.length*2,r+=JSON.stringify(c.data).length*2,r+=24;return{totalEntries:a,hitRate:0,memoryUsage:Math.round(r/1024)}}getRateLimitStatus(){const a={},r=Date.now();for(const[i,c]of this.rateLimits.entries()){const u=c.windowMs-(r-c.windowStart);a[i]={remaining:Math.max(0,c.requests-c.currentCount),resetTime:u>0?u:0,windowMs:c.windowMs}}return a}async refreshCache(a,r,i="default"){return this.cache.delete(a),this.executeApiCall(a,r,{cacheType:i,skipCache:!1})}}const Ja=new mv;class hv{constructor(){le(this,"SAFER_QUERY_URL","http://www.safersys.org/query.asp");le(this,"SAFER_SNAPSHOT_URL","https://safer.fmcsa.dot.gov/CompanySnapshot.aspx");le(this,"lastRequestTime",0);le(this,"MIN_REQUEST_INTERVAL",2e3)}async searchByDOTNumber(a){try{if(!a||a.trim()==="")return{success:!1,error:"DOT number is required",source:"safer_web_scrape"};const r=a.replace(/\D/g,"");if(r.length<1)return{success:!1,error:"Invalid DOT number format",source:"safer_web_scrape"};await this.respectRateLimit(),console.log(`🔍 Searching SAFER database for DOT: ${r} (original: ${a})`);let i=await this.queryEndpoint(r);return i.success||(i=await this.companySnapshot(r)),i}catch(r){return console.error("SAFER scraping error:",r),{success:!1,error:`Failed to fetch data from SAFER: ${r instanceof Error&&r instanceof Error?r.message:String(r)}`,source:"safer_web_scrape"}}}async queryEndpoint(a){try{const r=new URLSearchParams({query_type:"queryCarrierSnapshot",query_param:"USDOT",query_string:a,query_name:""});console.log(`🌐 Querying safersys.org for DOT: ${a}`);const i=await fetch(this.SAFER_QUERY_URL,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.5","Accept-Encoding":"gzip, deflate"},body:r});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const c=await i.text(),u=this.parseQueryResponse(c,a);return u?{success:!0,data:u,source:"safer_web_scrape"}:{success:!1,error:"No data found for this DOT number",source:"safer_web_scrape"}}catch(r){return console.error("Query endpoint error:",r),{success:!1,error:r instanceof Error?r.message:String(r),source:"safer_web_scrape"}}}async companySnapshot(a){try{const r=`${this.SAFER_SNAPSHOT_URL}?query_type=queryCarrierSnapshot&query_param=USDOT&query_string=${a}`,i=await fetch(r,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const c=await i.text(),u=this.parseSnapshotResponse(c,a);return u?{success:!0,data:u,source:"safer_web_scrape"}:{success:!1,error:"No data found in company snapshot",source:"safer_web_scrape"}}catch(r){return console.error("Company snapshot error:",r),{success:!1,error:r instanceof Error?r.message:String(r),source:"safer_web_scrape"}}}parseQueryResponse(a,r){var i,c;try{if(a.toLowerCase().includes("no records")||a.toLowerCase().includes("no data found")||a.toLowerCase().includes("not found"))return console.log(`📋 No SAFER records found for DOT: ${r}`),null;const m=new DOMParser().parseFromString(a,"text/html");let h={dotNumber:r,lastUpdated:new Date().toISOString(),operatingStatus:"Unknown"};const x=m.querySelectorAll("table");for(const g of x){const y=g.querySelectorAll("tr");for(const w of y){const D=w.querySelectorAll("td, th");for(let b=0;b<D.length-1;b++){const N=D[b],E=D[b+1],A=((i=N.textContent)==null?void 0:i.trim().toLowerCase())||"",X=((c=E.textContent)==null?void 0:c.trim())||"";!X||X===""||X==="-"||(A.includes("legal name")||A.includes("entity name")?h.legalName=X:A.includes("dba name")||A.includes("operating")&&A.includes("name")?h.dbaName=X:A.includes("physical address")?h.physicalAddress=this.cleanAddress(X):A.includes("mailing address")?h.mailingAddress=this.cleanAddress(X):A.includes("phone")?h.phone=X:A.includes("safety rating")?h.safetyRating=X:A.includes("operating status")||A.includes("carrier operation")?h.operatingStatus=X:A.includes("drivers")&&!A.includes("out")?h.numberOfDrivers=this.parseNumber(X):A.includes("power units")||A.includes("trucks")?h.numberOfPowerUnits=this.parseNumber(X):A.includes("carrier operation")&&(h.carrierOperationType=X))}}}return h.legalName&&h.physicalAddress?h:null}catch(u){return console.error("HTML parsing error:",u),null}}parseSnapshotResponse(a,r){var i;try{const u=new DOMParser().parseFromString(a,"text/html");if(a.toLowerCase().includes("no data found")||a.toLowerCase().includes("no records found"))return null;let m={dotNumber:r,lastUpdated:new Date().toISOString()};const h=((i=u.body)==null?void 0:i.textContent)||a,x={legalName:/Legal Name[:\s]+([^\n\r]+)/i,dbaName:/DBA Name[:\s]+([^\n\r]+)/i,phone:/Phone[:\s]+([\d\-\(\)\s]+)/i,safetyRating:/Safety Rating[:\s]+([^\n\r]+)/i,operatingStatus:/Operating Status[:\s]+([^\n\r]+)/i};for(const[g,y]of Object.entries(x)){const w=h.match(y);w&&w[1]&&(m[g]=w[1].trim())}return m.legalName||(m.legalName="Unknown Carrier"),m.physicalAddress||(m.physicalAddress="Address Not Available"),m.operatingStatus||(m.operatingStatus="Unknown"),m}catch(c){return console.error("Snapshot parsing error:",c),null}}async respectRateLimit(){const r=Date.now()-this.lastRequestTime;if(r<this.MIN_REQUEST_INTERVAL){const i=this.MIN_REQUEST_INTERVAL-r;console.log(`Rate limiting: waiting ${i}ms`),await new Promise(c=>setTimeout(c,i))}this.lastRequestTime=Date.now()}async batchSearch(a){const r=[];console.log(`Starting batch search for ${a.length} DOT numbers`);for(let i=0;i<a.length;i++){const c=a[i];console.log(`Processing ${i+1}/${a.length}: DOT ${c}`);const u=await this.searchByDOTNumber(c);r.push(u),i<a.length-1&&await new Promise(m=>setTimeout(m,1e3))}return console.log(`Batch search completed: ${r.filter(i=>i.success).length} successful`),r}cleanAddress(a){return a.replace(/\s+/g," ").trim()}parseNumber(a){const r=a.match(/\d+/);return r?parseInt(r[0],10):0}async checkSaferAvailability(){try{return(await fetch(this.SAFER_QUERY_URL,{method:"HEAD"})).ok}catch(a){return console.error("SAFER availability check failed:",a),!1}}}const xv=new hv;class gv{constructor(){le(this,"CARB_TRUCRS_API","https://ww2.arb.ca.gov/applications/trucrs-reporting/api");le(this,"CARB_PERP_API","https://ww2.arb.ca.gov/applications/perp/api");le(this,"FMCSA_SAFER_API","https://mobile.fmcsa.dot.gov/qc/services");le(this,"CA_DMV_API","https://www.dmv.ca.gov/portal/vehicle-industry-services/api");le(this,"VERISK_API","https://api.verisk.com/vehicle-data/v1");le(this,"STATE_DMV_APIS",{CA:"https://www.dmv.ca.gov/portal/api",TX:"https://www.txdmv.gov/api",NY:"https://dmv.ny.gov/api",FL:"https://www.flhsmv.gov/api"});le(this,"CARB_API_KEY",window.REACT_APP_CARB_API_KEY||"demo-key");le(this,"FMCSA_API_KEY",window.REACT_APP_FMCSA_API_KEY||"demo-key");le(this,"VERISK_API_KEY",window.REACT_APP_VERISK_API_KEY||"demo-key")}async getCARBEmissionsData(a){var r;try{const i=await Ja.executeApiCall(`carb-trucrs-${a}`,async()=>{const u=await fetch(`${this.CARB_TRUCRS_API}/vehicle/${a}`,{headers:{Authorization:`Bearer ${this.CARB_API_KEY}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`CARB TRUCRS API error: ${u.status}`);return u.json()},{cacheType:"emissionsStatus",rateLimitKey:"default"}),c=await Ja.executeApiCall(`carb-perp-${a}`,async()=>{const u=await fetch(`${this.CARB_PERP_API}/vehicle/${a}/status`,{headers:{Authorization:`Bearer ${this.CARB_API_KEY}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`CARB PERP API error: ${u.status}`);return u.json()},{cacheType:"emissionsStatus",rateLimitKey:"default"});return{vin:a,emissionsStandard:i.emissionsStandard||"EPA 2010",lastInspectionDate:((r=i.lastInspection)==null?void 0:r.date)||"",nextInspectionDue:i.nextInspectionDue||"",complianceStatus:i.complianceStatus||"pending",violations:i.violations||[],perpStatus:c?{enrolled:c.enrolled||!1,testDate:c.lastTestDate,result:c.lastTestResult}:void 0}}catch(i){return console.error("CARB API error:",i),null}}async getEnhancedFMCSAData(a){try{if(!a||a.trim()==="")return console.warn("⚠️ No DOT number provided. FMCSA data requires a DOT number to identify the carrier."),console.log("💡 DOT numbers identify the company that operates the vehicle. Add the carrier's DOT number to get compliance data."),null;if(this.FMCSA_API_KEY&&this.FMCSA_API_KEY!=="demo-key")return console.log(`🔑 Using official FMCSA API for DOT: ${a}`),await this.getOfficialFMCSAData(a);console.log(`🔄 Attempting SAFER web scraping for DOT: ${a}`);const r=await xv.searchByDOTNumber(a);return r.success&&r.data?(console.log(`✅ SAFER scraping successful: ${r.data.legalName}`),{dotNumber:a,legalName:r.data.legalName||"Unknown Carrier",dbaName:r.data.dbaName||"",safetyRating:r.data.safetyRating||"Not Rated",safetyRatingDate:r.data.safetyRatingDate||"",smsData:{unsafeDriving:0,hoursOfService:0,driverFitness:0,controlledSubstances:0,vehicleMaintenance:0,hazmatCompliance:0,crashIndicator:0},insuranceData:{hasRequiredInsurance:r.data.insuranceRequired==="Yes",insuranceCarrier:"Available via SAFER",policyNumber:r.data.insuranceOnFile||"",effectiveDate:"",expirationDate:"",coverageAmount:0},inspectionHistory:[]}):(console.warn(`⚠️ SAFER scraping failed: ${r.error||"No data found"}`),console.log("💡 To get reliable DOT data, obtain an FMCSA API key and set REACT_APP_FMCSA_API_KEY"),null)}catch(r){return console.error("Enhanced FMCSA API error:",r),null}}async getOfficialFMCSAData(a){const r=await Ja.executeApiCall(`fmcsa-carrier-${a}`,async()=>{const m=await fetch(`${this.FMCSA_SAFER_API}/carriers/${a}?webKey=${this.FMCSA_API_KEY}`);if(!m.ok)throw new Error(`FMCSA Carrier API error: ${m.status}`);return m.json()},{cacheType:"carrierInfo",rateLimitKey:"fmcsa"}),i=await Ja.executeApiCall(`fmcsa-sms-${a}`,async()=>{const m=await fetch(`${this.FMCSA_SAFER_API}/carriers/${a}/sms?webKey=${this.FMCSA_API_KEY}`);if(!m.ok)throw new Error(`FMCSA SMS API error: ${m.status}`);return m.json()},{cacheType:"carrierInfo",rateLimitKey:"fmcsa"}),c=await Ja.executeApiCall(`fmcsa-insurance-${a}`,async()=>{const m=await fetch(`${this.FMCSA_SAFER_API}/carriers/${a}/insurance?webKey=${this.FMCSA_API_KEY}`);if(!m.ok)throw new Error(`FMCSA Insurance API error: ${m.status}`);return m.json()},{cacheType:"insuranceStatus",rateLimitKey:"fmcsa"}),u=await Ja.executeApiCall(`fmcsa-inspections-${a}`,async()=>{const m=await fetch(`${this.FMCSA_SAFER_API}/carriers/${a}/inspections?webKey=${this.FMCSA_API_KEY}`);if(!m.ok)throw new Error(`FMCSA Inspection API error: ${m.status}`);return m.json()},{cacheType:"inspectionHistory",rateLimitKey:"fmcsa"});return{dotNumber:a,legalName:r.legalName||"",dbaName:r.dbaName||"",safetyRating:r.safetyRating||"",safetyRatingDate:r.safetyRatingDate||"",smsData:{unsafeDriving:i.unsafeDriving||0,hoursOfService:i.hoursOfService||0,driverFitness:i.driverFitness||0,controlledSubstances:i.controlledSubstances||0,vehicleMaintenance:i.vehicleMaintenance||0,hazmatCompliance:i.hazmatCompliance||0,crashIndicator:i.crashIndicator||0},insuranceData:{hasRequiredInsurance:c.hasRequiredInsurance||!1,insuranceCarrier:c.carrier||"",policyNumber:c.policyNumber||"",effectiveDate:c.effectiveDate||"",expirationDate:c.expirationDate||"",coverageAmount:c.coverageAmount||0},inspectionHistory:u.inspections||[]}}async getStateRegistrationData(a,r){var i,c,u;try{const m=this.getStateApiKey(r);if(!m||m==="demo-key")return console.warn(`⚠️ No ${r} DMV API key available. Registration data for VIN ${a} will show as blanks.`),console.log(`💡 To get real registration data, obtain a ${r} DMV API key and set REACT_APP_${r}_DMV_API_KEY`),null;const h=this.STATE_DMV_APIS[r];if(!h)return console.warn(`⚠️ No API endpoint configured for state: ${r}`),null;console.log(`🔑 Using official ${r} DMV API for VIN: ${a}`);const x=await Ja.executeApiCall(`state-registration-${r}-${a}`,async()=>{const g=await fetch(`${h}/vehicle/registration/${a}`,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(!g.ok)throw new Error(`${r} DMV API error: ${g.status}`);return g.json()},{cacheType:"registrationStatus",rateLimitKey:"default"});return{state:r,isValid:x.isValid||!1,registrationNumber:x.registrationNumber||"",expirationDate:x.expirationDate||"",vehicleType:x.vehicleType||"",weightClass:x.weightClass||"",fees:{registrationFee:((i=x.fees)==null?void 0:i.registrationFee)||0,weightFee:((c=x.fees)==null?void 0:c.weightFee)||0,totalFee:((u=x.fees)==null?void 0:u.totalFee)||0},restrictions:x.restrictions||[]}}catch(m){return console.error(`${r} DMV API error:`,m),null}}async getInsuranceVerification(a){try{const[r,i]=await Promise.allSettled([this.checkDMVInsurance(a),this.checkVeriskInsurance(a)]);return r.status==="fulfilled"&&r.value?r.value:i.status==="fulfilled"&&i.value?i.value:(console.warn(`⚠️ No insurance verification APIs available for VIN: ${a}`),console.log("💡 To get real insurance data, obtain API keys for DMV or Verisk and configure them"),null)}catch(r){return console.error("Insurance verification error:",r),null}}async getDOTInspectionRecords(a,r){try{const i=[];if(r){const m=await this.getFMCSAInspections(r);i.push(...m)}const c=await this.getStateInspections(a);return i.push(...c),this.deduplicateInspections(i).sort((m,h)=>new Date(h.date).getTime()-new Date(m.date).getTime())}catch(i){return console.error("DOT inspection records error:",i),[]}}async getUnifiedComplianceData(a,r){try{console.log(`Starting unified compliance check for VIN: ${a}, DOT: ${r}`);const[i,c,u,m,h,x]=await Promise.allSettled([fv.decodeVIN(a),this.getCARBEmissionsData(a),r?this.getEnhancedFMCSAData(r):Promise.resolve(null),this.getStateRegistrationData(a,"CA"),this.getInsuranceVerification(a),this.getDOTInspectionRecords(a,r)]);return{vin:a,dotNumber:r,vehicleData:i.status==="fulfilled"?i.value:null,carbData:c.status==="fulfilled"?c.value:null,fmcsaData:u.status==="fulfilled"?u.value:null,registrationData:m.status==="fulfilled"?m.value:null,insuranceData:h.status==="fulfilled"?h.value:null,inspectionRecords:x.status==="fulfilled"?x.value:[],complianceScore:this.calculateComplianceScore({carbData:c.status==="fulfilled"?c.value:null,fmcsaData:u.status==="fulfilled"?u.value:null,registrationData:m.status==="fulfilled"?m.value:null,insuranceData:h.status==="fulfilled"?h.value:null}),lastUpdated:new Date().toISOString()}}catch(i){throw console.error("Unified compliance check error:",i),i}}async checkDMVInsurance(a){const r=await fetch(`${this.CA_DMV_API}/insurance/verify/${a}`,{headers:{Authorization:`Bearer ${this.getStateApiKey("CA")}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`DMV Insurance API error: ${r.status}`);const i=await r.json();return{isActive:i.isActive||!1,carrier:i.carrier||"",policyNumber:i.policyNumber||"",effectiveDate:i.effectiveDate||"",expirationDate:i.expirationDate||"",coverageTypes:i.coverageTypes||{liability:0,cargo:0},verificationSource:"dmv"}}async checkVeriskInsurance(a){const r=await fetch(`${this.VERISK_API}/insurance/verify`,{method:"POST",headers:{Authorization:`Bearer ${this.VERISK_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({vin:a})});if(!r.ok)throw new Error(`Verisk API error: ${r.status}`);const i=await r.json();return{isActive:i.isActive||!1,carrier:i.carrier||"",policyNumber:i.policyNumber||"",effectiveDate:i.effectiveDate||"",expirationDate:i.expirationDate||"",coverageTypes:i.coverageTypes||{liability:0,cargo:0},verificationSource:"third_party"}}async getFMCSAInspections(a){var c;const r=await fetch(`${this.FMCSA_SAFER_API}/carriers/${a}/inspections/detailed?webKey=${this.FMCSA_API_KEY}`);if(!r.ok)throw new Error(`FMCSA Detailed Inspections API error: ${r.status}`);return((c=(await r.json()).inspections)==null?void 0:c.map(u=>({inspectionId:u.id||"",date:u.date||"",state:u.state||"",inspectionLevel:u.level||"1",inspector:u.inspector||"",location:u.location||"",violations:u.violations||[],outOfServiceStatus:{driver:u.driverOOS||!1,vehicle:u.vehicleOOS||!1},totalTime:u.totalTime||0})))||[]}async getStateInspections(a){return[]}deduplicateInspections(a){const r=new Set;return a.filter(i=>{const c=`${i.date}-${i.inspectionId}`;return r.has(c)?!1:(r.add(c),!0)})}calculateComplianceScore(a){var i,c,u,m;let r=100;return((i=a.carbData)==null?void 0:i.complianceStatus)==="non-compliant"&&(r-=20),((c=a.fmcsaData)==null?void 0:c.safetyRating)==="Unsatisfactory"&&(r-=30),(u=a.registrationData)!=null&&u.isValid||(r-=15),(m=a.insuranceData)!=null&&m.isActive||(r-=25),Math.max(0,r)}getStateApiKey(a){return window[`REACT_APP_${a}_DMV_API_KEY`]||"demo-key"}}const ku=new gv;class pv{generateRegistrationDocument(a){const r=`
VEHICLE REGISTRATION CERTIFICATE

Vehicle Information:
VIN: ${a.vin}
Make: ${a.make}
Model: ${a.model}
Year: ${a.year}
License Plate: ${a.licensePlate}

Registration Details:
Registration Number: REG-${a.vin.slice(-6)}
State: CA
Issue Date: ${new Date().toLocaleDateString()}
Expiry Date: ${new Date(Date.now()+31536e6).toLocaleDateString()}

Registered Owner: Fleet Transportation LLC
Address: 123 Fleet St, Los Angeles, CA 90210

This certificate confirms that the above vehicle is properly registered
and authorized for commercial operation.

California Department of Motor Vehicles
    `;return{type:"registration",fileName:`registration_${a.vin}_${new Date().toISOString().slice(0,10)}.txt`,content:r.trim(),issueDate:new Date().toISOString(),expiryDate:new Date(Date.now()+365*24*60*60*1e3).toISOString(),issuingAuthority:"California DMV"}}generateInsuranceDocument(a){const r=`
CERTIFICATE OF LIABILITY INSURANCE

Policy Information:
Policy Number: INS-${a.vin.slice(-8)}
Insurance Company: TruckGuard Insurance Co.
Policy Period: ${new Date().toLocaleDateString()} to ${new Date(Date.now()+31536e6).toLocaleDateString()}

Insured Vehicle:
VIN: ${a.vin}
Year/Make/Model: ${a.year} ${a.make} ${a.model}
License Plate: ${a.licensePlate}

Coverage Limits:
Bodily Injury: $1,000,000 per person / $2,000,000 per occurrence
Property Damage: $1,000,000 per occurrence
Cargo Coverage: $100,000
Uninsured Motorist: $1,000,000

Certificate Holder: ${a.make} Fleet Operations
Address: 123 Fleet Street, Los Angeles, CA 90210

This certificate is issued for information only and confers no rights
upon the certificate holder.

TruckGuard Insurance Co.
License #: CA-INS-2024-7891
    `;return{type:"insurance",fileName:`insurance_certificate_${a.vin}_${new Date().toISOString().slice(0,10)}.txt`,content:r.trim(),issueDate:new Date().toISOString(),expiryDate:new Date(Date.now()+365*24*60*60*1e3).toISOString(),issuingAuthority:"TruckGuard Insurance Co."}}generateInspectionDocument(a){const r=`
DOT SAFETY INSPECTION REPORT

Inspection Details:
Inspection Date: ${new Date().toLocaleDateString()}
Inspector: John Smith, DOT #12345
Inspection Station: Fleet Maintenance Center
Location: Los Angeles, CA

Vehicle Information:
VIN: ${a.vin}
Year/Make/Model: ${a.year} ${a.make} ${a.model}
License Plate: ${a.licensePlate}
DOT Number: ${a.dotNumber||"DOT-"+a.vin.slice(-6)}

Inspection Results:
✓ Brake System: PASS
✓ Steering System: PASS  
✓ Lighting System: PASS
✓ Tires: PASS
✓ Exhaust System: PASS
✓ Coupling Device: PASS
✓ Emergency Equipment: PASS

Overall Result: PASS
Next Inspection Due: ${new Date(Date.now()+31536e6).toLocaleDateString()}

Inspector Signature: John Smith
DOT Certification #: CA-DOT-12345

Federal Motor Carrier Safety Administration
    `;return{type:"inspection",fileName:`dot_inspection_${a.vin}_${new Date().toISOString().slice(0,10)}.txt`,content:r.trim(),issueDate:new Date().toISOString(),expiryDate:new Date(Date.now()+365*24*60*60*1e3).toISOString(),issuingAuthority:"FMCSA"}}downloadSingleDocument(a,r){let i;switch(r){case"registration":i=this.generateRegistrationDocument(a);break;case"insurance":i=this.generateInsuranceDocument(a);break;case"inspection":i=this.generateInspectionDocument(a);break;default:throw new Error(`Unsupported document type: ${r}`)}this.triggerDownload(i.content,i.fileName,"text/plain")}downloadVehiclePackage(a){const r=this.generateRegistrationDocument(a),i=this.generateInsuranceDocument(a),c=this.generateInspectionDocument(a),u=`
VEHICLE DOCUMENT PACKAGE
Generated: ${new Date().toLocaleString()}
Vehicle: ${a.year} ${a.make} ${a.model}
VIN: ${a.vin}
License Plate: ${a.licensePlate}

=== INCLUDED DOCUMENTS ===
1. ${r.fileName}
2. ${i.fileName}
3. ${c.fileName}

===============================

REGISTRATION CERTIFICATE:
${r.content}

===============================

INSURANCE CERTIFICATE:
${i.content}

===============================

DOT INSPECTION REPORT:
${c.content}

===============================

Package generated by TruckBo Fleet Management System
For questions, contact your fleet administrator.
    `,m=`vehicle_documents_${a.vin}_${new Date().toISOString().slice(0,10)}.txt`;this.triggerDownload(u.trim(),m,"text/plain")}downloadComplianceSummary(a){const r=`
FLEET COMPLIANCE SUMMARY REPORT
Generated: ${new Date().toLocaleString()}
Total Vehicles: ${a.length}

=== VEHICLE COMPLIANCE STATUS ===

${a.map((c,u)=>`
${u+1}. ${c.year} ${c.make} ${c.model}
   VIN: ${c.vin}
   License Plate: ${c.licensePlate}
   Status: ${(c.status||"unknown").toUpperCase()}
   
   Registration: ✓ Valid until ${new Date(Date.now()+31536e6).toLocaleDateString()}
   Insurance: ✓ Valid until ${new Date(Date.now()+31536e6).toLocaleDateString()}
   DOT Inspection: ✓ Valid until ${new Date(Date.now()+31536e6).toLocaleDateString()}
`).join(`
`)}

=== COMPLIANCE SUMMARY ===
✓ All vehicles have current registration
✓ All vehicles have valid insurance coverage
✓ All vehicles have passed DOT inspections
✓ No expired documents found
✓ Fleet is compliant for commercial operation

Report generated by TruckBo Fleet Management System
This report is suitable for DOT audit purposes.

Fleet Administrator: TruckBo User
Company: Fleet Transportation LLC
Date: ${new Date().toLocaleDateString()}
    `,i=`fleet_compliance_summary_${new Date().toISOString().slice(0,10)}.txt`;this.triggerDownload(r.trim(),i,"text/plain")}triggerDownload(a,r,i){const c=new Blob([a],{type:i}),u=window.URL.createObjectURL(c),m=document.createElement("a");m.href=u,m.download=r,m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(u)}prepareEmailDocument(a,r){let i;switch(r){case"registration":i=this.generateRegistrationDocument(a);break;case"insurance":i=this.generateInsuranceDocument(a);break;case"inspection":i=this.generateInspectionDocument(a);break;default:throw new Error(`Unsupported document type: ${r}`)}return`Subject: ${r.charAt(0).toUpperCase()+r.slice(1)} Document - ${a.vin}

${i.content}

---
Sent from TruckBo Fleet Management System`}}const bv=new pv;class yv{async getVehicleData(a,r={}){const i={canTryFile:!0,canTryManual:!0,template:void 0};if(r.skipApi)return{data:null,fallbackOptions:{...i,template:this.createManualEntryTemplate(a)}};try{const c=await Ja.executeApiCall(`vin-comprehensive-${a}`,()=>ku.getUnifiedComplianceData(a),{cacheType:"vinDecoding",rateLimitKey:"nhtsa"});if(c!=null&&c.vehicleData&&this.isValidVehicleData(c.vehicleData)){const u=this.mapApiDataToVehicleData(a,c);return r.requireComplete&&u.missingFields.length>0?{data:u,fallbackOptions:{...i,template:this.createManualEntryTemplate(a,u)}}:{data:u,fallbackOptions:i}}}catch(c){console.warn(`API call failed for VIN ${a}:`,c)}return{data:null,fallbackOptions:{...i,template:this.createManualEntryTemplate(a)}}}async processBulkFile(a){try{const r=await this.readFileContent(a),i=this.parseFileContent(r,a.type),c=[],u=[];let m=0,h=0;for(let x=0;x<i.length;x++){const g=i[x];try{const y=this.mapRowToVehicleData(g,x+1);y?(c.push(y),m++):(u.push(`Row ${x+1}: Invalid or missing data`),h++)}catch(y){u.push(`Row ${x+1}: ${y instanceof Error?y.message:"Processing error"}`),h++}}return{success:m>0,processed:m,failed:h,errors:u,data:c}}catch(r){return{success:!1,processed:0,failed:0,errors:[r instanceof Error?r.message:"File processing failed"],data:[]}}}processManualEntry(a,r){var u,m,h,x;const i=[];return["make","model","year"].forEach(g=>{(!r[g]||r[g].toString().trim()==="")&&i.push(g)}),{vin:a,year:r.year?parseInt(r.year):void 0,make:(u=r.make)==null?void 0:u.toString().trim(),model:(m=r.model)==null?void 0:m.toString().trim(),fuelType:((h=r.fuelType)==null?void 0:h.toString().trim())||"Diesel",maxWeight:r.maxWeight?parseInt(r.maxWeight):void 0,vehicleClass:((x=r.vehicleClass)==null?void 0:x.toString().trim())||"Unknown",dataSource:{method:"manual",confidence:i.length===0?"high":"medium",lastUpdated:new Date().toISOString(),source:"Manual Entry"},missingFields:i,needsReview:i.length>0}}createManualEntryTemplate(a,r){return{vin:a,requiredFields:[{field:"make",label:"Vehicle Make",type:"select",options:["Peterbilt","Kenworth","Freightliner","Volvo","Mack","International","Other"],validation:{required:!0}},{field:"model",label:"Vehicle Model",type:"text",validation:{required:!0}},{field:"year",label:"Model Year",type:"number",validation:{required:!0,min:1990,max:new Date().getFullYear()+1}}],optionalFields:[{field:"fuelType",label:"Fuel Type",type:"select",options:["Diesel","Gasoline","CNG","Electric","Hybrid"]},{field:"maxWeight",label:"Max Weight (lbs)",type:"number"},{field:"vehicleClass",label:"Vehicle Class",type:"select",options:["Class 1","Class 2","Class 3","Class 4","Class 5","Class 6","Class 7","Class 8"]}]}}mapApiDataToVehicleData(a,r){const i=r.vehicleData,c=[];return i.Make||c.push("make"),i.Model||c.push("model"),i.ModelYear||c.push("year"),{vin:a,year:i.ModelYear?parseInt(i.ModelYear):void 0,make:i.Make||void 0,model:i.Model||void 0,fuelType:i.FuelTypePrimary||void 0,maxWeight:i.GVWR?parseInt(i.GVWR):void 0,vehicleClass:i.VehicleClass||void 0,dataSource:{method:"api",confidence:c.length===0?"high":"medium",lastUpdated:new Date().toISOString(),source:"NHTSA vPIC API"},missingFields:c,needsReview:c.length>0}}isValidVehicleData(a){return a&&(a.Make||a.Model||a.ModelYear)}readFileContent(a){return new Promise((r,i)=>{const c=new FileReader;c.onload=u=>{var m;return r((m=u.target)==null?void 0:m.result)},c.onerror=()=>i(new Error("Failed to read file")),c.readAsText(a)})}parseFileContent(a,r){const i=a.split(`
`).map(m=>m.trim()).filter(m=>m);if(i.length===0)throw new Error("File is empty");const c=[],u=i[0].split(",").map(m=>m.trim().replace(/['"]/g,"").toLowerCase());for(let m=1;m<i.length;m++){const h=i[m].split(",").map(g=>g.trim().replace(/['"]/g,"")),x={};u.forEach((g,y)=>{x[g]=h[y]||""}),c.push(x)}return c}mapRowToVehicleData(a,r){const i=a.vin||a.vehicle_identification_number||"";if(!i||i.length!==17)throw new Error(`Invalid VIN: ${i}`);const c=[];return a.make||c.push("make"),a.model||c.push("model"),a.year||c.push("year"),{vin:i.toUpperCase(),year:a.year?parseInt(a.year):void 0,make:a.make||void 0,model:a.model||void 0,fuelType:a.fuel_type||a.fueltype||"Diesel",maxWeight:a.max_weight||a.gvwr?parseInt(a.max_weight||a.gvwr):void 0,vehicleClass:a.vehicle_class||a.class||"Unknown",dataSource:{method:"file",confidence:c.length===0?"high":"medium",lastUpdated:new Date().toISOString(),source:`File Upload (Row ${r})`},missingFields:c,needsReview:c.length>0}}generateBulkUploadTemplate(){const a=["vin","make","model","year","fuel_type","max_weight","vehicle_class"],r=["1HGCM82633A123456,Freightliner,Cascadia,2022,Diesel,80000,Class 8","1FTFW1ET5DKE96708,Peterbilt,579,2021,Diesel,80000,Class 8"];return[a.join(","),...r].join(`
`)}downloadBulkUploadTemplate(){const a=this.generateBulkUploadTemplate(),r=new Blob([a],{type:"text/csv"}),i=window.URL.createObjectURL(r),c=document.createElement("a");c.style.display="none",c.href=i,c.download="vehicle_data_template.csv",document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(i),document.body.removeChild(c)}}const fr=new yv,vv=({onDataProcessed:f,onError:a})=>{const[r,i]=G.useState(!1),[c,u]=G.useState(!1),[m,h]=G.useState(null),x=G.useRef(null),g=N=>{N.preventDefault(),N.type==="dragenter"||N.type==="dragover"?u(!0):N.type==="dragleave"&&u(!1)},y=N=>{N.preventDefault(),u(!1);const E=N.dataTransfer.files;E&&E[0]&&D(E[0])},w=N=>{const E=N.target.files;E&&E[0]&&D(E[0])},D=async N=>{if(!N.name.toLowerCase().endsWith(".csv")){a("Please upload a CSV file");return}i(!0),h(null);try{const E=await fr.processBulkFile(N);h(E),E.success?f(E.data):a("File processing failed. Please check the file format and try again.")}catch(E){a(E instanceof Error?E.message:"File processing failed")}finally{i(!1)}},b=()=>{fr.downloadBulkUploadTemplate()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Bulk Vehicle Data Upload"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Upload a CSV file with your vehicle data"}),n.jsx("button",{onClick:b,className:"mb-4 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"📥 Download CSV Template"})]}),n.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${c?"border-blue-500 bg-blue-50":"border-gray-300"} ${r?"opacity-50 pointer-events-none":""}`,onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:y,children:r?n.jsxs("div",{children:[n.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-gray-600",children:"Processing file..."})]}):n.jsxs("div",{children:[n.jsx("div",{className:"text-4xl mb-4",children:"📁"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop your CSV file here, or click to browse"}),n.jsx("input",{ref:x,type:"file",accept:".csv",onChange:w,className:"hidden"}),n.jsx("button",{onClick:()=>{var N;return(N=x.current)==null?void 0:N.click()},className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Choose File"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supported format: CSV • Max size: 10MB"})]})}),m&&n.jsxs("div",{className:`rounded-lg p-4 ${m.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[n.jsx("h4",{className:`font-semibold mb-2 ${m.success?"text-green-800":"text-red-800"}`,children:"Upload Results"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-medium text-green-700",children:"Processed: "}),m.processed]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-medium text-red-700",children:"Failed: "}),m.failed]})]}),m.errors.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:"Errors:"}),n.jsx("div",{className:"max-h-32 overflow-y-auto bg-white rounded p-2 text-sm",children:m.errors.map((N,E)=>n.jsxs("div",{className:"text-red-700",children:["• ",N]},E))})]})]})]})},Nv=({template:f,existingData:a,onDataSubmitted:r,onCancel:i})=>{var D;const[c,u]=G.useState(()=>{const b={vin:f.vin};return a&&Object.keys(a).forEach(N=>{a[N]!==void 0&&(b[N]=a[N])}),b}),[m,h]=G.useState({}),x=(b,N)=>{u(E=>({...E,[b]:N})),m[b]&&h(E=>({...E,[b]:""}))},g=()=>{const b={};return f.requiredFields.forEach(N=>{var A;const E=c[N.field];if((A=N.validation)!=null&&A.required&&(!E||E.toString().trim()==="")){b[N.field]=`${N.label} is required`;return}if(E&&N.validation){const X=N.validation;if(N.type==="number"){const L=parseFloat(String(E));isNaN(L)?b[N.field]=`${N.label} must be a valid number`:(X.min!==void 0&&L<X.min&&(b[N.field]=`${N.label} must be at least ${X.min}`),X.max!==void 0&&L>X.max&&(b[N.field]=`${N.label} must be no more than ${X.max}`))}X.pattern&&!new RegExp(X.pattern).test(E.toString())&&(b[N.field]=`${N.label} format is invalid`)}}),h(b),Object.keys(b).length===0},y=b=>{if(b.preventDefault(),!g())return;const N=fr.processManualEntry(f.vin,c);r(N)},w=(b,N=!1)=>{var X;const E=String(c[b.field]||""),A=m[b.field];return n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[b.label,N&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),b.type==="select"?n.jsxs("select",{value:E,onChange:L=>x(b.field,L.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${A?"border-red-500":"border-gray-300"}`,children:[n.jsxs("option",{value:"",children:["Select ",b.label]}),(X=b.options)==null?void 0:X.map(L=>n.jsx("option",{value:L,children:L},L))]}):n.jsx("input",{type:b.type,value:E,onChange:L=>x(b.field,L.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${A?"border-red-500":"border-gray-300"}`,placeholder:`Enter ${b.label.toLowerCase()}`}),A&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:A})]},b.field)};return n.jsxs("div",{className:"max-w-2xl",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Manual Vehicle Data Entry"}),n.jsxs("p",{className:"text-gray-600 mb-2",children:["Enter vehicle information for VIN: ",n.jsx("span",{className:"font-mono font-medium",children:f.vin})]}),((D=a==null?void 0:a.dataSource)==null?void 0:D.method)==="api"&&n.jsx("p",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded p-2",children:"⚠️ Some data was retrieved from API but may be incomplete. Please review and fill missing fields."})]}),n.jsxs("form",{onSubmit:y,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Required Information"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.requiredFields.map(b=>w(b,!0))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Optional Information"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.optionalFields.map(b=>w(b,!1))})]}),n.jsxs("div",{className:"flex gap-4 pt-4 border-t",children:[n.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Save Vehicle Data"}),n.jsx("button",{type:"button",onClick:i,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-medium",children:"Cancel"})]})]})]})},Sv=({data:f})=>{const a=()=>{switch(f.dataSource.method){case"api":return"bg-green-100 text-green-800 border-green-200";case"file":return"bg-blue-100 text-blue-800 border-blue-200";case"manual":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},r=()=>{switch(f.dataSource.method){case"api":return"🔗";case"file":return"📁";case"manual":return"✏️";default:return"❓"}},i=()=>{switch(f.dataSource.confidence){case"high":return"text-green-600";case"medium":return"text-yellow-600";case"low":return"text-red-600";default:return"text-gray-600"}};return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded text-sm border ${a()}`,children:[n.jsx("span",{className:"mr-1",children:r()}),f.dataSource.method.toUpperCase()]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[n.jsxs("div",{children:["Confidence: ",n.jsx("span",{className:i(),children:f.dataSource.confidence})]}),n.jsxs("div",{children:["Source: ",f.dataSource.source]}),n.jsxs("div",{children:["Updated: ",new Date(f.dataSource.lastUpdated).toLocaleDateString()]})]}),f.missingFields.length>0&&n.jsxs("div",{className:"text-xs text-amber-600",children:["Missing: ",f.missingFields.join(", ")]}),f.needsReview&&n.jsx("div",{className:"text-xs text-red-600 font-medium",children:"⚠️ Needs Review"})]})};class wv{constructor(){le(this,"monitoringIntervals",new Map);le(this,"complianceStatuses",new Map);le(this,"subscribers",new Map);le(this,"defaultConfig",{checkInterval:360*60*1e3,alertThresholds:{critical:7,high:30,medium:90},enabledSources:["carb","fmcsa","dmv","insurance","inspections"],notificationChannels:["email"]})}async startMonitoring(a,r,i,c={}){const u={...this.defaultConfig,...c};console.log(`Starting compliance monitoring for vehicle ${a} (${r})`),await this.performComplianceCheck(a,r,i,u);const m=setInterval(async()=>{await this.performComplianceCheck(a,r,i,u)},u.checkInterval);this.monitoringIntervals.set(a,m)}stopMonitoring(a){const r=this.monitoringIntervals.get(a);r&&(clearInterval(r),this.monitoringIntervals.delete(a)),this.complianceStatuses.delete(a),this.subscribers.delete(a),console.log(`Stopped compliance monitoring for vehicle ${a}`)}getComplianceStatus(a){return this.complianceStatuses.get(a)||null}subscribe(a,r){return this.subscribers.has(a)||this.subscribers.set(a,[]),this.subscribers.get(a).push(r),()=>{const i=this.subscribers.get(a);if(i){const c=i.indexOf(r);c>-1&&i.splice(c,1)}}}getAllActiveAlerts(){const a=[];for(const r of this.complianceStatuses.values())a.push(...r.alerts.filter(i=>!i.resolvedAt));return a.sort((r,i)=>{const c={critical:0,high:1,medium:2,low:3};return c[r.severity]-c[i.severity]})}resolveAlert(a){for(const r of this.complianceStatuses.values()){const i=r.alerts.find(c=>c.id===a);if(i){i.resolvedAt=new Date().toISOString(),this.notifySubscribers(r.vehicleId,r);break}}}async performComplianceCheck(a,r,i,c){try{console.log(`Performing compliance check for ${r}`);const u=await ku.getUnifiedComplianceData(r,i),m=this.generateAlertsFromData(a,r,u,c),h=this.calculateComplianceStatus(a,r,u,m);this.complianceStatuses.set(a,h),this.notifySubscribers(a,h),console.log(`Compliance check completed for ${r}. Status: ${h.status}, Alerts: ${m.length}`)}catch(u){console.error(`Compliance check failed for ${r}:`,u)}}generateAlertsFromData(a,r,i,c){var m,h,x;const u=[];if(i.carbData){const g=i.carbData;if(g.complianceStatus==="non-compliant"&&u.push({id:`carb-non-compliant-${a}-${Date.now()}`,vehicleId:a,vin:r,alertType:"violation",severity:"critical",title:"CARB Emissions Non-Compliance",description:"Vehicle is not compliant with CARB emissions standards",dueDate:g.nextInspectionDue||"",daysUntilDue:this.calculateDaysUntil(g.nextInspectionDue),source:"CARB",actionRequired:"Schedule emissions inspection and repair",estimatedCost:2500,jurisdictions:["California"],documentationNeeded:["Emissions test certificate","Repair receipts"],createdAt:new Date().toISOString()}),g.nextInspectionDue){const y=this.calculateDaysUntil(g.nextInspectionDue);y<=c.alertThresholds.critical&&u.push({id:`carb-inspection-due-${a}-${Date.now()}`,vehicleId:a,vin:r,alertType:"inspection_due",severity:y<=0?"critical":"high",title:"CARB Emissions Inspection Due",description:`Emissions inspection due in ${y} days`,dueDate:g.nextInspectionDue,daysUntilDue:y,source:"CARB",actionRequired:"Schedule emissions inspection",estimatedCost:200,jurisdictions:["California"],createdAt:new Date().toISOString()})}}if(i.fmcsaData){const g=i.fmcsaData;if(g.safetyRating==="Unsatisfactory"&&u.push({id:`fmcsa-safety-rating-${a}-${Date.now()}`,vehicleId:a,vin:r,alertType:"safety_rating",severity:"critical",title:"Unsatisfactory Safety Rating",description:"FMCSA safety rating is unsatisfactory",dueDate:"",daysUntilDue:0,source:"FMCSA",actionRequired:"Improve safety practices and request re-rating",jurisdictions:["Federal"],createdAt:new Date().toISOString()}),(m=g.insuranceData)!=null&&m.expirationDate){const y=this.calculateDaysUntil(g.insuranceData.expirationDate);y<=c.alertThresholds.high&&u.push({id:`insurance-expiration-${a}-${Date.now()}`,vehicleId:a,vin:r,alertType:"expiration",severity:y<=c.alertThresholds.critical?"critical":"high",title:"Insurance Policy Expiring",description:`Commercial insurance expires in ${y} days`,dueDate:g.insuranceData.expirationDate,daysUntilDue:y,source:"FMCSA",actionRequired:"Renew commercial vehicle insurance",estimatedCost:5e3,jurisdictions:["Federal"],createdAt:new Date().toISOString()})}}if(i.registrationData){const g=i.registrationData;if(!g.isValid)u.push({id:`registration-invalid-${a}-${Date.now()}`,vehicleId:a,vin:r,alertType:"violation",severity:"critical",title:"Invalid Vehicle Registration",description:"Vehicle registration is not valid",dueDate:"",daysUntilDue:0,source:`${g.state} DMV`,actionRequired:"Renew vehicle registration immediately",estimatedCost:((h=g.fees)==null?void 0:h.totalFee)||500,jurisdictions:[g.state],createdAt:new Date().toISOString()});else if(g.expirationDate){const y=this.calculateDaysUntil(g.expirationDate);y<=c.alertThresholds.high&&u.push({id:`registration-expiration-${a}-${Date.now()}`,vehicleId:a,vin:r,alertType:"expiration",severity:y<=c.alertThresholds.critical?"critical":"medium",title:"Vehicle Registration Expiring",description:`Registration expires in ${y} days`,dueDate:g.expirationDate,daysUntilDue:y,source:`${g.state} DMV`,actionRequired:"Renew vehicle registration",estimatedCost:((x=g.fees)==null?void 0:x.totalFee)||500,jurisdictions:[g.state],createdAt:new Date().toISOString()})}}return u}calculateComplianceStatus(a,r,i,c){var y,w,D,b,N,E,A,X;const u=c.filter(L=>L.severity==="critical").length,m=c.filter(L=>L.severity==="high").length,h=c.filter(L=>L.severity==="medium").length;let x;u>0?x="critical":m>0||h>0?x="warning":x="compliant";const g=i.complianceScore||85;return{vehicleId:a,vin:r,overallScore:g,status:x,lastChecked:new Date().toISOString(),nextCheck:new Date(Date.now()+this.defaultConfig.checkInterval).toISOString(),alerts:c,categories:{emissions:{status:((y=i.carbData)==null?void 0:y.complianceStatus)||"unknown",score:i.carbData?90:50,alerts:c.filter(L=>L.source==="CARB").length},safety:{status:((w=i.fmcsaData)==null?void 0:w.safetyRating)||"unknown",score:((D=i.fmcsaData)==null?void 0:D.safetyRating)==="Satisfactory"?95:60,alerts:c.filter(L=>L.source==="FMCSA").length},registration:{status:(b=i.registrationData)!=null&&b.isValid?"valid":"invalid",score:(N=i.registrationData)!=null&&N.isValid?100:0,alerts:c.filter(L=>L.source.includes("DMV")).length},insurance:{status:(E=i.insuranceData)!=null&&E.isActive?"active":"inactive",score:(A=i.insuranceData)!=null&&A.isActive?100:0,alerts:c.filter(L=>L.alertType==="expiration"&&L.title.includes("Insurance")).length},inspections:{status:((X=i.inspectionRecords)==null?void 0:X.length)>0?"current":"unknown",score:85,alerts:c.filter(L=>L.alertType==="inspection_due").length}}}}calculateDaysUntil(a){if(!a)return 999;const r=new Date(a),i=new Date,c=r.getTime()-i.getTime();return Math.ceil(c/(1e3*60*60*24))}notifySubscribers(a,r){const i=this.subscribers.get(a);i&&i.forEach(c=>{try{c(r)}catch(u){console.error("Error notifying compliance subscriber:",u)}})}getMonitoringStats(){const a=Array.from(this.complianceStatuses.values()),r=this.getAllActiveAlerts();return{totalVehicles:a.length,activeMonitoring:this.monitoringIntervals.size,totalAlerts:r.length,criticalAlerts:r.filter(i=>i.severity==="critical").length,averageScore:a.length>0?a.reduce((i,c)=>i+c.overallScore,0)/a.length:0}}stopAllMonitoring(){for(const a of this.monitoringIntervals.keys())this.stopMonitoring(a)}}const Rn=new wv,jv=({vehicles:f})=>{const[a,r]=G.useState([]),[i,c]=G.useState({totalVehicles:0,activeMonitoring:0,totalAlerts:0,criticalAlerts:0,averageScore:0}),[u,m]=G.useState(null),[h,x]=G.useState(!1),[g,y]=G.useState("all"),[w,D]=G.useState("all");G.useEffect(()=>{const B=async()=>{console.log("Initializing compliance monitoring for",f.length,"vehicles");for(const ne of f)await Rn.startMonitoring(ne.id,ne.vin,ne.dotNumber);x(!0),b()};f.length>0&&!h&&B();const K=setInterval(b,3e4);return()=>{clearInterval(K),Rn.stopAllMonitoring()}},[f,h]);const b=()=>{const B=Rn.getAllActiveAlerts(),K=Rn.getMonitoringStats();r(B),c(K)},N=a.filter(B=>!(g!=="all"&&B.severity!==g||w!=="all"&&!B.source.includes(w))),E=B=>{switch(B){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},A=B=>{switch(B){case"critical":return"🚨";case"high":return"⚠️";case"medium":return"⚡";case"low":return"📋";default:return"📄"}},X=B=>{switch(B){case"expiration":return"📅";case"violation":return"🚫";case"renewal":return"🔄";case"inspection_due":return"🔍";case"safety_rating":return"⭐";default:return"📋"}},L=B=>{Rn.resolveAlert(B),b(),m(null)},J=()=>{const B=["VIN,Alert Type,Severity,Title,Description,Due Date,Days Until Due,Source,Action Required,Estimated Cost",...N.map(ie=>[ie.vin,ie.alertType,ie.severity,ie.title,ie.description,ie.dueDate,ie.daysUntilDue,ie.source,ie.actionRequired,ie.estimatedCost||""].join(","))].join(`
`),K=new Blob([B],{type:"text/csv"}),ne=window.URL.createObjectURL(K),he=document.createElement("a");he.href=ne,he.download=`compliance_alerts_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(he),he.click(),document.body.removeChild(he),window.URL.revokeObjectURL(ne)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"🛡️ Comprehensive Compliance Dashboard"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:J,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:"📊 Export Alerts"}),n.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"🔄 Refresh"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Total Vehicles"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.totalVehicles}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Under monitoring"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Active Alerts"}),n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.totalAlerts}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Requiring attention"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Critical Issues"}),n.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.criticalAlerts}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Immediate action needed"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Average Score"}),n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(i.averageScore),"%"]}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Compliance rating"})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Monitoring Status"}),n.jsx("div",{className:`text-2xl font-bold ${h?"text-green-600":"text-red-600"}`,children:h?"ACTIVE":"INACTIVE"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Real-time monitoring"})]})]}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Severity"}),n.jsxs("select",{value:g,onChange:B=>y(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Severities"}),n.jsx("option",{value:"critical",children:"Critical"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Source"}),n.jsxs("select",{value:w,onChange:B=>D(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Sources"}),n.jsx("option",{value:"CARB",children:"CARB"}),n.jsx("option",{value:"FMCSA",children:"FMCSA"}),n.jsx("option",{value:"DMV",children:"DMV"}),n.jsx("option",{value:"Insurance",children:"Insurance"})]})]}),n.jsx("div",{className:"ml-auto",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",N.length," of ",a.length," alerts"]})})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b",children:n.jsx("h3",{className:"font-semibold text-gray-900",children:"Active Compliance Alerts"})}),N.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"✅"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Alerts"}),n.jsx("p",{className:"text-gray-500",children:a.length===0?"All vehicles are compliant or monitoring is still loading":"No alerts match your current filters"})]}):n.jsx("div",{className:"divide-y divide-gray-200",children:N.map(B=>n.jsx("div",{className:"p-6 hover:bg-gray-50",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("span",{className:"text-2xl",children:X(B.alertType)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:B.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded border ${E(B.severity)}`,children:[A(B.severity)," ",B.severity.toUpperCase()]}),n.jsxs("span",{className:"text-sm text-gray-500",children:["VIN: ",B.vin]}),n.jsxs("span",{className:"text-sm text-gray-500",children:["Source: ",B.source]})]})]})]}),n.jsx("p",{className:"text-gray-700 mb-3",children:B.description}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-900",children:"Action Required:"}),n.jsx("p",{className:"text-gray-600",children:B.actionRequired})]}),B.dueDate&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-900",children:"Due Date:"}),n.jsxs("p",{className:`${B.daysUntilDue<=0?"text-red-600 font-medium":"text-gray-600"}`,children:[B.dueDate," (",B.daysUntilDue<=0?"OVERDUE":`${B.daysUntilDue} days`,")"]})]}),B.estimatedCost&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-900",children:"Estimated Cost:"}),n.jsxs("p",{className:"text-gray-600",children:["$",B.estimatedCost.toLocaleString()]})]})]}),B.jurisdictions&&B.jurisdictions.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Jurisdictions: "}),n.jsx("span",{className:"text-sm text-gray-600",children:B.jurisdictions.join(", ")})]})]}),n.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[n.jsx("button",{onClick:()=>m(B),className:"px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"View Details"}),n.jsx("button",{onClick:()=>L(B.id),className:"px-3 py-2 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Resolved"})]})]})},B.id))})]}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:u.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsxs("span",{className:`px-2 py-1 text-sm font-medium rounded border ${E(u.severity)}`,children:[A(u.severity)," ",u.severity.toUpperCase()]}),n.jsxs("span",{className:"text-sm text-gray-500",children:["Source: ",u.source]})]})]}),n.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-700",children:u.description})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Required Action"}),n.jsx("p",{className:"text-gray-700",children:u.actionRequired})]}),u.dueDate&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Timeline"}),n.jsxs("p",{className:"text-gray-700",children:["Due: ",u.dueDate,n.jsxs("span",{className:`ml-2 ${u.daysUntilDue<=0?"text-red-600 font-medium":"text-gray-600"}`,children:["(",u.daysUntilDue<=0?"OVERDUE":`${u.daysUntilDue} days remaining`,")"]})]})]}),u.estimatedCost&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Estimated Cost"}),n.jsxs("p",{className:"text-gray-700",children:["$",u.estimatedCost.toLocaleString()]})]}),u.jurisdictions&&u.jurisdictions.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Jurisdictions"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:u.jurisdictions.map((B,K)=>n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:B},K))})]}),n.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[n.jsx("button",{onClick:()=>L(u.id),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Mark as Resolved"}),n.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Close"})]})]})]})})]})},Ev=({setCurrentPage:f})=>{const[a,r]=G.useState(1),[i,c]=G.useState("document_processing"),[u,m]=G.useState(null),[h,x]=G.useState(!1),[g,y]=G.useState([]),[w,D]=G.useState([]),[b,N]=G.useState(0),[E,A]=G.useState(""),[X,L]=G.useState(null),[J,B]=G.useState(null),[K,ne]=G.useState(!1),he=I=>{console.log("📄 OnboardingPage: Document processing complete",I);const _=I.map(M=>{var S;return{vin:M.vin||"UNKNOWN",year:M.year||new Date().getFullYear(),make:M.make||"Unknown",model:M.model||"Unknown",fuelType:"Diesel",maxWeight:8e4,vehicleClass:"Class 8",status:"success",complianceTasks:0,dotNumber:M.dotNumber||"",licensePlate:M.licensePlate||"",truckNumber:M.truckNumber||`Vehicle ${((S=M.vin)==null?void 0:S.slice(-4))||"Unknown"}`,registrationExpiry:M.registrationExpiry,insuranceExpiry:M.insuranceExpiry,insuranceCarrier:M.insuranceCarrier,policyNumber:M.policyNumber,registrationNumber:M.registrationNumber,registrationState:M.registrationState,dataSource:{method:"file",confidence:"high",lastUpdated:new Date().toISOString(),source:"AI Document Processing"},missingFields:[],needsReview:M.needsReview||!1}}),j=I.map(M=>({vin:M.vin||`UNKNOWN_${Date.now()}`,make:M.make||"Unknown",model:M.model||"Unknown",year:M.year||new Date().getFullYear(),licensePlate:M.licensePlate||"Unknown",dotNumber:M.dotNumber,truckNumber:M.truckNumber||"",status:"active",registrationNumber:M.registrationNumber,registrationState:M.registrationState,registrationExpiry:M.registrationExpiry,registeredOwner:M.registeredOwner,insuranceCarrier:M.insuranceCarrier,policyNumber:M.policyNumber,insuranceExpiry:M.insuranceExpiry,coverageAmount:M.coverageAmount}));console.log("📄 OnboardingPage: Saving vehicles to persistent storage",j);const z=ze.addVehicles(j);console.log(`📄 OnboardingPage: Storage result - ${z.successful.length} successful, ${z.failed.length} failed`),D(_),r(3)},ie=async I=>{var j;const _=(j=I.target.files)==null?void 0:j[0];if(_){if(L(null),m(_),!_.name.endsWith(".csv")&&!_.name.endsWith(".txt")){L("Please upload a CSV or TXT file");return}if(_.size>5*1024*1024){L("File size must be less than 5MB");return}try{x(!0);const z=await Ub(_);y(z),x(!1)}catch{L("Failed to parse CSV file. Please check the format."),x(!1)}}},ee=async()=>{const I=g.filter(j=>j.isValid);if(I.length===0){L("No valid VINs found in the file");return}r(2),x(!0),N(0);const _=[];for(let j=0;j<I.length;j++){const z=I[j].vin,M=Math.round((j+1)/I.length*90);A(`Processing VIN ${j+1} of ${I.length}: ${z}`),N(M);try{const S=await fr.getVehicleData(z,{allowPartial:!0});S.data?_.push(S.data):_.push({vin:z,dataSource:{method:"incomplete",confidence:"low",lastUpdated:new Date().toISOString(),source:"API Failed - Needs Manual Entry"},missingFields:["make","model","year"],needsReview:!0})}catch(S){console.error(`Failed to process VIN ${z}:`,S),_.push({vin:z,dataSource:{method:"incomplete",confidence:"low",lastUpdated:new Date().toISOString(),source:"Processing Failed - Needs Manual Entry"},missingFields:["make","model","year"],needsReview:!0})}await new Promise(S=>setTimeout(S,300))}A("Finalizing vehicle profiles..."),N(100),await new Promise(j=>setTimeout(j,500)),D(_),x(!1),r(3)},Ce=I=>{D(I),r(3)},W=I=>{D(J?_=>_.map(j=>j.vin===I.vin?I:j):_=>[..._,I]),B(null),r(3)},ve=async I=>{const _=w.find(z=>z.vin===I),j=await fr.getVehicleData(I,{skipApi:!0});B({vin:I,template:j.fallbackOptions.template,existingData:_}),r(5)},te=()=>{const I=w.filter(j=>j.make&&j.model&&j.year).map(j=>{var z;return{vin:j.vin,make:j.make,model:j.model,year:j.year,licensePlate:`${(z=j.make)==null?void 0:z.slice(0,3).toUpperCase()}${Math.floor(Math.random()*1e3)}`,dotNumber:void 0,truckNumber:j.truckNumber||"",status:"active"}});ze.addVehicles(I);const _=w.filter(j=>j.make&&j.model&&j.year).map(j=>({vin:j.vin,year:j.year,make:j.make,model:j.model,fuelType:j.fuelType||"Diesel",maxWeight:j.maxWeight||8e4,vehicleClass:j.vehicleClass||"Class 8",status:"success",complianceTasks:3}));nt.addVehicles(_),r(4)},fe=()=>{r(1),c("vin_list"),m(null),y([]),D([]),N(0),A(""),L(null),x(!1),B(null)};return n.jsxs("div",{className:"max-w-6xl",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl p-8 mb-8 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl md:text-4xl font-bold mb-2",children:"🚛 Fleet Onboarding"}),n.jsx("p",{className:"text-blue-100 text-sm md:text-lg",children:"Add your trucks to TruckBo for automated compliance management"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl font-bold",children:w.length}),n.jsx("div",{className:"text-blue-200",children:"Vehicles Added"})]})]})}),X&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-6 shadow-sm",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-red-600 text-xl",children:"⚠️"})})}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Processing Error"}),n.jsx("p",{className:"text-red-700",children:X})]}),n.jsx("button",{onClick:()=>L(null),className:"flex-shrink-0 text-red-400 hover:text-red-600 transition-colors duration-200",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:n.jsx("div",{className:"flex items-center justify-between",children:[{num:1,label:"Input Method",icon:"📋"},{num:2,label:"Data Processing",icon:"⚙️"},{num:3,label:"Vehicle Review",icon:"🔍"},{num:4,label:"Fleet Ready",icon:"✅"}].map(({num:I,label:_,icon:j},z)=>n.jsxs("div",{className:"flex items-center flex-1",children:[n.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full border-2 ${a>=I?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-400"}`,children:n.jsx("span",{className:"text-lg",children:a>=I?"✓":j})}),n.jsxs("div",{className:`ml-3 ${a>=I?"text-blue-600":"text-gray-500"}`,children:[n.jsxs("div",{className:"font-semibold text-sm",children:["Step ",I]}),n.jsx("div",{className:"text-xs",children:_})]}),z<3&&n.jsx("div",{className:`flex-1 h-0.5 mx-4 ${a>I?"bg-blue-600":"bg-gray-200"}`})]},I))})}),a===1&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h3",{className:"text-xl md:text-3xl font-bold text-gray-900 mb-3",children:"Add Your Fleet"}),n.jsx("p",{className:"text-gray-600 text-sm md:text-lg",children:"Choose the best method to get your trucks into TruckBo"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:`group relative border-2 rounded-xl p-8 cursor-pointer transition-all duration-300 ${i==="document_processing"?"border-purple-500 bg-gradient-to-br from-purple-50 to-indigo-50 shadow-lg scale-105":"border-gray-200 hover:border-purple-300 hover:shadow-md hover:scale-102"}`,onClick:()=>c("document_processing"),children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center text-white text-3xl font-bold mb-4 mx-auto group-hover:scale-110 transition-transform duration-300",children:"🤖"}),n.jsxs("div",{className:"flex items-center justify-center mb-2",children:[n.jsx("h4",{className:"font-bold text-xl text-gray-900",children:"AI Document Processing"}),n.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-medium",children:"⭐ RECOMMENDED"})]}),n.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Upload registration and insurance documents. Our AI extracts all vehicle information and tracks compliance expiry dates automatically."}),n.jsx("div",{className:"mt-6 text-sm text-purple-600 font-medium",children:"✓ Complete automation   ✓ Compliance tracking   ✓ Document analysis"})]}),i==="document_processing"&&n.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),n.jsxs("div",{className:`group relative border-2 rounded-xl p-8 cursor-pointer transition-all duration-300 ${i==="vin_list"?"border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg scale-105":"border-gray-200 hover:border-blue-300 hover:shadow-md hover:scale-102"}`,onClick:()=>c("vin_list"),children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold mb-4 mx-auto group-hover:scale-110 transition-transform duration-300",children:"VIN"}),n.jsx("h4",{className:"font-bold text-xl mb-3 text-gray-900",children:"VIN List Processing"}),n.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Upload VINs and we'll automatically fetch truck specifications and compliance requirements from government databases."}),n.jsx("div",{className:"mt-6 text-sm text-blue-600 font-medium",children:"✓ Automatic data lookup   ✓ API-powered   ✓ Fast processing"})]}),i==="vin_list"&&n.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),n.jsxs("div",{className:`group relative border-2 rounded-xl p-8 cursor-pointer transition-all duration-300 ${i==="bulk_upload"?"border-green-500 bg-gradient-to-br from-green-50 to-emerald-50 shadow-lg scale-105":"border-gray-200 hover:border-green-300 hover:shadow-md hover:scale-102"}`,onClick:()=>c("bulk_upload"),children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold mb-4 mx-auto group-hover:scale-110 transition-transform duration-300",children:"CSV"}),n.jsx("h4",{className:"font-bold text-xl mb-3 text-gray-900",children:"Complete Fleet Upload"}),n.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Upload a pre-filled spreadsheet with all your truck details including make, model, year, and compliance information."}),n.jsx("div",{className:"mt-6 text-sm text-green-600 font-medium",children:"✓ Bulk processing   ✓ Pre-filled data   ✓ Quick setup"})]}),i==="bulk_upload"&&n.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 bg-green-600 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),n.jsxs("div",{className:`group relative border-2 rounded-xl p-8 cursor-pointer transition-all duration-300 ${i==="individual"?"border-purple-500 bg-gradient-to-br from-purple-50 to-violet-50 shadow-lg scale-105":"border-gray-200 hover:border-purple-300 hover:shadow-md hover:scale-102"}`,onClick:()=>c("individual"),children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl flex items-center justify-center text-white text-2xl mb-4 mx-auto group-hover:scale-110 transition-transform duration-300",children:"🚛"}),n.jsx("h4",{className:"font-bold text-xl mb-3 text-gray-900",children:"One-by-One Entry"}),n.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Add trucks individually with guided forms. Perfect for smaller fleets or when you want full control over each entry."}),n.jsx("div",{className:"mt-6 text-sm text-purple-600 font-medium",children:"✓ Step-by-step   ✓ Guided process   ✓ Full control"})]}),i==="individual"&&n.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]}),i==="document_processing"&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-8 border border-purple-200",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-xl mr-4",children:"🤖"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"AI Document Processing"}),n.jsx("p",{className:"text-purple-700",children:"Upload registration and insurance documents for complete automated setup"})]})]}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{onClick:()=>ne(!0),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl font-black text-lg shadow-xl shadow-purple-900/20 hover:shadow-2xl hover:shadow-purple-900/30 transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-purple-400",children:["🤖 Start AI Document Processing",n.jsx("div",{className:"text-xs font-normal text-purple-100 mt-1",children:"⭐ Upload folders or individual files"})]})}),n.jsx("div",{className:"mt-6 bg-white/50 backdrop-blur-sm rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center text-sm text-purple-700",children:[n.jsx("span",{className:"text-purple-500 mr-2",children:"💡"}),n.jsx("span",{children:"Our AI will extract VINs, license plates, expiry dates, and insurance details automatically from your documents"})]})})]}),i==="vin_list"&&n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-8 border border-blue-200",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl mr-4",children:"📋"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"VIN List Upload"}),n.jsx("p",{className:"text-blue-700",children:"We'll automatically fetch truck data from government databases"})]})]}),n.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-xl p-10 text-center mb-6 bg-white/50 backdrop-blur-sm hover:bg-white/70 transition-colors duration-300",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4",children:"📁"}),n.jsx("h5",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Drop your VIN file here"}),n.jsx("p",{className:"text-gray-600",children:"or click to browse your files"})]}),n.jsx("input",{type:"file",accept:".csv,.txt",onChange:ie,className:"w-full h-full opacity-0 absolute inset-0 cursor-pointer",disabled:h}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-500",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"CSV & TXT files"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Max 5MB"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"VINs in first column"]})]})})]}),n.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-4 border border-blue-200",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-blue-600 mr-3",children:"📄"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Need a template?"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Download our VIN template to get started"})]})]}),n.jsxs("button",{onClick:Lb,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-bold text-sm transition-all duration-300 flex items-center shadow-lg shadow-blue-900/20 hover:shadow-xl hover:shadow-blue-900/30 hover:scale-105 active:scale-95",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Download Template"]})]})]}),u&&g.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 mt-6",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:n.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"File Analysis Complete"}),n.jsx("p",{className:"text-gray-600",children:"Your VIN file has been processed and validated"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total VINs"}),n.jsx("div",{className:"text-3xl font-bold text-blue-900",children:g.length})]}),n.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center text-white text-xl",children:"📊"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"Valid VINs"}),n.jsx("div",{className:"text-3xl font-bold text-green-900",children:g.filter(I=>I.isValid).length})]}),n.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center text-white text-xl",children:"✓"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 border border-red-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-red-700 mb-1",children:"Invalid VINs"}),n.jsx("div",{className:"text-3xl font-bold text-red-900",children:g.filter(I=>!I.isValid).length})]}),n.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-lg flex items-center justify-center text-white text-xl",children:"✕"})]})})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsxs("h5",{className:"font-bold text-gray-900 mb-4 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"🔍"}),"VIN Preview (showing first 5)"]}),n.jsxs("div",{className:"space-y-3",children:[g.slice(0,5).map((I,_)=>n.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("div",{className:"font-mono text-lg font-semibold text-gray-900 mr-4",children:I.vin})}),n.jsx("div",{className:`flex items-center px-3 py-1 rounded-full text-sm font-medium ${I.isValid?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:I.isValid?n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Valid VIN"]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Invalid VIN"]})})]},_)),g.length>5&&n.jsxs("div",{className:"text-center text-gray-500 text-sm py-2 bg-gray-100 rounded-lg",children:["... and ",g.length-5," more VINs"]})]})]})]}),g.filter(I=>I.isValid).length>0&&n.jsxs("div",{className:"mt-8 text-center",children:[n.jsxs("button",{onClick:ee,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-12 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 flex items-center mx-auto",children:[n.jsx("svg",{className:"w-6 h-6 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Process ",g.filter(I=>I.isValid).length," Valid VINs"]}),n.jsx("p",{className:"text-gray-500 text-sm mt-3",children:"We'll automatically fetch truck data and generate compliance profiles"})]}),i==="bulk_upload"&&n.jsx("div",{children:n.jsx(vv,{onDataProcessed:Ce,onError:L})}),i==="individual"&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Add Individual Vehicle"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Enter a VIN to start adding a vehicle with API assistance."}),n.jsxs("div",{className:"max-w-md",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Identification Number (VIN)"}),n.jsx("div",{className:"flex gap-2",children:n.jsx("input",{type:"text",placeholder:"Enter 17-character VIN",maxLength:17,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyUp:async I=>{const _=I.target.value.toUpperCase();if(_.length===17&&Gh(_)){const j=await fr.getVehicleData(_);B({vin:_,template:j.fallbackOptions.template,existingData:j.data||void 0}),r(5)}}})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"VIN will be validated and we'll try to fetch vehicle data automatically"})]})]})]}),a===2&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Processing VIN Data"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Decoding vehicle information and generating compliance data..."}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-yellow-800 font-medium",children:E}),n.jsxs("span",{className:"text-yellow-700 text-sm",children:[b,"%"]})]}),n.jsx("div",{className:"w-full bg-yellow-100 rounded-full h-3",children:n.jsx("div",{className:"bg-yellow-600 h-3 rounded-full transition-all duration-500",style:{width:`${b}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:`flex items-center ${b>=60?"text-green-700":"text-yellow-700"}`,children:[n.jsx("span",{className:"mr-2",children:b>=60?"✅":"🔄"}),"VIN Decoding"]}),n.jsxs("div",{className:`flex items-center ${b>=80?"text-green-700":b>=60?"text-yellow-700":"text-gray-500"}`,children:[n.jsx("span",{className:"mr-2",children:b>=80?"✅":b>=60?"🔄":"⏳"}),"Compliance Generation"]}),n.jsxs("div",{className:`flex items-center ${b>=100?"text-green-700":b>=80?"text-yellow-700":"text-gray-500"}`,children:[n.jsx("span",{className:"mr-2",children:b>=100?"✅":b>=80?"🔄":"⏳"}),"Profile Creation"]})]})]}),!h&&b===100&&n.jsx("button",{onClick:()=>r(3),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium",children:"View Results →"})]}),a===3&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Review Vehicle Data"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Review your vehicles and complete any missing information."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-blue-800",children:"Total Vehicles"}),n.jsx("div",{className:"text-2xl text-blue-600",children:w.length})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-green-800",children:"Complete"}),n.jsx("div",{className:"text-2xl text-green-600",children:w.filter(I=>I.make&&I.model&&I.year).length})]}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-yellow-800",children:"Need Review"}),n.jsx("div",{className:"text-2xl text-yellow-600",children:w.filter(I=>I.needsReview).length})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-red-800",children:"Incomplete"}),n.jsx("div",{className:"text-2xl text-red-600",children:w.filter(I=>!I.make||!I.model||!I.year).length})]})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden mb-6",children:[n.jsx("div",{className:"px-6 py-4 bg-gray-50",children:n.jsx("h4",{className:"font-semibold",children:"Vehicle Details"})}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:w.map((I,_)=>n.jsx("div",{className:`p-4 ${I.needsReview?"border-l-4 border-l-yellow-500":!I.make||!I.model||!I.year?"border-l-4 border-l-red-500":"border-l-4 border-l-green-500"}`,children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h5",{className:"font-medium text-lg",children:I.year&&I.make&&I.model?`${I.year} ${I.make} ${I.model}`:"Incomplete Vehicle Data"}),n.jsxs("p",{className:"text-sm text-gray-600 font-mono mb-2",children:["VIN: ",I.vin]}),(I.fuelType||I.vehicleClass||I.maxWeight)&&n.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 text-sm",children:[I.vehicleClass&&n.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:I.vehicleClass}),I.fuelType&&n.jsx("span",{className:"bg-blue-100 px-2 py-1 rounded",children:I.fuelType}),I.maxWeight&&n.jsxs("span",{className:"bg-yellow-100 px-2 py-1 rounded",children:[I.maxWeight.toLocaleString()," lbs"]})]}),n.jsx(Sv,{data:I})]}),n.jsxs("div",{className:"text-right ml-4",children:[(!I.make||!I.model||!I.year||I.needsReview)&&n.jsx("button",{onClick:()=>ve(I.vin),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl text-sm font-bold mb-2 transition-all duration-300 shadow-lg shadow-blue-900/20 hover:shadow-xl hover:shadow-blue-900/30 hover:scale-105 active:scale-95",children:!I.make||!I.model||!I.year?"✨ Complete Data":"📝 Review & Edit"}),n.jsx("div",{className:"text-xs text-gray-500",children:I.missingFields.length>0&&n.jsxs("div",{className:"text-amber-600 font-medium",children:["Missing: ",I.missingFields.join(", ")]})})]})]})},_))})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("button",{onClick:te,className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-medium text-lg",disabled:w.filter(I=>I.make&&I.model&&I.year).length===0,children:["Complete Onboarding & Add ",w.filter(I=>I.make&&I.model&&I.year).length," Vehicles →"]}),w.filter(I=>!I.make||!I.model||!I.year).length>0&&n.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:["⚠️ ",w.filter(I=>!I.make||!I.model||!I.year).length," vehicles need completion"]})]})]}),a===5&&J&&n.jsx("div",{children:n.jsx(Nv,{template:J.template,existingData:J.existingData,onDataSubmitted:W,onCancel:()=>{B(null),r(3)}})}),a===4&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),n.jsx("h3",{className:"text-3xl font-bold text-green-600 mb-2",children:"Onboarding Complete!"}),n.jsx("p",{className:"text-gray-600 text-lg",children:"Your fleet has been successfully processed and integrated into the system."})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:[n.jsx("h4",{className:"font-semibold text-green-800 mb-4",children:"✅ Integration Summary:"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-green-700",children:[n.jsxs("div",{children:["✅ ",w.filter(I=>I.make&&I.model&&I.year).length," vehicles added to Fleet Management"]}),n.jsxs("div",{children:["✅ ",w.filter(I=>I.make&&I.model&&I.year).length*3," compliance tasks generated"]}),n.jsx("div",{children:"✅ Vehicle profiles created with real API data where available"}),n.jsx("div",{children:"✅ Dashboard updated with comprehensive fleet data"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[n.jsx("button",{onClick:()=>f("fleet"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-4 rounded-2xl font-black text-lg shadow-xl shadow-blue-900/20 hover:shadow-2xl hover:shadow-blue-900/30 transition-all duration-300 hover:scale-105 active:scale-95",children:"🚛 View Fleet Management"}),n.jsx("button",{onClick:()=>f("compliance"),className:"bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700 text-white px-8 py-4 rounded-2xl font-black text-lg shadow-xl shadow-purple-900/20 hover:shadow-2xl hover:shadow-purple-900/30 transition-all duration-300 hover:scale-105 active:scale-95",children:"📋 View Compliance Tasks"}),n.jsx("button",{onClick:fe,className:"bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 text-white px-8 py-4 rounded-2xl font-black text-lg shadow-xl shadow-emerald-900/20 hover:shadow-2xl hover:shadow-emerald-900/30 transition-all duration-300 hover:scale-105 active:scale-95",children:"📁 Start New Onboarding"})]})]}),n.jsx(Rx,{isOpen:K,onClose:()=>ne(!1),onDocumentsProcessed:he})]})},Dv=()=>{const[f,a]=G.useState([]),[r,i]=G.useState(""),[c,u]=G.useState("all"),[m,h]=G.useState("table"),[x,g]=G.useState(!1),[y,w]=G.useState(!1),[D,b]=G.useState(!1),[N,E]=G.useState(!1),[A,X]=G.useState(!1),L=()=>{const j=ze.getFleet(),M=nt.getAllVehicles().map(P=>({id:P.id,vin:P.vin,make:P.make,model:P.model,year:P.year,licensePlate:P.licensePlate,dotNumber:P.dotNumber,truckNumber:`Truck #${P.vin.slice(-3)}`,status:P.status,dateAdded:new Date().toISOString(),lastUpdated:new Date().toISOString()})),T=[...j,...M].filter((P,F,Z)=>F===Z.findIndex(se=>se.vin===P.vin));a(T)};G.useEffect(()=>{L();const j=nt.subscribe(()=>{L()}),z=ze.subscribe(()=>{console.log("📄 FleetPage: Persistent storage updated, reloading vehicles..."),L()});return()=>{j(),z()}},[]);const J=j=>{L()},B=j=>{L()},K=j=>{console.log("📄 Processing extracted document data:",j);const z=j.map(S=>({vin:S.vin||`UNKNOWN_${Date.now()}`,make:S.make||"Unknown",model:S.model||"Unknown",year:S.year||new Date().getFullYear(),licensePlate:S.licensePlate||"Unknown",dotNumber:S.dotNumber,truckNumber:S.truckNumber||"",status:"active"}));console.log("📄 Converting to vehicle records:",z);const M=ze.addVehicles(z);console.log(`📄 Storage result: ${M.successful.length} successful, ${M.failed.length} failed`),M.successful.length>0?(console.log("📄 Successfully added vehicles, reloading fleet view..."),L()):console.error("📄 No vehicles were successfully added:",M.failed)},ne=j=>{console.log(`📄 Multi-batch reconciliation complete: ${j} vehicles added`),L()},he=async j=>{var z,M,S,T,P,F,Z,se,ae,Re,xe,oe,ge,_e,Ze;try{console.log(`🔄 Fetching real compliance data for VIN: ${j.vin}, DOT: ${j.dotNumber}`);const be=await ku.getUnifiedComplianceData(j.vin,j.dotNumber);console.log("✅ Real API data received:",be);const et={dotInspection:{status:ie(be.fmcsaData),daysUntilExpiry:W(((z=be.fmcsaData)==null?void 0:z.safetyRatingDate)||""),lastInspectionDate:((M=be.fmcsaData)==null?void 0:M.safetyRatingDate)||"",inspectionType:"DOT Safety Rating",safetyRating:((S=be.fmcsaData)==null?void 0:S.safetyRating)||"Unknown",violations:((T=be.inspectionRecords)==null?void 0:T.length)||0},registration:{status:ee(be.registrationData),daysUntilExpiry:W(((P=be.registrationData)==null?void 0:P.expirationDate)||""),registrationState:((F=be.registrationData)==null?void 0:F.state)||"Unknown",registrationNumber:((Z=be.registrationData)==null?void 0:Z.registrationNumber)||j.licensePlate,isValid:((se=be.registrationData)==null?void 0:se.isValid)||!1},insurance:{status:Ce(be.insuranceData),daysUntilExpiry:W(((ae=be.insuranceData)==null?void 0:ae.expirationDate)||""),carrier:((Re=be.insuranceData)==null?void 0:Re.carrier)||"Unknown",policyNumber:((xe=be.insuranceData)==null?void 0:xe.policyNumber)||"",isActive:((oe=be.insuranceData)==null?void 0:oe.isActive)||!1,coverageAmount:((_e=(ge=be.insuranceData)==null?void 0:ge.coverageTypes)==null?void 0:_e.liability)||0},ifta:{status:"compliant",daysUntilExpiry:90,quarterDue:ve(),jurisdiction:((Ze=be.registrationData)==null?void 0:Ze.state)||"CA"},apiMetadata:{lastUpdated:new Date().toISOString(),dataSource:"real_api",complianceScore:be.complianceScore||0,vin:be.vin}};return ze.updateVehicle(j.id,{complianceData:et,lastUpdated:new Date().toISOString()}),L(),et}catch(be){return console.error("❌ Failed to fetch real compliance data:",be),{dotInspection:{status:"warning",daysUntilExpiry:null,lastInspectionDate:"",inspectionType:"No Data Available",safetyRating:"No Data",violations:null,error:"API unavailable"},registration:{status:"warning",daysUntilExpiry:null,registrationState:"No Data",registrationNumber:"No Data",isValid:null,error:"API unavailable"},insurance:{status:"warning",daysUntilExpiry:null,carrier:"No Data Available",policyNumber:"No Data",isActive:null,coverageAmount:null,error:"API unavailable"},ifta:{status:"warning",daysUntilExpiry:null,quarterDue:"No Data",jurisdiction:"No Data",error:"API unavailable"},apiMetadata:{lastUpdated:new Date().toISOString(),dataSource:"api_error",error:be instanceof Error?be.message:String(be)}}}},ie=j=>j?j.safetyRating==="Satisfactory"?"compliant":j.safetyRating==="Conditional"?"warning":j.safetyRating==="Unsatisfactory"?"expired":"warning":"warning",ee=j=>{if(!j)return"warning";if(j.isValid){const z=W(j.expirationDate||"");return z<0?"expired":z<30?"warning":"compliant"}return"expired"},Ce=j=>{if(!j)return"warning";if(j.isActive){const z=W(j.expirationDate||"");return z<0?"expired":z<30?"warning":"compliant"}return"expired"},W=j=>{if(!j)return 365;const z=new Date(j),M=new Date,S=z.getTime()-M.getTime();return Math.ceil(S/(1e3*60*60*24))},ve=()=>{const j=new Date,z=Math.floor((j.getMonth()+3)/3),M=z===4?1:z+1,S=z===4?j.getFullYear()+1:j.getFullYear();return`Q${M} ${S}`},te=j=>{var M,S,T;if(console.log(`🔍 Getting compliance data for vehicle ${j.truckNumber||j.vin}:`,{id:j.id,registrationExpiry:j.registrationExpiry,insuranceExpiry:j.insuranceExpiry,registrationNumber:j.registrationNumber,insuranceCarrier:j.insuranceCarrier,policyNumber:j.policyNumber,hasComplianceData:!!j.complianceData}),j.complianceData)return console.log(`📄 Using stored compliance data for ${j.truckNumber}`),{...j.complianceData,isRealData:((M=j.complianceData.apiMetadata)==null?void 0:M.dataSource)==="real_api",dataSource:((S=j.complianceData.apiMetadata)==null?void 0:S.dataSource)||"unknown",lastUpdated:(T=j.complianceData.apiMetadata)==null?void 0:T.lastUpdated};const z=j.registrationExpiry||j.insuranceCarrier||j.policyNumber;if(console.log(`📋 Document data check for ${j.truckNumber}: hasDocumentData=${z}`),z){console.log(`✅ Using extracted document data for ${j.truckNumber}`),console.log(`   Registration: expiry=${j.registrationExpiry}, number=${j.registrationNumber}`),console.log(`   Insurance: carrier=${j.insuranceCarrier}, expiry=${j.insuranceExpiry}`);const P=ae=>{if(!ae)return null;try{const Re=new Date(ae.replace(/(\d{1,2})\/(\d{1,2})\/(\d{4})/,"$3-$1-$2")),xe=new Date,oe=Re.getTime()-xe.getTime();return Math.ceil(oe/(1e3*60*60*24))}catch{return null}},F=ae=>ae===null?"warning":ae<0?"critical":ae<30?"warning":"compliant",Z=P(j.registrationExpiry),se=P(j.insuranceExpiry);return{dotInspection:{status:"warning",daysUntilExpiry:null,lastInspectionDate:"",inspectionType:"Not Synced",safetyRating:"—",violations:null},registration:{status:F(Z),daysUntilExpiry:Z,registrationState:j.registrationState||"—",registrationNumber:j.registrationNumber||"—",isValid:Z!==null&&Z>0},insurance:{status:F(se),daysUntilExpiry:se,carrier:j.insuranceCarrier||"—",policyNumber:j.policyNumber||"—",isActive:se!==null&&se>0,coverageAmount:j.coverageAmount||null},ifta:{status:"warning",daysUntilExpiry:null,quarterDue:"—",jurisdiction:j.registrationState||"—"},isRealData:!1,dataSource:"document_processing",lastUpdated:j.lastUpdated}}return console.log(`⚠️ No document or compliance data found for ${j.truckNumber}, using blank placeholders`),{dotInspection:{status:"warning",daysUntilExpiry:null,lastInspectionDate:"",inspectionType:"Not Synced",safetyRating:"—",violations:null},registration:{status:"warning",daysUntilExpiry:null,registrationState:"—",registrationNumber:"—",isValid:null},insurance:{status:"warning",daysUntilExpiry:null,carrier:"—",policyNumber:"—",isActive:null,coverageAmount:null},ifta:{status:"warning",daysUntilExpiry:null,quarterDue:"—",jurisdiction:"—"},isRealData:!1,dataSource:"not_synced",lastUpdated:null}},fe=f.filter(j=>{var S,T,P;const z=r===""||j.vin.toLowerCase().includes(r.toLowerCase())||j.make.toLowerCase().includes(r.toLowerCase())||j.model.toLowerCase().includes(r.toLowerCase())||j.licensePlate.toLowerCase().includes(r.toLowerCase())||((S=j.truckNumber)==null?void 0:S.toLowerCase().includes(r.toLowerCase()))||r.match(/^\d+$/)&&((T=j.truckNumber)==null?void 0:T.includes(`#${r.padStart(3,"0")}`))||r.startsWith("#")&&((P=j.truckNumber)==null?void 0:P.toLowerCase().includes(r.toLowerCase())),M=c==="all"||j.status===c;return z&&M}),I={total:f.length,active:f.filter(j=>j.status==="active").length,inactive:f.filter(j=>j.status==="inactive").length,complianceWarnings:Math.floor(f.length*.1),complianceExpired:Math.floor(f.length*.05)},_=j=>{const z=te(j),M=[z.registration,z.insurance,z.dotInspection,z.ifta],S=M.filter(se=>se.status==="compliant").length,T=M.filter(se=>se.status==="warning").length,P=M.filter(se=>se.status==="expired").length,F=(S*100+T*70+P*0)/M.length,Z=F>=90?"compliant":F>=50?"warning":"expired";return{vehicle:{id:j.id,vin:j.vin,make:j.make,model:j.model,year:j.year,licensePlate:j.licensePlate,truckNumber:j.truckNumber,status:j.status,dotNumber:j.dotNumber,dateAdded:j.dateAdded},compliance:{registration:z.registration,insurance:z.insurance,dotInspection:z.dotInspection,ifta:z.ifta,overall:{score:Math.round(F),status:Z}}}};return n.jsxs("div",{className:"max-w-7xl",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-8 mb-8 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl md:text-4xl font-bold mb-2 flex items-center",children:[n.jsx("span",{className:"mr-3",children:"🚛"}),"Fleet Management"]}),n.jsx("p",{className:"text-slate-300 text-lg",children:"Monitor and manage your truck fleet operations"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl font-bold",children:I.total}),n.jsx("div",{className:"text-slate-300",children:"Total Trucks"})]})]})}),n.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-gray-600",children:"Total:"}),n.jsx("span",{className:"font-semibold",children:I.total})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-gray-600",children:"Active:"}),n.jsx("span",{className:"font-semibold",children:I.active})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),n.jsx("span",{className:"text-gray-600",children:"Parked:"}),n.jsx("span",{className:"font-semibold",children:I.inactive})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),n.jsx("span",{className:"text-gray-600",children:"Issues:"}),n.jsx("span",{className:"font-semibold",children:I.complianceWarnings+I.complianceExpired})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search vehicles...",value:r,onChange:j=>i(j.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})}),n.jsxs("select",{value:c,onChange:j=>u(j.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]}),n.jsxs("div",{className:"flex bg-gray-100 rounded overflow-hidden",children:[n.jsx("button",{onClick:()=>h("cards"),className:`px-3 py-1.5 text-xs font-medium transition-colors ${m==="cards"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800 hover:bg-gray-200"}`,children:"Cards"}),n.jsx("button",{onClick:()=>h("table"),className:`px-3 py-1.5 text-xs font-medium transition-colors ${m==="table"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800 hover:bg-gray-200"}`,children:"Table"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("button",{onClick:()=>g(!0),className:"px-3 py-1.5 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",children:"+ Add Vehicle"}),n.jsx("button",{onClick:()=>w(!0),className:"px-3 py-1.5 text-sm bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Bulk Upload"}),n.jsx("button",{onClick:()=>b(!0),className:"px-3 py-1.5 text-sm bg-green-500 hover:bg-green-600 text-white rounded transition-colors",children:"Upload Documents"}),n.jsx("button",{onClick:()=>E(!0),className:"px-3 py-1.5 text-sm bg-purple-500 hover:bg-purple-600 text-white rounded transition-colors",children:"Multi-Batch"}),n.jsx("button",{onClick:()=>X(!0),className:"px-3 py-1.5 text-sm bg-yellow-500 hover:bg-yellow-600 text-white rounded transition-colors",children:"Test Runner"})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("button",{onClick:()=>bv.downloadComplianceSummary(f),className:"px-3 py-1.5 text-sm bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",title:"Download fleet compliance report",children:"Download Report"}),n.jsx("button",{onClick:async()=>{console.log("🔄 Starting bulk compliance sync...");for(const j of f)await he(j),await new Promise(z=>setTimeout(z,500));console.log("✅ Bulk compliance sync completed!")},className:"px-3 py-1.5 text-sm bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",title:"Sync compliance data",children:"Sync All"}),n.jsx("button",{onClick:()=>{window.confirm("Clear all fleet data? This cannot be undone.")&&(ze.clearFleet(),L())},className:"px-3 py-1.5 text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors",title:"Clear all fleet data",children:"Clear Fleet"})]}),m==="cards"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3",children:fe.map(j=>{const z=_(j);return n.jsx(sv,{vehicle:z.vehicle,compliance:z.compliance,onViewDetails:()=>{console.log("View details for vehicle:",j.id)},onScheduleService:()=>{console.log("Schedule service for vehicle:",j.id)},onEditVehicle:()=>{console.log("Edit vehicle:",j.id)}},j.id)})}):n.jsx("div",{className:"bg-white border border-gray-200 rounded",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"Truck"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"Vehicle"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"VIN"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"License"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"DOT"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"Registration"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"Insurance"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"IFTA"}),n.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600 uppercase",children:"Actions"})]})}),n.jsx("tbody",{children:fe.map(j=>{var M;const z=te(j);return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-3 text-center text-sm",children:j.truckNumber?j.truckNumber.replace("Truck #","#"):`#${((M=j.vin)==null?void 0:M.slice(-3))||"???"}`}),n.jsxs("td",{className:"px-3 py-3 text-center text-sm",children:[j.year," ",j.make," ",j.model]}),n.jsx("td",{className:"px-3 py-3 text-center text-sm font-mono",children:j.vin.slice(-8)}),n.jsx("td",{className:"px-3 py-3 text-center text-sm",children:j.licensePlate}),n.jsx("td",{className:"px-3 py-3 text-center text-sm",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs ${j.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})}),n.jsx("td",{className:"px-3 py-3 text-center text-sm",children:z.dotInspection.daysUntilExpiry!==null?`${z.dotInspection.daysUntilExpiry}d`:"—"}),n.jsx("td",{className:"px-3 py-3 text-center text-sm",children:z.registration.daysUntilExpiry!==null?`${z.registration.daysUntilExpiry}d`:"—"}),n.jsx("td",{className:"px-3 py-3 text-center text-sm",children:z.insurance.daysUntilExpiry!==null?`${z.insurance.daysUntilExpiry}d`:"—"}),n.jsx("td",{className:"px-3 py-3 text-center text-sm",children:z.ifta.daysUntilExpiry!==null?`${z.ifta.daysUntilExpiry}d`:"—"}),n.jsx("td",{className:"px-3 py-3 text-center text-sm",children:n.jsxs("div",{className:"flex justify-center space-x-1",children:[n.jsx("button",{className:"px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded",children:"View"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-gray-500 hover:bg-gray-600 text-white rounded",children:"Edit"})]})})]},j.id)})})]})}),fe.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"🚛"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No vehicles found"}),n.jsx("p",{className:"text-gray-500",children:r||c!=="all"?"Try adjusting your search or filters":"Get started by adding vehicles individually or use bulk upload for multiple vehicles"})]}),n.jsx(kb,{isOpen:x,onClose:()=>g(!1),onVehicleAdded:J}),n.jsx(Vb,{isOpen:y,onClose:()=>w(!1),onVehiclesAdded:B}),n.jsx(Rx,{isOpen:D,onClose:()=>b(!1),onDocumentsProcessed:K}),n.jsx(Wy,{isOpen:N,onClose:()=>E(!1),onDocumentsReconciled:ne}),n.jsx(av,{isOpen:A,onClose:()=>X(!1)})]})},Rv=()=>{const[f,a]=G.useState([]),[r,i]=G.useState(null),[c,u]=G.useState("all"),[m,h]=G.useState("all"),[x,g]=G.useState("");G.useEffect(()=>(a(nt.getAllComplianceTasks()),nt.subscribe(()=>{a(nt.getAllComplianceTasks())})),[]);const y=f.filter(A=>{const X=x===""||A.title.toLowerCase().includes(x.toLowerCase())||A.vehicleVin.toLowerCase().includes(x.toLowerCase())||A.vehicleName.toLowerCase().includes(x.toLowerCase()),L=c==="all"||A.status===c,J=m==="all"||A.priority===m;return X&&L&&J}),w=nt.getComplianceStats(),D=A=>{switch(A){case"critical":return"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-300 shadow-sm";case"high":return"bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 border border-orange-300 shadow-sm";case"medium":return"bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-800 border border-yellow-300 shadow-sm";case"low":return"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-700 border border-slate-300 shadow-sm";default:return"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-700 border border-slate-300 shadow-sm"}},b=A=>{switch(A){case"pending":return"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border border-blue-300 shadow-sm";case"in_progress":return"bg-gradient-to-r from-purple-100 to-violet-100 text-purple-800 border border-purple-300 shadow-sm";case"completed":return"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-800 border border-emerald-300 shadow-sm";case"overdue":return"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-300 shadow-sm";default:return"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-700 border border-slate-300 shadow-sm"}},N=A=>A<0?"text-red-600":A<=7?"text-orange-600":A<=30?"text-yellow-600":"text-gray-600",E=(A,X)=>{nt.updateTaskStatus(A,X)};return n.jsxs("div",{className:"max-w-7xl",children:[n.jsx("h2",{className:"text-3xl font-bold mb-6",children:"📋 Compliance Dashboard"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-blue-800",children:"Total Tasks"}),n.jsx("div",{className:"text-3xl text-blue-600",children:w.total})]}),n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-gray-800",children:"Pending"}),n.jsx("div",{className:"text-3xl text-gray-600",children:w.pending})]}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-purple-800",children:"In Progress"}),n.jsx("div",{className:"text-3xl text-purple-600",children:w.inProgress})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-green-800",children:"Completed"}),n.jsx("div",{className:"text-3xl text-green-600",children:w.completed})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-red-800",children:"Overdue"}),n.jsx("div",{className:"text-3xl text-red-600",children:w.overdue})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-red-800",children:"Critical"}),n.jsx("div",{className:"text-3xl text-red-600",children:w.critical})]}),n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-semibold text-orange-800",children:"High Priority"}),n.jsx("div",{className:"text-3xl text-orange-600",children:w.high})]})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search tasks by title, vehicle, or VIN...",value:x,onChange:A=>g(A.target.value),className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\r
focus:border-blue-500`})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:c,onChange:A=>u(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"in_progress",children:"In Progress"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"overdue",children:"Overdue"})]}),n.jsxs("select",{value:m,onChange:A=>h(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"All Priority"}),n.jsx("option",{value:"critical",children:"Critical"}),n.jsx("option",{value:"high",children:"High"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"low",children:"Low"})]}),n.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-blue-900/20 hover:shadow-xl hover:shadow-blue-900/30 transition-all duration-300 hover:scale-105 active:scale-95",children:"➕ Add Task"})]})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:y.map(A=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${D(A.priority)}`,children:A.priority.toUpperCase()}),n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${b(A.status)}`,children:A.status.replace("_"," ").toUpperCase()})]}),n.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:A.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description}),n.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[n.jsxs("div",{children:["🚛 ",A.vehicleName]}),n.jsxs("div",{className:"font-mono",children:["VIN: ",A.vehicleVin.slice(-8)]}),n.jsxs("div",{children:["📋 ",A.category]}),n.jsxs("div",{children:["👤 ",A.assignedTo]}),A.estimatedCost&&n.jsxs("div",{children:["💰 $",A.estimatedCost.toLocaleString()]})]})]})}),n.jsxs("div",{className:"pt-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Due Date"}),n.jsx("span",{className:`text-sm font-medium ${N(A.daysUntilDue)}`,children:A.daysUntilDue<0?`${Math.abs(A.daysUntilDue)} days overdue`:`${A.daysUntilDue} days remaining`})]}),n.jsxs("div",{className:"flex gap-2",children:[A.status==="pending"&&n.jsx("button",{onClick:()=>E(A.id,"in_progress"),className:"flex-1 px-3 py-2 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:"Start"}),A.status==="in_progress"&&n.jsx("button",{onClick:()=>E(A.id,"completed"),className:"flex-1 px-3 py-2 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Complete"}),n.jsx("button",{onClick:()=>i(A),className:"flex-1 px-3 py-2 text-xs bg-gray-600 text-white rounded hover:bg-gray-700",children:"View Details"})]})]})]},A.id))}),y.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"📋"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No compliance tasks found"}),n.jsx("p",{className:"text-gray-500",children:x||c!=="all"||m!=="all"?"Try adjusting your search or filters":"Compliance tasks will appear here as vehicles are added to your fleet"})]}),r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r.title}),n.jsx("p",{className:"text-gray-600",children:r.vehicleName})]}),n.jsx("button",{onClick:()=>i(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-700",children:r.description})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Priority"}),n.jsx("span",{className:`px-2 py-1 text-sm rounded ${D(r.priority)}`,children:r.priority.toUpperCase()})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Status"}),n.jsx("span",{className:`px-2 py-1 text-sm rounded ${b(r.status)}`,children:r.status.replace("_"," ").toUpperCase()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Due Date"}),n.jsx("p",{className:"text-gray-700",children:r.dueDate})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Assigned To"}),n.jsx("p",{className:"text-gray-700",children:r.assignedTo})]})]}),r.estimatedCost&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Estimated Cost"}),n.jsxs("p",{className:"text-gray-700",children:["$",r.estimatedCost.toLocaleString()]})]}),r.requiredDocuments&&r.requiredDocuments.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Required Documents"}),n.jsx("ul",{className:"text-gray-700 space-y-1",children:r.requiredDocuments.map((A,X)=>n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"mr-2",children:"📄"}),A]},X))})]}),r.filingUrl&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Filing URL"}),n.jsx("a",{href:r.filingUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:r.filingUrl})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[r.status==="pending"&&n.jsx("button",{onClick:()=>{E(r.id,"in_progress"),i(null)},className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Start Task"}),r.status==="in_progress"&&n.jsx("button",{onClick:()=>{E(r.id,"completed"),i(null)},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Complete"}),n.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Close"})]})]})]})})]})},Av=({setCurrentPage:f})=>{const[a,r]=G.useState(()=>{const m=ze.getFleet(),h=nt.getFleetStats();return{total:m.length+h.total,active:m.filter(x=>x.status==="active").length+h.active,inactive:m.filter(x=>x.status==="inactive").length+h.inactive,complianceExpired:h.complianceExpired}}),[i,c]=G.useState(nt.getComplianceStats()),u=()=>{const m=ze.getFleet(),h=nt.getFleetStats();r({total:m.length+h.total,active:m.filter(x=>x.status==="active").length+h.active,inactive:m.filter(x=>x.status==="inactive").length+h.inactive,complianceExpired:h.complianceExpired}),c(nt.getComplianceStats())};return G.useEffect(()=>{const m=nt.subscribe(u);return u(),m},[]),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Fleet Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"Overview of your fleet operations"})]}),n.jsx("div",{className:"text-4xl",children:"🚛"})]}),n.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.total}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Vehicles"})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-green-700",children:a.active}),n.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),n.jsxs("div",{className:"bg-amber-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-amber-700",children:i.pending}),n.jsx("div",{className:"text-sm text-gray-600",children:"Alerts"})]}),n.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:"--"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Compliance"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-gray-200",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Compliance Status"}),n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsxs("div",{className:"relative w-32 h-32",children:[n.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 100 100",children:[n.jsx("circle",{cx:"50",cy:"50",r:"35",stroke:"#e5e7eb",strokeWidth:"8",fill:"none"}),n.jsx("circle",{cx:"50",cy:"50",r:"35",stroke:"#10b981",strokeWidth:"8",fill:"none",strokeDasharray:"0 220",strokeLinecap:"round"})]}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[n.jsx("span",{className:"text-3xl font-bold text-gray-500",children:"--"}),n.jsx("span",{className:"text-sm text-gray-600",children:"No Data"})]})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-700",children:"DOT Compliance"}),n.jsx("span",{className:"font-semibold text-gray-500",children:"--"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-700",children:"Insurance"}),n.jsx("span",{className:"font-semibold text-gray-500",children:"--"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-700",children:"Inspections"}),n.jsx("span",{className:"font-semibold text-gray-500",children:"--"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border border-gray-200",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>f("onboarding"),className:"flex items-center p-4 bg-blue-50 rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors",children:[n.jsx("span",{className:"text-2xl mr-3",children:"📁"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-semibold text-gray-900",children:"Add Vehicles"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Upload or add manually"})]})]}),n.jsxs("button",{onClick:()=>f("fleet"),className:"flex items-center p-4 bg-green-50 rounded-lg border border-green-200 hover:bg-green-100 transition-colors",children:[n.jsx("span",{className:"text-2xl mr-3",children:"🚛"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-semibold text-gray-900",children:"Manage Fleet"}),n.jsx("div",{className:"text-sm text-gray-600",children:"View all vehicles"})]})]}),n.jsxs("button",{onClick:()=>f("comprehensive-compliance"),className:"flex items-center p-4 bg-purple-50 rounded-lg border border-purple-200 hover:bg-purple-100 transition-colors",children:[n.jsx("span",{className:"text-2xl mr-3",children:"🛡️"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-semibold text-gray-900",children:"Compliance"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Monitor alerts"})]})]})]})]})]})};function Cv(){var i,c,u,m,h,x,g,y,w;const[f,a]=G.useState("dashboard"),r=[{id:"dashboard",label:"Dashboard",icon:"📊"},{id:"onboarding",label:"Fleet Onboarding",icon:"📁"},{id:"fleet",label:"Fleet Management",icon:"🚛"},{id:"drivers",label:"Driver Management",icon:"👨‍💼"},{id:"compliance",label:"Compliance",icon:"📋"},{id:"comprehensive-compliance",label:"Real-time Compliance",icon:"🛡️"},{id:"reports",label:"Reports",icon:"📈"}];return n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[n.jsxs("div",{className:"w-72 bg-gradient-to-b from-slate-800 to-slate-900 text-white shadow-2xl",children:[n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-xl font-bold",children:"🚛"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-white",children:"TruckBo Pro"}),n.jsx("p",{className:"text-slate-300 text-sm",children:"Fleet Management"})]})]}),ot.getCurrentUser()&&n.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 mt-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-xs font-bold",children:[(c=(i=ot.getCurrentUser())==null?void 0:i.firstName)==null?void 0:c[0],(m=(u=ot.getCurrentUser())==null?void 0:u.lastName)==null?void 0:m[0]]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-white text-sm font-medium",children:[(h=ot.getCurrentUser())==null?void 0:h.firstName," ",(x=ot.getCurrentUser())==null?void 0:x.lastName]}),n.jsx("p",{className:"text-slate-300 text-xs",children:(g=ot.getCurrentUser())==null?void 0:g.role})]})]}),n.jsx("div",{className:"text-slate-300 text-xs mb-2",children:(y=ot.getCurrentCompany())==null?void 0:y.name}),n.jsx("button",{onClick:()=>ot.logout(),className:"w-full text-center px-3 py-2 text-xs bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Logout"})]}),n.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-300 text-sm",children:"Total Fleet"}),n.jsx("span",{className:"text-white font-bold text-lg",children:ze.getFleet().length+nt.getFleetStats().total})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-slate-300 text-sm",children:"Compliance Score"}),n.jsx("span",{className:"text-gray-400 font-bold",children:"--"})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-slate-300 text-xs",children:ze.getFleet().length>0?"Live Fleet Data":"No Data"}),n.jsx("span",{className:"text-blue-400 text-xs",children:ze.getFleet().length>0?"🟢 Active":"⚪ Empty"})]})]})]}),n.jsx("nav",{className:"p-4 space-y-2",children:r.map(D=>n.jsxs("button",{onClick:()=>a(D.id),className:`w-full text-left px-4 py-4 rounded-xl flex items-center space-x-4 transition-all duration-200 group ${f===D.id?"bg-gradient-to-r from-blue-600 to-blue-700 shadow-lg transform scale-105":"hover:bg-slate-700/50 hover:transform hover:translate-x-1"}`,children:[n.jsx("span",{className:`text-2xl transition-transform duration-200 ${f===D.id?"transform scale-110":"group-hover:scale-110"}`,children:D.icon}),n.jsxs("div",{children:[n.jsx("span",{className:`font-medium ${f===D.id?"text-white":"text-slate-200"}`,children:D.label}),f===D.id&&n.jsx("div",{className:"w-2 h-2 bg-white rounded-full mt-1"})]})]},D.id))}),n.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-400",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{children:"System Online"})]}),n.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Last sync: ",new Date().toLocaleTimeString()]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[n.jsx("header",{className:"bg-white/80 backdrop-blur-lg px-8 py-4 shadow-sm",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:((w=r.find(D=>D.id===f))==null?void 0:w.label)||"Dashboard"}),n.jsxs("p",{className:"text-slate-600 text-sm mt-1",children:[f==="dashboard"&&"Fleet overview and key metrics",f==="onboarding"&&"Add new vehicles to your fleet",f==="fleet"&&"Manage your fleet vehicles",f==="drivers"&&"Track medical certificates and CDL renewals",f==="compliance"&&"Track compliance tasks and deadlines",f==="comprehensive-compliance"&&"Real-time compliance monitoring",f==="reports"&&"Generate compliance reports and analytics"]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"hidden md:flex items-center space-x-6 text-sm",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-green-600 font-bold text-lg",children:nt.getFleetStats().active}),n.jsx("div",{className:"text-slate-500",children:"Active"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-yellow-600 font-bold text-lg",children:nt.getComplianceStats().pending}),n.jsx("div",{className:"text-slate-500",children:"Pending"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 font-bold text-lg",children:nt.getComplianceStats().overdue}),n.jsx("div",{className:"text-slate-500",children:"Overdue"})]})]}),n.jsx("button",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 font-medium",children:f==="onboarding"?"+ Add Vehicles":f==="fleet"?"+ New Vehicle":f==="compliance"?"+ New Task":"+ Quick Action"})]})]})}),n.jsx("main",{className:"flex-1 p-8 overflow-auto",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[f==="dashboard"&&n.jsx(Av,{setCurrentPage:a}),f==="onboarding"&&n.jsx(Ev,{setCurrentPage:a}),f==="fleet"&&n.jsx(Dv,{}),f==="drivers"&&n.jsx(rv,{}),f==="reports"&&n.jsx(iv,{}),f==="compliance"&&n.jsx(Rv,{}),f==="comprehensive-compliance"&&n.jsx(jv,{vehicles:nt.getAllVehicles().map(D=>({id:D.id,vin:D.vin,make:D.make,model:D.model,year:D.year,dotNumber:D.dotNumber}))}),f==="reports"&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx("span",{className:"text-4xl",children:"📈"})}),n.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Advanced Reports"}),n.jsx("p",{className:"text-slate-600 text-lg max-w-md mx-auto",children:"Comprehensive fleet analytics and reporting tools are coming soon to help you make data-driven decisions."}),n.jsx("button",{className:"mt-6 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-4 rounded-2xl font-black text-lg shadow-xl shadow-blue-900/20 hover:shadow-2xl hover:shadow-blue-900/30 transition-all duration-300 hover:scale-105 active:scale-95",children:"🚀 Request Early Access"})]})]})})]})]})}function Tv(){return n.jsxs(ry,{children:[n.jsx(uv,{children:n.jsx(Cv,{})}),n.jsx(sy,{})]})}cb.createRoot(document.getElementById("root")).render(n.jsx(zh.StrictMode,{children:n.jsx(Tv,{})}));
//# sourceMappingURL=index-DXKJ17NE.js.map
